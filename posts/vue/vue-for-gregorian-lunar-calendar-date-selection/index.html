<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Vue 实现公历,农历日期选择效果 | 隶笔难书</title>
<meta name=keywords content="Vue"><meta name=description content="Vue 学习笔记-系统学习 Pinia"><meta name=author content="Waite Wang"><link rel=canonical href=https://waite.wang/posts/vue/vue-for-gregorian-lunar-calendar-date-selection/><link crossorigin=anonymous href=/assets/css/stylesheet.1f25c954b6964bfd120383618e0c76f5d98627118274109d51919206cab78c1e.css integrity="sha256-HyXJVLaWS/0SA4Nhjgx29dmGJxGCdBCdUZGSBsq3jB4=" rel="preload stylesheet" as=style><link rel=icon href=https://waite.wang/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://waite.wang/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://waite.wang/favicon-32x32.png><link rel=apple-touch-icon href=https://waite.wang/apple-touch-icon.png><link rel=mask-icon href=https://waite.wang/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://waite.wang/posts/vue/vue-for-gregorian-lunar-calendar-date-selection/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://waite.wang/posts/vue/vue-for-gregorian-lunar-calendar-date-selection/"><meta property="og:site_name" content="隶笔难书"><meta property="og:title" content="Vue 实现公历,农历日期选择效果"><meta property="og:description" content="Vue 学习笔记-系统学习 Pinia"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-03-22T21:05:54+08:00"><meta property="article:modified_time" content="2025-03-22T21:05:54+08:00"><meta property="article:tag" content="Vue"><meta name=twitter:card content="summary"><meta name=twitter:title content="Vue 实现公历,农历日期选择效果"><meta name=twitter:description content="Vue 学习笔记-系统学习 Pinia"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://waite.wang/posts/"},{"@type":"ListItem","position":2,"name":"Vue 实现公历,农历日期选择效果","item":"https://waite.wang/posts/vue/vue-for-gregorian-lunar-calendar-date-selection/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Vue 实现公历,农历日期选择效果","name":"Vue 实现公历,农历日期选择效果","description":"Vue 学习笔记-系统学习 Pinia","keywords":["Vue"],"articleBody":"在开发过程中，我们经常需要实现日期选择功能，而有时用户可能希望使用农历日期进行选择。本文将介绍如何使用 Vue 实现一个支持公历和农历选择的日期选择器。\n注意 这里的农历使用数组，正常来说有其他的方法，但是作者这边不需要。\n实现思路 界面布局：日期选择器分为顶部工具栏和日期选择区域。顶部工具栏包含取消按钮、公历/农历切换按钮和确定按钮。日期选择区域包含年、月、日、时辰（可选）的滚动选择列。\n数据管理：使用 Vue 的 ref 和 reactive 来管理选中的日期和日历类型。通过 computed 属性动态生成年、月、日、时辰的选项。\n滚动交互：通过监听滚动事件，实时更新选中的日期，并实现平滑滚动效果。\n农历支持：通过数组存储农历月份和日期的名称，根据用户选择的日历类型动态显示公历或农历。\n\u003ctemplate\u003e \u003cdiv class=\"date-picker\"\u003e \u003cdiv class=\"picker-header\"\u003e \u003cdiv class=\"picker-toolbar\"\u003e \u003cspan class=\"picker-cancel\" @click=\"onCancel\"\u003e取消\u003c/span\u003e \u003cdiv class=\"picker-tabs\"\u003e \u003cdiv v-for=\"tab in ['公历', '农历']\" :key=\"tab\" :class=\"['picker-tab', { active: calendarType === tab }]\" @click=\"calendarType = tab\" \u003e {{ tab }} \u003c/div\u003e \u003c/div\u003e \u003cspan class=\"picker-confirm\" @click=\"onConfirm\"\u003e确定\u003c/span\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"date-picker-indicator\"\u003e\u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup\u003e import { ref, reactive, computed, watch, nextTick, onMounted } from 'vue' import { lunarMonths, lunarDays, hourOptions } from '@/constants/date' const props = defineProps({ modelValue: { type: Date, default: () =\u003e new Date() }, minDate: { type: Date, default: () =\u003e new Date(1900, 0, 1) }, maxDate: { type: Date, default: () =\u003e new Date() }, showHour: { type: Boolean, default: false }, initialHour: { type: String, default: '' } }) const emit = defineEmits(['update:modelValue', 'confirm', 'cancel']) // 日历类型 const calendarType = ref('公历') // 列引用 const yearColumn = ref(null) const monthColumn = ref(null) const dayColumn = ref(null) const hourColumn = ref(null) // 当前选中的日期 const selectedDate = reactive({ year: props.modelValue.getFullYear(), month: props.modelValue.getMonth() + 1, day: props.modelValue.getDate(), hour: props.modelValue.hour || hourOptions[0].value }) // 年份选项 const yearOptions = computed(() =\u003e { const years = [] const startYear = 1900 const endYear = new Date().getFullYear() for (let i = startYear; i \u003c= endYear; i++) { years.push({ text: `${i}年`, value: i }) } return years }) // 修改月份选项的计算属性 const monthOptions = computed(() =\u003e { const months = [] for (let i = 1; i \u003c= 12; i++) { const month = String(i).padStart(2, '0') months.push({ text: calendarType.value === '农历' ? lunarMonths[i - 1] : `${month}月`, value: i }) } return months }) // 修改日期选项的计算属性 const dayOptions = computed(() =\u003e { const days = [] const daysInMonth = new Date( selectedDate.year, selectedDate.month, 0 ).getDate() for (let i = 1; i \u003c= daysInMonth; i++) { const day = String(i).padStart(2, '0') days.push({ text: calendarType.value === '农历' ? lunarDays[i - 1] : `${day}日`, value: i }) } return days }) // 修改时辰选项为直接使用导入的常量 const hourOptionsComputed = computed(() =\u003e hourOptions) // 添加防抖函数 const debounce = (fn, delay) =\u003e { let timer = null return function (...args) { if (timer) clearTimeout(timer) timer = setTimeout(() =\u003e { fn.apply(this, args) }, delay) } } // 处理列滚动 const onColumnScroll = debounce((event, type) =\u003e { const el = event.target const scrollTop = el.scrollTop const itemHeight = 44 // 计算最接近的选项索引 const index = Math.round(scrollTop / itemHeight) // 获取对应的选项列表 let options switch (type) { case 'year': options = yearOptions.value break case 'month': options = monthOptions.value break case 'day': options = dayOptions.value break case 'hour': options = hourOptionsComputed.value console.log(options) break } // 确保索引在有效范围内 if (index \u003e= 0 \u0026\u0026 index \u003c options.length) { // 更新选中值 const value = options[index].value switch (type) { case 'year': selectedDate.year = value break case 'month': selectedDate.month = value break case 'day': selectedDate.day = value break case 'hour': selectedDate.hour = value console.log(selectedDate.hour) break } // 平滑滚动到正确位置 el.scrollTo({ top: index * itemHeight, behavior: 'smooth' }) } }, 100) // 修改滚动到选中项的方法 const scrollToSelected = () =\u003e { nextTick(() =\u003e { const columns = { year: yearColumn.value, month: monthColumn.value, day: dayColumn.value, hour: hourColumn.value } Object.entries(columns).forEach(([type, column]) =\u003e { if (!column || (type === 'hour' \u0026\u0026 !props.showHour)) return const itemsEl = column.querySelector('.date-column-items') const options = { year: yearOptions.value, month: monthOptions.value, day: dayOptions.value, hour: hourOptionsComputed.value }[type] const index = options.findIndex( (item) =\u003e item.value === selectedDate[type] ) if (index \u003e= 0) { itemsEl.scrollTo({ top: index * 44, behavior: 'smooth' }) } }) }) } // 确认选择 const onConfirm = () =\u003e { const date = new Date( selectedDate.year, selectedDate.month - 1, selectedDate.day ) emit('update:modelValue', date) emit('confirm', { date, calendarType: calendarType.value, hour: selectedDate.hour }) } // 取消选择 const onCancel = () =\u003e { emit('cancel') } // 组件挂载后初始化 onMounted(() =\u003e { nextTick(() =\u003e { if (props.initialHour) { const hourOption = hourOptions.find((h) =\u003e h.text === props.initialHour) if (hourOption) { selectedDate.hour = hourOption.value } } scrollToSelected() }) }) // 监听日历类型变化，更新显示 watch(calendarType, () =\u003e { nextTick(() =\u003e { scrollToSelected() }) }) \u003c/script\u003e \u003cstyle scoped\u003e .date-picker { background-color: #fff; user-select: none; } .picker-header { background: #f7f8fa; } .picker-toolbar { display: flex; align-items: center; padding: 10px 16px; border-bottom: 1px solid #ebedf0; } .picker-cancel, .picker-confirm { flex: 1; font-size: 14px; color: #969799; cursor: pointer; } .picker-confirm { text-align: right; color: #8b4513; } .picker-tabs { flex: 2; display: flex; justify-content: center; } .picker-tab { padding: 8px 16px; font-size: 14px; color: #969799; position: relative; cursor: pointer; } .picker-tab.active { color: #8b4513; font-weight: bold; } .picker-tab.active::after { content: ''; position: absolute; bottom: -11px; left: 50%; transform: translateX(-50%); width: 20px; height: 2px; background-color: #8b4513; } .date-picker-content { height: 220px; position: relative; overflow: hidden; padding: 20px 16px; } .date-columns { display: flex; height: 100%; } .date-column { height: 100%; overflow: hidden; text-align: center; background-color: #fff; margin: 0 2px; } /* 添加宽度比例控制 */ .date-column:nth-child(1), .date-column:nth-child(2), .date-column:nth-child(3) { flex: 0 0 20%; /* 前三列各占 20% */ } .date-column:nth-child(4) { flex: 0 0 40%; /* 最后一列占 40% */ } .date-column-items { height: 100%; overflow-y: auto; -webkit-overflow-scrolling: touch; padding: 88px 0; scroll-snap-type: y mandatory; } /* 隐藏滚动条但保留功能 */ .date-column-items::-webkit-scrollbar { display: none; } .date-column-items { -ms-overflow-style: none; scrollbar-width: none; } .date-item { height: 44px; line-height: 44px; font-size: 14px; color: #999; cursor: pointer; scroll-snap-align: center; opacity: 0.6; transition: all 0.3s; } .date-item.active { color: #8b4513; font-weight: bold; opacity: 1; font-size: 16px; } /* 移除中间选中区域的渐变效果 */ .date-picker-content::before, .date-picker-content::after { display: none; } /* 移除选择条 */ .date-picker-indicator { display: none; } \u003c/style\u003e // 农历月份 export const lunarMonths = [ '正月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '冬月', '腊月' ] // 农历日期 export const lunarDays = [ '初一', '初二', '初三', '初四', '初五', '初六', '初七', '初八', '初九', '初十', '十一', '十二', '十三', '十四', '十五', '十六', '十七', '十八', '十九', '二十', '廿一', '廿二', '廿三', '廿四', '廿五', '廿六', '廿七', '廿八', '廿九', '三十' ] ","wordCount":"2240","inLanguage":"zh-cn","datePublished":"2025-03-22T21:05:54+08:00","dateModified":"2025-03-22T21:05:54+08:00","author":{"@type":"Person","name":"Waite Wang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://waite.wang/posts/vue/vue-for-gregorian-lunar-calendar-date-selection/"},"publisher":{"@type":"Organization","name":"隶笔难书","logo":{"@type":"ImageObject","url":"https://waite.wang/images/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://waite.wang/ accesskey=h title="隶笔难书 (Alt + H)">隶笔难书</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://waite.wang/ title=首页><span>首页</span></a></li><li><a href=https://waite.wang/search title=搜索><span>搜索</span></a></li><li><a href=https://waite.wang/categories title=分类><span>分类</span></a></li><li><a href=https://waite.wang/tags title=标签><span>标签</span></a></li><li><a href=https://waite.wang/archives title=归档><span>归档</span></a></li><li><a href=https://waite.wang/links title=友链><span>友链</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://waite.wang/>Home</a>&nbsp;»&nbsp;<a href=https://waite.wang/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Vue 实现公历,农历日期选择效果</h1><div class=post-description>Vue 学习笔记-系统学习 Pinia</div><div class=post-meta>Created: &nbsp;<span title='2025-03-22 21:05:54 +0800 +0800'>2025-03-22</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;2240 words&nbsp;·&nbsp;Waite Wang&nbsp;|&nbsp;<a href=https://github.com/Waite0603/HugoBlog/edit/main/content/posts/vue/vue-for-gregorian-lunar-calendar-date-selection.md rel="noopener noreferrer" target=_blank>在 GitHub 编辑</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af aria-label=实现思路>实现思路</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>在开发过程中，我们经常需要实现日期选择功能，而有时用户可能希望使用农历日期进行选择。本文将介绍如何使用 Vue 实现一个支持公历和农历选择的日期选择器。</p><blockquote><p>注意 这里的农历使用数组，正常来说有其他的方法，但是作者这边不需要。</p></blockquote><p><img alt=image-20250324172736921 loading=lazy src=http://qiniu.waite.wang/202503241727046.png></p><h3 id=实现思路>实现思路<a hidden class=anchor aria-hidden=true href=#实现思路>#</a></h3><p>界面布局：日期选择器分为顶部工具栏和日期选择区域。顶部工具栏包含取消按钮、公历/农历切换按钮和确定按钮。日期选择区域包含年、月、日、时辰（可选）的滚动选择列。</p><p>数据管理：使用 Vue 的 ref 和 reactive 来管理选中的日期和日历类型。通过 computed 属性动态生成年、月、日、时辰的选项。</p><p>滚动交互：通过监听滚动事件，实时更新选中的日期，并实现平滑滚动效果。</p><p>农历支持：通过数组存储农历月份和日期的名称，根据用户选择的日历类型动态显示公历或农历。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;date-picker&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!--</span> <span class=nx>顶部工具栏</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;picker-header&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;picker-toolbar&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;picker-cancel&#34;</span> <span class=nt>@click</span><span class=s>=&#34;onCancel&#34;</span><span class=p>&gt;</span><span class=na>取消</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;picker-tabs&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span>
</span></span><span class=line><span class=cl>             <span class=nt>v-for</span><span class=o>=</span><span class=s>&#34;tab in [&#39;公历&#39;, &#39;农历&#39;]&#34;</span><span class=p>
</span></span></span><span class=line><span class=cl><span class=p></span>             <span class=nt>:key</span><span class=o>=</span><span class=s>&#34;tab&#34;</span>
</span></span><span class=line><span class=cl>             <span class=o>:</span><span class=na>class</span><span class=o>=</span><span class=s>&#34;[&#39;picker-tab&#39;, { active: calendarType === tab }]&#34;</span>
</span></span><span class=line><span class=cl>             <span class=nt>@click</span><span class=s>=&#34;calendarType = tab&#34;</span><span class=p>
</span></span></span><span class=line><span class=cl><span class=p></span>             <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>{{</span> <span class=nx>tab</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;picker-confirm&#34;</span> <span class=nt>@click</span><span class=s>=&#34;onConfirm&#34;</span><span class=p>&gt;</span><span class=na>确定</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=err>&lt;!--</span> <span class=na>日期选择区域</span> <span class=err>--</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;date-picker-content&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;date-columns&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;date-column&#34;</span> <span class=na>ref</span><span class=o>=</span><span class=s>&#34;yearColumn&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span>
</span></span><span class=line><span class=cl>             <span class=na>class</span><span class=o>=</span><span class=s>&#34;date-column-items&#34;</span>
</span></span><span class=line><span class=cl>             <span class=nt>@scroll</span><span class=s>=&#34;onColumnScroll($event, &#39;year&#39;)&#34;</span><span class=p>
</span></span></span><span class=line><span class=cl><span class=p></span>             <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>div</span>
</span></span><span class=line><span class=cl>               <span class=nt>v-for</span><span class=o>=</span><span class=s>&#34;year in yearOptions&#34;</span><span class=p>
</span></span></span><span class=line><span class=cl><span class=p></span>               <span class=nt>:key</span><span class=o>=</span><span class=s>&#34;year.value&#34;</span>
</span></span><span class=line><span class=cl>               <span class=o>:</span><span class=na>class</span><span class=o>=</span><span class=s>&#34;[
</span></span></span><span class=line><span class=cl><span class=s>                       &#39;date-item&#39;,
</span></span></span><span class=line><span class=cl><span class=s>                       { active: selectedDate.year === year.value }
</span></span></span><span class=line><span class=cl><span class=s>                       ]&#34;</span>
</span></span><span class=line><span class=cl>               <span class=nt>@click</span><span class=s>=&#34;selectYear(year.value)&#34;</span><span class=p>
</span></span></span><span class=line><span class=cl><span class=p></span>               <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>{{</span> <span class=nx>year</span><span class=p>.</span><span class=nx>text</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;date-column&#34;</span> <span class=na>ref</span><span class=o>=</span><span class=s>&#34;monthColumn&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span>
</span></span><span class=line><span class=cl>             <span class=na>class</span><span class=o>=</span><span class=s>&#34;date-column-items&#34;</span>
</span></span><span class=line><span class=cl>             <span class=nt>@scroll</span><span class=s>=&#34;onColumnScroll($event, &#39;month&#39;)&#34;</span><span class=p>
</span></span></span><span class=line><span class=cl><span class=p></span>             <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>div</span>
</span></span><span class=line><span class=cl>               <span class=nt>v-for</span><span class=o>=</span><span class=s>&#34;month in monthOptions&#34;</span><span class=p>
</span></span></span><span class=line><span class=cl><span class=p></span>               <span class=nt>:key</span><span class=o>=</span><span class=s>&#34;month.value&#34;</span>
</span></span><span class=line><span class=cl>               <span class=o>:</span><span class=na>class</span><span class=o>=</span><span class=s>&#34;[
</span></span></span><span class=line><span class=cl><span class=s>                       &#39;date-item&#39;,
</span></span></span><span class=line><span class=cl><span class=s>                       { active: selectedDate.month === month.value }
</span></span></span><span class=line><span class=cl><span class=s>                       ]&#34;</span>
</span></span><span class=line><span class=cl>               <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>{{</span> <span class=nx>month</span><span class=p>.</span><span class=nx>text</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;date-column&#34;</span> <span class=na>ref</span><span class=o>=</span><span class=s>&#34;dayColumn&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span>
</span></span><span class=line><span class=cl>             <span class=na>class</span><span class=o>=</span><span class=s>&#34;date-column-items&#34;</span>
</span></span><span class=line><span class=cl>             <span class=nt>@scroll</span><span class=s>=&#34;onColumnScroll($event, &#39;day&#39;)&#34;</span><span class=p>
</span></span></span><span class=line><span class=cl><span class=p></span>             <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>div</span>
</span></span><span class=line><span class=cl>               <span class=nt>v-for</span><span class=o>=</span><span class=s>&#34;day in dayOptions&#34;</span><span class=p>
</span></span></span><span class=line><span class=cl><span class=p></span>               <span class=nt>:key</span><span class=o>=</span><span class=s>&#34;day.value&#34;</span>
</span></span><span class=line><span class=cl>               <span class=o>:</span><span class=na>class</span><span class=o>=</span><span class=s>&#34;[&#39;date-item&#39;, { active: selectedDate.day === day.value }]&#34;</span>
</span></span><span class=line><span class=cl>               <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>{{</span> <span class=nx>day</span><span class=p>.</span><span class=nx>text</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;date-column&#34;</span> <span class=na>ref</span><span class=o>=</span><span class=s>&#34;hourColumn&#34;</span> <span class=nt>v-if</span><span class=o>=</span><span class=s>&#34;showHour&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span>
</span></span><span class=line><span class=cl>             <span class=na>class</span><span class=o>=</span><span class=s>&#34;date-column-items&#34;</span>
</span></span><span class=line><span class=cl>             <span class=nt>@scroll</span><span class=s>=&#34;onColumnScroll($event, &#39;hour&#39;)&#34;</span><span class=p>
</span></span></span><span class=line><span class=cl><span class=p></span>             <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>div</span>
</span></span><span class=line><span class=cl>               <span class=nt>v-for</span><span class=o>=</span><span class=s>&#34;hour in hourOptionsComputed&#34;</span><span class=p>
</span></span></span><span class=line><span class=cl><span class=p></span>               <span class=nt>:key</span><span class=o>=</span><span class=s>&#34;hour.value&#34;</span>
</span></span><span class=line><span class=cl>               <span class=o>:</span><span class=na>class</span><span class=o>=</span><span class=s>&#34;[
</span></span></span><span class=line><span class=cl><span class=s>                       &#39;date-item&#39;,
</span></span></span><span class=line><span class=cl><span class=s>                       { active: selectedDate.hour === hour.value }
</span></span></span><span class=line><span class=cl><span class=s>                       ]&#34;</span>
</span></span><span class=line><span class=cl>               <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>{{</span> <span class=nx>hour</span><span class=p>.</span><span class=nx>text</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--</span> <span class=nx>选中区域指示器</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;date-picker-indicator&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kr>import</span> <span class=p>{</span> <span class=nx>ref</span><span class=p>,</span> <span class=nx>reactive</span><span class=p>,</span> <span class=nx>computed</span><span class=p>,</span> <span class=nx>watch</span><span class=p>,</span> <span class=nx>nextTick</span><span class=p>,</span> <span class=nx>onMounted</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue&#39;</span>
</span></span><span class=line><span class=cl>  <span class=kr>import</span> <span class=p>{</span> <span class=nx>lunarMonths</span><span class=p>,</span> <span class=nx>lunarDays</span><span class=p>,</span> <span class=nx>hourOptions</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@/constants/date&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>props</span> <span class=o>=</span> <span class=nx>defineProps</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>modelValue</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=nb>Date</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=k>default</span><span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>minDate</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=nb>Date</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=k>default</span><span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>(</span><span class=mi>1900</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>maxDate</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=nb>Date</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=k>default</span><span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>showHour</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=nb>Boolean</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=k>default</span><span class=o>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>initialHour</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=k>default</span><span class=o>:</span> <span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>emit</span> <span class=o>=</span> <span class=nx>defineEmits</span><span class=p>([</span><span class=s1>&#39;update:modelValue&#39;</span><span class=p>,</span> <span class=s1>&#39;confirm&#39;</span><span class=p>,</span> <span class=s1>&#39;cancel&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 日历类型
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>calendarType</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=s1>&#39;公历&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 列引用
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>yearColumn</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>monthColumn</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>dayColumn</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>hourColumn</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 当前选中的日期
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>selectedDate</span> <span class=o>=</span> <span class=nx>reactive</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>year</span><span class=o>:</span> <span class=nx>props</span><span class=p>.</span><span class=nx>modelValue</span><span class=p>.</span><span class=nx>getFullYear</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=nx>month</span><span class=o>:</span> <span class=nx>props</span><span class=p>.</span><span class=nx>modelValue</span><span class=p>.</span><span class=nx>getMonth</span><span class=p>()</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>day</span><span class=o>:</span> <span class=nx>props</span><span class=p>.</span><span class=nx>modelValue</span><span class=p>.</span><span class=nx>getDate</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=nx>hour</span><span class=o>:</span> <span class=nx>props</span><span class=p>.</span><span class=nx>modelValue</span><span class=p>.</span><span class=nx>hour</span> <span class=o>||</span> <span class=nx>hourOptions</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 年份选项
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>yearOptions</span> <span class=o>=</span> <span class=nx>computed</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>years</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>startYear</span> <span class=o>=</span> <span class=mi>1900</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>endYear</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>getFullYear</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span> <span class=o>=</span> <span class=nx>startYear</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;=</span> <span class=nx>endYear</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>years</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span> <span class=nx>text</span><span class=o>:</span> <span class=sb>`</span><span class=si>${</span><span class=nx>i</span><span class=si>}</span><span class=sb>年`</span><span class=p>,</span> <span class=nx>value</span><span class=o>:</span> <span class=nx>i</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>years</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 修改月份选项的计算属性
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>monthOptions</span> <span class=o>=</span> <span class=nx>computed</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>months</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;=</span> <span class=mi>12</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>month</span> <span class=o>=</span> <span class=nb>String</span><span class=p>(</span><span class=nx>i</span><span class=p>).</span><span class=nx>padStart</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;0&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nx>months</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>text</span><span class=o>:</span> <span class=nx>calendarType</span><span class=p>.</span><span class=nx>value</span> <span class=o>===</span> <span class=s1>&#39;农历&#39;</span> <span class=o>?</span> <span class=nx>lunarMonths</span><span class=p>[</span><span class=nx>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>:</span> <span class=sb>`</span><span class=si>${</span><span class=nx>month</span><span class=si>}</span><span class=sb>月`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>value</span><span class=o>:</span> <span class=nx>i</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>months</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 修改日期选项的计算属性
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>dayOptions</span> <span class=o>=</span> <span class=nx>computed</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>days</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>daysInMonth</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=nx>selectedDate</span><span class=p>.</span><span class=nx>year</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>selectedDate</span><span class=p>.</span><span class=nx>month</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=p>).</span><span class=nx>getDate</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;=</span> <span class=nx>daysInMonth</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>day</span> <span class=o>=</span> <span class=nb>String</span><span class=p>(</span><span class=nx>i</span><span class=p>).</span><span class=nx>padStart</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;0&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nx>days</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>text</span><span class=o>:</span> <span class=nx>calendarType</span><span class=p>.</span><span class=nx>value</span> <span class=o>===</span> <span class=s1>&#39;农历&#39;</span> <span class=o>?</span> <span class=nx>lunarDays</span><span class=p>[</span><span class=nx>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>:</span> <span class=sb>`</span><span class=si>${</span><span class=nx>day</span><span class=si>}</span><span class=sb>日`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>value</span><span class=o>:</span> <span class=nx>i</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>days</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 修改时辰选项为直接使用导入的常量
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>hourOptionsComputed</span> <span class=o>=</span> <span class=nx>computed</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nx>hourOptions</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 添加防抖函数
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>debounce</span> <span class=o>=</span> <span class=p>(</span><span class=nx>fn</span><span class=p>,</span> <span class=nx>delay</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>timer</span> <span class=o>=</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kd>function</span> <span class=p>(...</span><span class=nx>args</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>timer</span><span class=p>)</span> <span class=nx>clearTimeout</span><span class=p>(</span><span class=nx>timer</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nx>timer</span> <span class=o>=</span> <span class=nx>setTimeout</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fn</span><span class=p>.</span><span class=nx>apply</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nx>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span> <span class=nx>delay</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 处理列滚动
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>onColumnScroll</span> <span class=o>=</span> <span class=nx>debounce</span><span class=p>((</span><span class=nx>event</span><span class=p>,</span> <span class=nx>type</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>el</span> <span class=o>=</span> <span class=nx>event</span><span class=p>.</span><span class=nx>target</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>scrollTop</span> <span class=o>=</span> <span class=nx>el</span><span class=p>.</span><span class=nx>scrollTop</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>itemHeight</span> <span class=o>=</span> <span class=mi>44</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 计算最接近的选项索引
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>index</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>round</span><span class=p>(</span><span class=nx>scrollTop</span> <span class=o>/</span> <span class=nx>itemHeight</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 获取对应的选项列表
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>let</span> <span class=nx>options</span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span> <span class=p>(</span><span class=nx>type</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=s1>&#39;year&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>options</span> <span class=o>=</span> <span class=nx>yearOptions</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=s1>&#39;month&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>options</span> <span class=o>=</span> <span class=nx>monthOptions</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=s1>&#39;day&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>options</span> <span class=o>=</span> <span class=nx>dayOptions</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=s1>&#39;hour&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>options</span> <span class=o>=</span> <span class=nx>hourOptionsComputed</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>options</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 确保索引在有效范围内
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=p>(</span><span class=nx>index</span> <span class=o>&gt;=</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=nx>index</span> <span class=o>&lt;</span> <span class=nx>options</span><span class=p>.</span><span class=nx>length</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 更新选中值
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=kr>const</span> <span class=nx>value</span> <span class=o>=</span> <span class=nx>options</span><span class=p>[</span><span class=nx>index</span><span class=p>].</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>      <span class=k>switch</span> <span class=p>(</span><span class=nx>type</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s1>&#39;year&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>          <span class=nx>selectedDate</span><span class=p>.</span><span class=nx>year</span> <span class=o>=</span> <span class=nx>value</span>
</span></span><span class=line><span class=cl>          <span class=k>break</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s1>&#39;month&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>          <span class=nx>selectedDate</span><span class=p>.</span><span class=nx>month</span> <span class=o>=</span> <span class=nx>value</span>
</span></span><span class=line><span class=cl>          <span class=k>break</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s1>&#39;day&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>          <span class=nx>selectedDate</span><span class=p>.</span><span class=nx>day</span> <span class=o>=</span> <span class=nx>value</span>
</span></span><span class=line><span class=cl>          <span class=k>break</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s1>&#39;hour&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>          <span class=nx>selectedDate</span><span class=p>.</span><span class=nx>hour</span> <span class=o>=</span> <span class=nx>value</span>
</span></span><span class=line><span class=cl>          <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>selectedDate</span><span class=p>.</span><span class=nx>hour</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=k>break</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=c1>// 平滑滚动到正确位置
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>el</span><span class=p>.</span><span class=nx>scrollTo</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>top</span><span class=o>:</span> <span class=nx>index</span> <span class=o>*</span> <span class=nx>itemHeight</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>behavior</span><span class=o>:</span> <span class=s1>&#39;smooth&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 修改滚动到选中项的方法
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>scrollToSelected</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>nextTick</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>columns</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>year</span><span class=o>:</span> <span class=nx>yearColumn</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>month</span><span class=o>:</span> <span class=nx>monthColumn</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>day</span><span class=o>:</span> <span class=nx>dayColumn</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>hour</span><span class=o>:</span> <span class=nx>hourColumn</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=nb>Object</span><span class=p>.</span><span class=nx>entries</span><span class=p>(</span><span class=nx>columns</span><span class=p>).</span><span class=nx>forEach</span><span class=p>(([</span><span class=nx>type</span><span class=p>,</span> <span class=nx>column</span><span class=p>])</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>column</span> <span class=o>||</span> <span class=p>(</span><span class=nx>type</span> <span class=o>===</span> <span class=s1>&#39;hour&#39;</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=nx>props</span><span class=p>.</span><span class=nx>showHour</span><span class=p>))</span> <span class=k>return</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>itemsEl</span> <span class=o>=</span> <span class=nx>column</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s1>&#39;.date-column-items&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>options</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>year</span><span class=o>:</span> <span class=nx>yearOptions</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>month</span><span class=o>:</span> <span class=nx>monthOptions</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>day</span><span class=o>:</span> <span class=nx>dayOptions</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>hour</span><span class=o>:</span> <span class=nx>hourOptionsComputed</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>        <span class=p>}[</span><span class=nx>type</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>index</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>findIndex</span><span class=p>(</span>
</span></span><span class=line><span class=cl>          <span class=p>(</span><span class=nx>item</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>item</span><span class=p>.</span><span class=nx>value</span> <span class=o>===</span> <span class=nx>selectedDate</span><span class=p>[</span><span class=nx>type</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>index</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>itemsEl</span><span class=p>.</span><span class=nx>scrollTo</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>top</span><span class=o>:</span> <span class=nx>index</span> <span class=o>*</span> <span class=mi>44</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>behavior</span><span class=o>:</span> <span class=s1>&#39;smooth&#39;</span>
</span></span><span class=line><span class=cl>          <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 确认选择
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>onConfirm</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>date</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=nx>selectedDate</span><span class=p>.</span><span class=nx>year</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>selectedDate</span><span class=p>.</span><span class=nx>month</span> <span class=o>-</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>selectedDate</span><span class=p>.</span><span class=nx>day</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;update:modelValue&#39;</span><span class=p>,</span> <span class=nx>date</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;confirm&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>date</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>calendarType</span><span class=o>:</span> <span class=nx>calendarType</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>hour</span><span class=o>:</span> <span class=nx>selectedDate</span><span class=p>.</span><span class=nx>hour</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 取消选择
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>onCancel</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;cancel&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 组件挂载后初始化
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>onMounted</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>nextTick</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>props</span><span class=p>.</span><span class=nx>initialHour</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>hourOption</span> <span class=o>=</span> <span class=nx>hourOptions</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>h</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>h</span><span class=p>.</span><span class=nx>text</span> <span class=o>===</span> <span class=nx>props</span><span class=p>.</span><span class=nx>initialHour</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>hourOption</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>selectedDate</span><span class=p>.</span><span class=nx>hour</span> <span class=o>=</span> <span class=nx>hourOption</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=nx>scrollToSelected</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 监听日历类型变化，更新显示
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>watch</span><span class=p>(</span><span class=nx>calendarType</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>nextTick</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>scrollToSelected</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>style</span> <span class=na>scoped</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>picker</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>background</span><span class=o>-</span><span class=nx>color</span><span class=o>:</span> <span class=err>#</span><span class=nx>fff</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>user</span><span class=o>-</span><span class=nx>select</span><span class=o>:</span> <span class=nx>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>picker</span><span class=o>-</span><span class=nx>header</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>background</span><span class=o>:</span> <span class=err>#</span><span class=nx>f7f8fa</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>picker</span><span class=o>-</span><span class=nx>toolbar</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>display</span><span class=o>:</span> <span class=nx>flex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>align</span><span class=o>-</span><span class=nx>items</span><span class=o>:</span> <span class=nx>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>padding</span><span class=o>:</span> <span class=mi>10</span><span class=nx>px</span> <span class=mi>16</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>border</span><span class=o>-</span><span class=nx>bottom</span><span class=o>:</span> <span class=mi>1</span><span class=nx>px</span> <span class=nx>solid</span> <span class=err>#</span><span class=nx>ebedf0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>picker</span><span class=o>-</span><span class=nx>cancel</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>picker</span><span class=o>-</span><span class=nx>confirm</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>flex</span><span class=o>:</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>font</span><span class=o>-</span><span class=nx>size</span><span class=o>:</span> <span class=mi>14</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>color</span><span class=o>:</span> <span class=err>#</span><span class=mi>969799</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>cursor</span><span class=o>:</span> <span class=nx>pointer</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>picker</span><span class=o>-</span><span class=nx>confirm</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>text</span><span class=o>-</span><span class=nx>align</span><span class=o>:</span> <span class=nx>right</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>color</span><span class=o>:</span> <span class=err>#</span><span class=mi>8</span><span class=nx>b4513</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>picker</span><span class=o>-</span><span class=nx>tabs</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>flex</span><span class=o>:</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>display</span><span class=o>:</span> <span class=nx>flex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>justify</span><span class=o>-</span><span class=nx>content</span><span class=o>:</span> <span class=nx>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>picker</span><span class=o>-</span><span class=nx>tab</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>padding</span><span class=o>:</span> <span class=mi>8</span><span class=nx>px</span> <span class=mi>16</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>font</span><span class=o>-</span><span class=nx>size</span><span class=o>:</span> <span class=mi>14</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>color</span><span class=o>:</span> <span class=err>#</span><span class=mi>969799</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>position</span><span class=o>:</span> <span class=nx>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>cursor</span><span class=o>:</span> <span class=nx>pointer</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>picker</span><span class=o>-</span><span class=nx>tab</span><span class=p>.</span><span class=nx>active</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>color</span><span class=o>:</span> <span class=err>#</span><span class=mi>8</span><span class=nx>b4513</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>font</span><span class=o>-</span><span class=nx>weight</span><span class=o>:</span> <span class=nx>bold</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>picker</span><span class=o>-</span><span class=nx>tab</span><span class=p>.</span><span class=nx>active</span><span class=o>::</span><span class=nx>after</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>content</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>position</span><span class=o>:</span> <span class=nx>absolute</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>bottom</span><span class=o>:</span> <span class=o>-</span><span class=mi>11</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>left</span><span class=o>:</span> <span class=mi>50</span><span class=o>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>transform</span><span class=o>:</span> <span class=nx>translateX</span><span class=p>(</span><span class=o>-</span><span class=mi>50</span><span class=o>%</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>width</span><span class=o>:</span> <span class=mi>20</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>height</span><span class=o>:</span> <span class=mi>2</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>background</span><span class=o>-</span><span class=nx>color</span><span class=o>:</span> <span class=err>#</span><span class=mi>8</span><span class=nx>b4513</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>picker</span><span class=o>-</span><span class=nx>content</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>height</span><span class=o>:</span> <span class=mi>220</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>position</span><span class=o>:</span> <span class=nx>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>overflow</span><span class=o>:</span> <span class=nx>hidden</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>padding</span><span class=o>:</span> <span class=mi>20</span><span class=nx>px</span> <span class=mi>16</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>columns</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>display</span><span class=o>:</span> <span class=nx>flex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>height</span><span class=o>:</span> <span class=mi>100</span><span class=o>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>column</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>height</span><span class=o>:</span> <span class=mi>100</span><span class=o>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>overflow</span><span class=o>:</span> <span class=nx>hidden</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>text</span><span class=o>-</span><span class=nx>align</span><span class=o>:</span> <span class=nx>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>background</span><span class=o>-</span><span class=nx>color</span><span class=o>:</span> <span class=err>#</span><span class=nx>fff</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>margin</span><span class=o>:</span> <span class=mi>0</span> <span class=mi>2</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/* 添加宽度比例控制 */</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>column</span><span class=o>:</span><span class=nx>nth</span><span class=o>-</span><span class=nx>child</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>column</span><span class=o>:</span><span class=nx>nth</span><span class=o>-</span><span class=nx>child</span><span class=p>(</span><span class=mi>2</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>column</span><span class=o>:</span><span class=nx>nth</span><span class=o>-</span><span class=nx>child</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>flex</span><span class=o>:</span> <span class=mi>0</span> <span class=mi>0</span> <span class=mi>20</span><span class=o>%</span><span class=p>;</span> <span class=cm>/* 前三列各占 20% */</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>column</span><span class=o>:</span><span class=nx>nth</span><span class=o>-</span><span class=nx>child</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>flex</span><span class=o>:</span> <span class=mi>0</span> <span class=mi>0</span> <span class=mi>40</span><span class=o>%</span><span class=p>;</span> <span class=cm>/* 最后一列占 40% */</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>column</span><span class=o>-</span><span class=nx>items</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>height</span><span class=o>:</span> <span class=mi>100</span><span class=o>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>overflow</span><span class=o>-</span><span class=nx>y</span><span class=o>:</span> <span class=nx>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span><span class=nx>webkit</span><span class=o>-</span><span class=nx>overflow</span><span class=o>-</span><span class=nx>scrolling</span><span class=o>:</span> <span class=nx>touch</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>padding</span><span class=o>:</span> <span class=mi>88</span><span class=nx>px</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>scroll</span><span class=o>-</span><span class=nx>snap</span><span class=o>-</span><span class=nx>type</span><span class=o>:</span> <span class=nx>y</span> <span class=nx>mandatory</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/* 隐藏滚动条但保留功能 */</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>column</span><span class=o>-</span><span class=nx>items</span><span class=o>::-</span><span class=nx>webkit</span><span class=o>-</span><span class=nx>scrollbar</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>display</span><span class=o>:</span> <span class=nx>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>column</span><span class=o>-</span><span class=nx>items</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span><span class=nx>ms</span><span class=o>-</span><span class=nx>overflow</span><span class=o>-</span><span class=nx>style</span><span class=o>:</span> <span class=nx>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>scrollbar</span><span class=o>-</span><span class=nx>width</span><span class=o>:</span> <span class=nx>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>item</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>height</span><span class=o>:</span> <span class=mi>44</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>line</span><span class=o>-</span><span class=nx>height</span><span class=o>:</span> <span class=mi>44</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>font</span><span class=o>-</span><span class=nx>size</span><span class=o>:</span> <span class=mi>14</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>color</span><span class=o>:</span> <span class=err>#</span><span class=mi>999</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>cursor</span><span class=o>:</span> <span class=nx>pointer</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>scroll</span><span class=o>-</span><span class=nx>snap</span><span class=o>-</span><span class=nx>align</span><span class=o>:</span> <span class=nx>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>opacity</span><span class=o>:</span> <span class=mf>0.6</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>transition</span><span class=o>:</span> <span class=nx>all</span> <span class=mf>0.3</span><span class=nx>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>item</span><span class=p>.</span><span class=nx>active</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>color</span><span class=o>:</span> <span class=err>#</span><span class=mi>8</span><span class=nx>b4513</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>font</span><span class=o>-</span><span class=nx>weight</span><span class=o>:</span> <span class=nx>bold</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>opacity</span><span class=o>:</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>font</span><span class=o>-</span><span class=nx>size</span><span class=o>:</span> <span class=mi>16</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/* 移除中间选中区域的渐变效果 */</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>picker</span><span class=o>-</span><span class=nx>content</span><span class=o>::</span><span class=nx>before</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>picker</span><span class=o>-</span><span class=nx>content</span><span class=o>::</span><span class=nx>after</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>display</span><span class=o>:</span> <span class=nx>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/* 移除选择条 */</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>date</span><span class=o>-</span><span class=nx>picker</span><span class=o>-</span><span class=nx>indicator</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>display</span><span class=o>:</span> <span class=nx>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 农历月份
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>const</span> <span class=nx>lunarMonths</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;正月&#39;</span><span class=p>,</span> <span class=s1>&#39;二月&#39;</span><span class=p>,</span> <span class=s1>&#39;三月&#39;</span><span class=p>,</span> <span class=s1>&#39;四月&#39;</span><span class=p>,</span> <span class=s1>&#39;五月&#39;</span><span class=p>,</span> <span class=s1>&#39;六月&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;七月&#39;</span><span class=p>,</span> <span class=s1>&#39;八月&#39;</span><span class=p>,</span> <span class=s1>&#39;九月&#39;</span><span class=p>,</span> <span class=s1>&#39;十月&#39;</span><span class=p>,</span> <span class=s1>&#39;冬月&#39;</span><span class=p>,</span> <span class=s1>&#39;腊月&#39;</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 农历日期
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>const</span> <span class=nx>lunarDays</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;初一&#39;</span><span class=p>,</span> <span class=s1>&#39;初二&#39;</span><span class=p>,</span> <span class=s1>&#39;初三&#39;</span><span class=p>,</span> <span class=s1>&#39;初四&#39;</span><span class=p>,</span> <span class=s1>&#39;初五&#39;</span><span class=p>,</span> <span class=s1>&#39;初六&#39;</span><span class=p>,</span> <span class=s1>&#39;初七&#39;</span><span class=p>,</span> <span class=s1>&#39;初八&#39;</span><span class=p>,</span> <span class=s1>&#39;初九&#39;</span><span class=p>,</span> <span class=s1>&#39;初十&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;十一&#39;</span><span class=p>,</span> <span class=s1>&#39;十二&#39;</span><span class=p>,</span> <span class=s1>&#39;十三&#39;</span><span class=p>,</span> <span class=s1>&#39;十四&#39;</span><span class=p>,</span> <span class=s1>&#39;十五&#39;</span><span class=p>,</span> <span class=s1>&#39;十六&#39;</span><span class=p>,</span> <span class=s1>&#39;十七&#39;</span><span class=p>,</span> <span class=s1>&#39;十八&#39;</span><span class=p>,</span> <span class=s1>&#39;十九&#39;</span><span class=p>,</span> <span class=s1>&#39;二十&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;廿一&#39;</span><span class=p>,</span> <span class=s1>&#39;廿二&#39;</span><span class=p>,</span> <span class=s1>&#39;廿三&#39;</span><span class=p>,</span> <span class=s1>&#39;廿四&#39;</span><span class=p>,</span> <span class=s1>&#39;廿五&#39;</span><span class=p>,</span> <span class=s1>&#39;廿六&#39;</span><span class=p>,</span> <span class=s1>&#39;廿七&#39;</span><span class=p>,</span> <span class=s1>&#39;廿八&#39;</span><span class=p>,</span> <span class=s1>&#39;廿九&#39;</span><span class=p>,</span> <span class=s1>&#39;三十&#39;</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://waite.wang/tags/vue/>Vue</a></li></ul><nav class=paginav><a class=prev href=https://waite.wang/posts/ai/vue-and-flask-to-do-a-basic-llm-result-and-render/><span class=title>« 上一页</span><br><span>Vue+Flask实现一个最基础的LLM请求响应以及渲染</span>
</a><a class=next href=https://waite.wang/posts/cocos/cocos-with-singleton-and-event-manager/><span class=title>下一页 »</span><br><span>单例模式以及事件管理器在 Cocos 中的应用</span></a></nav></footer><script src=https://utteranc.es/client.js repo=Waite0603/HugoBlog issue-term=pathname theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span><a href=https://beian.miit.gov.cn/ target=_blank rel="noopener noreferrer">粤ICP备2022028437号-1</a></span><br><span>Copyright &copy; 2018 - 2025 By <a href=https://waite.wang/>Waite</a>, All Rights
Reserved.</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script src=/js/jquery-3.5.1.min.js></script><link rel=stylesheet href=/css/jquery.fancybox.min.css><script src=/js/jquery.fancybox.min.js></script></body></html>