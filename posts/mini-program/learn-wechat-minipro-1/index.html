<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>微信小程序入门 | 隶笔难书</title>
<meta name=keywords content="Wechat Mini Program"><meta name=description content="微信小程序学习笔记"><meta name=author content="Waite Wang"><link rel=canonical href=https://waite.wang/posts/mini-program/learn-wechat-minipro-1/><link crossorigin=anonymous href=/assets/css/stylesheet.55a367dc6d933e003fb3fd16c9379f270dd169dcc4381f8e7524d92feb9add90.css integrity="sha256-VaNn3G2TPgA/s/0WyTefJw3RadzEOB+OdSTZL+ua3ZA=" rel="preload stylesheet" as=style><link rel=icon href=https://waite.wang/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://waite.wang/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://waite.wang/favicon-32x32.png><link rel=apple-touch-icon href=https://waite.wang/apple-touch-icon.png><link rel=mask-icon href=https://waite.wang/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://waite.wang/posts/mini-program/learn-wechat-minipro-1/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://waite.wang/posts/mini-program/learn-wechat-minipro-1/"><meta property="og:site_name" content="隶笔难书"><meta property="og:title" content="微信小程序入门"><meta property="og:description" content="微信小程序学习笔记"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-02T20:52:46+08:00"><meta property="article:modified_time" content="2023-03-02T20:52:46+08:00"><meta property="article:tag" content="Wechat Mini Program"><meta name=twitter:card content="summary"><meta name=twitter:title content="微信小程序入门"><meta name=twitter:description content="微信小程序学习笔记"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://waite.wang/posts/"},{"@type":"ListItem","position":2,"name":"微信小程序入门","item":"https://waite.wang/posts/mini-program/learn-wechat-minipro-1/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"微信小程序入门","name":"微信小程序入门","description":"微信小程序学习笔记","keywords":["Wechat Mini Program"],"articleBody":"微信小程序入门 微信小程序介绍 微信小程序介绍 ​ 微信小程序，简称小程序，是一种不需要下载安装即可使用的应用，它实现了应用”触手可及”的梦想，用户扫一扫或搜一下即可打开应用。\n​ 说明：\n小程序是需要下载的，小程序的占用大小很小，感觉不到下载 目前大小限制2M （最终开发的小程序打包压缩后的大小），如果超过2M,就得做分包上传.之后再合并 进入小程序后继续网络请求数据 小程序特点 微信小程序的特点：\n免安装 接近原生（IOS，Android ）的app操作基于微信开发。使用wx提供的api开发 必须在微信里面使用 小程序的优缺点 ==方便快捷，即用即走== ==速度快、不占内存== 安全稳定、保密性强 功能丰富，场景丰富 ==开发成本低、维护简便== ==开发周期比较短== 体验好 小程序开发需求 不注册可以开发小程序(不能发布) 注册小程序 企业注册(公司内部人员注册好了，给一个APPID) 个人注册 微信小程序的注册 微信公众平台： https://mp.weixin.qq.com/\n开发工具 开发工具下载地址： https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html\n开发者工具的使用 以下就是微信小程序开发工具的界面，主要有：微信小程序模拟器、项目目录、代码编写区域、控制台。\n项目目录结构介绍 pages目录 ​ pages目录下放的就是小程序中的各个页面。\n​ 在pages中创建页面的时候，会出现4个文件：\nxxx.js：页面相关的js代码可以写在这里 xxx.wxml：这个就是页面文件，相当于我们之前的HTML，所以页面结构内容写在这里 xxx.wxss：页面的样式内容，相当于之前的css，所以页面相关的样式可以写在这里 xxx.json：页面有关的配置，比如页面导航栏的背景色、内容等等 比如： app.js文件 ​ app.js文件是整个项目的一个==总体配置==。里面包含了项目运行==生命周期的回调函数==。\napp.json文件 ​ 小程序根目录下的 app.json 文件用来对微信小程序进行全局配置，决定页面文件的路径、窗口表现、设置网络超时时间、设置多 tab 等。\n小程序根目录下的 app.json 文件用来对微信小程序进行全局配置。文件内容为一个 JSON 对象，有以下属性：\nhttps://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html\napp.wxss文件 app.wxss 文件是微信小程序项目的==全局样式表==，它可以应用到所有的wxml文件中。 微信小程序中使用 rpx 作为长度单位。1rpx = 1/750 屏幕宽度。也就是屏幕宽度等于 750rpx。 px 也可以使用，表示的是设备独立像素。 建议使用长度单位 rpx。它自动做了适配。 project.config.json文件 ​ project.config.json文件是小程序项目的配置文件（如开发工具的外观配置），一般不需要修改，我们目前就改一个地方：\n\"checkSiteMap\":false 作用是==控制台不要有一些没用的警告==。\nSitemap.json https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html\n搜索功能文件，指定哪些页面可以被搜索，可被配置。是在搜索小程序的时候，指定哪些页面允许被搜索到。\n小程序配置项 全局配置 https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#entryPagePath\n小程序根目录下的 app.json 文件用来对微信小程序进行全局配置。文件内容为一个 JSON 对象，有以下属性：\n属性 类型 必填 描述 最低版本 entryPagePath string 否 小程序默认启动首页 pages string[] 是 页面路径列表 window Object 否 全局的默认窗口表现 tabBar Object 否 底部 tab 栏的表现 networkTimeout Object 否 网络超时时间 debug boolean 否 是否开启 debug 模式，默认关闭 functionalPages boolean 否 是否启用插件功能页，默认关闭 2.1.0 subpackages Object[] 否 分包结构配置 1.7.3 workers string 否 Worker 代码放置的目录 1.9.90 requiredBackgroundModes string[] 否 需要在后台使用的能力，如「音乐播放」 requiredPrivateInfos string[] 否 调用的地理位置相关隐私接口 plugins Object 否 使用到的插件 1.9.6 preloadRule Object 否 分包预下载规则 2.3.0 resizable boolean 否 PC 小程序是否支持用户任意改变窗口大小（包括最大化窗口）；iPad 小程序是否支持屏幕旋转。默认关闭 2.3.0 usingComponents Object 否 全局 自定义组件配置 开发者工具 1.02.1810190 permission Object 否 小程序接口权限相关设置 微信客户端 7.0.0 sitemapLocation string 是 指明 sitemap.json 的位置 style string 否 指定使用升级后的weui样式 2.8.0 useExtendedLib Object 否 指定需要引用的扩展库 2.2.1 entranceDeclare Object 否 微信消息用小程序打开 微信客户端 7.0.9 darkmode boolean 否 小程序支持 DarkMode 2.11.0 themeLocation string 否 指明 theme.json 的位置，darkmode为true为必填 开发者工具 1.03.2004271 lazyCodeLoading string 否 配置自定义组件代码按需注入 2.11.1 singlePage Object 否 单页模式相关配置 2.12.0 supportedMaterials Object 否 聊天素材小程序打开相关配置 2.14.3 serviceProviderTicket string 否 定制化型服务商票据 embeddedAppIdList string[] 否 半屏小程序 appId 2.20.1 halfPage Object 否 视频号直播半屏场景设置 2.18.0 debugOptions Object 否 调试相关配置 2.22.1 enablePassiveEvent Object或boolean 否 touch 事件监听是否为 passive 2.24.1 resolveAlias Object 否 自定义模块映射规则 renderer string 否 全局默认的渲染后端 2.30.4 rendererOptions Object 否 渲染后端选项 2.31.1 componentFramework string 否 组件框架，详见 相关文档 2.30.4 miniApp Object 否 多端模式场景接入身份管理服务时开启小程序授权页相关配置，详见 相关文档 static Object 否 正常情况下默认所有资源文件都被打包发布到所有平台，可以通过 static 字段配置特定每个目录/文件只能发布到特定的平台(多端场景) 相关文档 convertRpxToVw boolean 否 配置是否将 rpx 单位转换为 vw 单位，开启后能修复某些 rpx 下的精度问题 3.3.0 以下简单列举了一部分, 其他未列举可以在官方文档中查看\nentryPagePath 指定小程序的默认启动路径（首页），常见情景是从微信聊天列表页下拉启动、小程序列表启动等。如果不填，将默认为 pages 列表的第一项。不支持带页面路径参数。\npages 用于指定小程序由哪些页面组成，每一项都对应一个页面的 路径（含文件名） 信息。文件名不需要写文件后缀，框架会自动去寻找对应位置的 .json, .js, .wxml, .wxss 四个文件进行处理。\n未指定 entryPagePath 时，数组的第一项代表小程序的初始页面（首页）。\n小程序中新增/减少页面，都需要对 pages 数组进行修改。\n则需要在 app.json 中写\n{ \"pages\": [\"pages/index/index\", \"pages/logs/logs\"] } window 用于设置小程序的状态栏、导航条、标题、窗口背景色。\n属性 类型 默认值 描述 最低版本 navigationBarBackgroundColor HexColor #000000 导航栏背景颜色，如 #000000 navigationBarTextStyle string white 导航栏标题、状态栏颜色，仅支持 black / white navigationBarTitleText string 导航栏标题文字内容 navigationStyle string default 导航栏样式，仅支持以下值： default 默认样式 custom 自定义导航栏，只保留右上角胶囊按钮。参见注 2。 iOS/Android 微信客户端 6.6.0，Windows 微信客户端不支持 homeButton boolean default 在非首页、非页面栈最底层页面或非tabbar内页面中的导航栏展示home键 微信客户端 8.0.24 backgroundColor HexColor #ffffff 窗口的背景色 backgroundTextStyle string dark 下拉 loading 的样式，仅支持 dark / light backgroundColorTop string #ffffff 顶部窗口的背景色，仅 iOS 支持 微信客户端 6.5.16 backgroundColorBottom string #ffffff 底部窗口的背景色，仅 iOS 支持 微信客户端 6.5.16 enablePullDownRefresh boolean false 是否开启全局的下拉刷新。 详见 Page.onPullDownRefresh onReachBottomDistance number 50 页面上拉触底事件触发时距页面底部距离，单位为 px。 详见 Page.onReachBottom pageOrientation string portrait 屏幕旋转设置，支持 auto / portrait / landscape 详见 响应显示区域变化 2.4.0 (auto) / 2.5.0 (landscape) restartStrategy string homePage 重新启动策略配置 2.8.0 initialRenderingCache string 页面 初始渲染缓存配置，支持 static / dynamic 2.11.1 visualEffectInBackground string none 切入系统后台时，隐藏页面内容，保护用户隐私。支持 hidden / none 2.15.0 handleWebviewPreload string static 控制 预加载下个页面的时机。支持 static / manual / auto 2.15.0 如：\n{ \"window\": { \"navigationBarBackgroundColor\": \"#ffffff\", \"navigationBarTextStyle\": \"black\", \"navigationBarTitleText\": \"微信接口功能演示\", \"backgroundColor\": \"#eeeeee\", \"backgroundTextStyle\": \"light\" } } tabBar 如果小程序是一个多 tab 应用（客户端窗口的底部或顶部有 tab 栏可以切换页面），可以通过 tabBar 配置项指定 tab 栏的表现，以及 tab 切换时显示的对应页面。\n属性 类型 必填 默认值 描述 最低版本 color HexColor 是 tab 上的文字默认颜色，仅支持十六进制颜色 selectedColor HexColor 是 tab 上的文字选中时的颜色，仅支持十六进制颜色 backgroundColor HexColor 是 tab 的背景色，仅支持十六进制颜色 borderStyle string 否 black tabbar 上边框的颜色， 仅支持 black / white list Array 是 tab 的列表，详见 list 属性说明，最少 2 个、最多 5 个 tab position string 否 bottom tabBar 的位置，仅支持 bottom / top custom boolean 否 false 自定义 tabBar，见 详情 2.5.0 其中 list 接受一个数组，只能配置最少 2 个、最多 5 个 tab。tab 按数组的顺序排序，每个项都是一个对象，其属性值如下：\n属性 类型 必填 说明 pagePath string 是 页面路径，必须在 pages 中先定义 text string 是 tab 上按钮文字 iconPath string 否 图片路径，icon 大小限制为 40kb，建议尺寸为 81px * 81px，不支持网络图片。 当 position 为 top 时，不显示 icon。 selectedIconPath string 否 选中时的图片路径，icon 大小限制为 40kb，建议尺寸为 81px * 81px，不支持网络图片。 当 position 为 top 时，不显示 icon。 以下是一个简单示例\n\"tabBar\": { \"color\": \"#00A95E\", \"selectedColor\": \"#FA8072\", \"backgroundColor\": \"#f5f5f5\", \"borderStyle\": \"black\", \"list\": [ { \"pagePath\": \"pages/index/index\", \"text\": \"Index\", \"iconPath\": \"icon/_home.png\", \"selectedIconPath\": \"icon/home.png\" }, { \"pagePath\": \"pages/logs/logs\", \"text\": \"Logs\", \"iconPath\": \"icon/_search.png\", \"selectedIconPath\": \"icon/search.png\" }, { \"pagePath\": \"pages/demo/demo\", \"text\": \"Demo\", \"iconPath\": \"icon/_videocamera.png\", \"selectedIconPath\": \"icon/videocamera.png\" } ] } networkTimeout 各类网络请求的超时时间，单位均为毫秒。\n属性 类型 必填 默认值 说明 request number 否 60000 wx.request 的超时时间，单位：毫秒。 connectSocket number 否 60000 wx.connectSocket 的超时时间，单位：毫秒。 uploadFile number 否 60000 wx.uploadFile 的超时时间，单位：毫秒。 downloadFile number 否 60000 wx.downloadFile 的超时时间，单位：毫秒 debug 可以在开发者工具中开启 debug 模式，在开发者工具的控制台面板，调试信息以 info 的形式给出，其信息有 Page 的注册，页面路由，数据更新，事件触发等。可以帮助开发者快速定位一些常见的问题。\n页面配置 app.json 中的部分配置，也支持对单个页面进行配置，可以在页面对应的 .json 文件来对本页面的表现进行配置。\n页面中配置项在当前页面会覆盖 app.json 中相同的配置项（样式相关的配置项属于 app.json 中的 window 属性，但这里不需要额外指定 window 字段），具体的取值和含义可参考 全局配置文档中说明。\n文件内容为一个 JSON 对象，有以下属性：\n属性 类型 默认值 描述 最低版本 navigationBarBackgroundColor HexColor #000000 导航栏背景颜色，如 #000000 navigationBarTextStyle string white 导航栏标题、状态栏颜色，仅支持 black / white navigationBarTitleText string 导航栏标题文字内容 navigationStyle string default 导航栏样式，仅支持以下值： default 默认样式 custom 自定义导航栏，只保留右上角胶囊按钮。 iOS/Android 微信客户端 7.0.0，Windows 微信客户端不支持 homeButton boolean false 在非首页、非页面栈最底层页面或非tabbar内页面中的导航栏展示home键 微信客户端 8.0.24 backgroundColor HexColor #ffffff 窗口的背景色 backgroundColorContent HexColor #RRGGBBAA 页面容器背景色， 点击查看设置背景色详情 backgroundTextStyle string dark 下拉 loading 的样式，仅支持 dark / light backgroundColorTop string #ffffff 顶部窗口的背景色，仅 iOS 支持 微信客户端 6.5.16 backgroundColorBottom string #ffffff 底部窗口的背景色，仅 iOS 支持 微信客户端 6.5.16 enablePullDownRefresh boolean false 是否开启当前页面下拉刷新。 详见 Page.onPullDownRefresh onReachBottomDistance number 50 页面上拉触底事件触发时距页面底部距离，单位为px。 详见 Page.onReachBottom pageOrientation string portrait 屏幕旋转设置，支持 auto / portrait / landscape 详见 响应显示区域变化 2.4.0 (auto) / 2.5.0 (landscape) disableScroll boolean false 设置为 true 则页面整体不能上下滚动。 只在页面配置中有效，无法在 app.json 中设置 usingComponents Object 否 页面 自定义组件配置 1.6.3 initialRenderingCache string 页面 初始渲染缓存配置，支持 static / dynamic 2.11.1 style string default 启用新版的组件样式 2.10.2 singlePage Object 否 单页模式相关配置 2.12.0 restartStrategy string homePage 重新启动策略配置 2.8.0 handleWebviewPreload string static 控制 预加载下个页面的时机。支持 static / manual / auto 2.15.0 visualEffectInBackground string 否 切入系统后台时，隐藏页面内容，保护用户隐私。支持 hidden / none，若对页面单独设置则会覆盖全局的配置，详见 全局配置 2.15.0 enablePassiveEvent Object或boolean 否 事件监听是否为 passive，若对页面单独设置则会覆盖全局的配置，详见 全局配置 2.24.1 renderer string 否 渲染后端 2.30.4 rendererOptions Object 否 渲染后端选项，详情 相关文档 3.1.0 componentFramework string 否 组件框架，详情 相关文档 2.30.4 注：并不是所有 app.json 中的配置都可以在页面覆盖或单独指定，仅限于本文档包含的选项。 注：iOS/Android 客户端 7.0.0 以下版本，navigationStyle 只在 app.json 中生效。 WXSS WXSS (WeiXin Style Sheets)是一套样式语言，用于描述 WXML 的组件样式。\nWXSS 用来决定 WXML 的组件应该怎么显示。\n为了适应广大的前端开发者，WXSS 具有 CSS 大部分特性。同时为了更适合开发微信小程序，WXSS 对 CSS 进行了扩充以及修改。\n与 CSS 相比，WXSS 扩展的特性有：\n尺寸单位 样式导入 尺寸单位 rpx（responsive pixel）: 可以根据屏幕宽度进行自适应。规定屏幕宽为750rpx。如在 iPhone6 上，屏幕宽度为375px，共有750个物理像素，则750rpx = 375px = 750物理像素，1rpx = 0.5px = 1物理像素。 设备 rpx换算px (屏幕宽度/750) px换算rpx (750/屏幕宽度) iPhone5 1rpx = 0.42px 1px = 2.34rpx iPhone6 1rpx = 0.5px 1px = 2rpx iPhone6 Plus 1rpx = 0.552px 1px = 1.81rpx 建议： 开发微信小程序时设计师可以用 iPhone6 作为视觉稿的标准。\n注意： 在较小的屏幕上不可避免的会有一些毛刺，请在开发时尽量避免这种情况。\n样式导入 使用@import语句可以导入外联样式表，@import后跟需要导入的外联样式表的相对路径，用;表示语句结束。\n示例代码：\n/** common.wxss **/ .small-p { padding:5px; } /** app.wxss **/ @import \"common.wxss\"; .middle-p { padding:15px; } 内联样式 框架组件上支持使用 style、class 属性来控制组件的样式。\nstyle：静态的样式统一写到 class 中。style 接收动态的样式，在运行时会进行解析，请尽量避免将静态的样式写进 style 中，以免影响渲染速度。 \u003cview style=\"color:{{color}};\" /\u003e class：用于指定样式规则，其属性值是样式规则中类选择器名(样式类名)的集合，样式类名不需要带上.，样式类名之间用空格分隔。 \u003cview class=\"normal_view\" /\u003e 选择器 目前支持的选择器有：\n选择器 样例 样例描述 .class .intro 选择所有拥有 class=“intro” 的组件 #id #firstname 选择拥有 id=“firstname” 的组件 element view 选择所有 view 组件 element, element view, checkbox 选择所有文档的 view 组件和所有的 checkbox 组件 ::after view::after 在 view 组件后边插入内容 ::before view::before 在 view 组件前边插入内容 全局样式与局部样式 定义在 app.wxss 中的样式为全局样式，作用于每一个页面。在 page 的 wxss 文件中定义的样式为局部样式，只作用在对应的页面，并会覆盖 app.wxss 中相同的选择器。\n组件 https://developers.weixin.qq.com/miniprogram/dev/component/\nhtml 中有 div、span、ul、li 、img, 而小程序上面所有的标签都没有，只有组件, 微信小程序中的组件就相当于之前HTML中的标签。但是小程序中的组件除了包裹功能，还具有样式和 js 功能。\n以下会介绍一些常用的标签, 剩下的可以在官方文档中查看\n视图/基础组件 View ​ 视图容器，view组件就相当于之前HTML中的div标签。\n属性 类型 默认值 必填 说明 最低版本 hover-class string none 否 指定按下去的样式类。当 hover-class=\"none\" 时，没有点击态效果 1.0.0 hover-stop-propagation boolean false 否 指定是否阻止本节点的祖先节点出现点击态 1.5.0 hover-start-time number 50 否 按住后多久出现点击态，单位毫秒 1.0.0 hover-stay-time number 400 否 手指松开后点击态保留时间，单位毫秒 1.0.0 \u003cview class=\"wrapper\" hover-class=\"wrapper-hover\" hover-stay-time=\"1000\"\u003e我的第一个微信程序\u003c/view\u003e .wrapper{ width: 100%; height: 100rpx; text-align: center; line-height: 100rpx; background-color: skyblue; } .wrapper-hover { background-color: pink; } 以下是一个 Flex 布局的例子\n\u003cview class=\"container\"\u003e \u003cview class=\"page-body\"\u003e \u003cview class=\"page-section\"\u003e \u003cview class=\"page-section-title\"\u003e \u003ctext\u003eflex-direction: row\u003c/text\u003e \u003ctext\u003e横向布局\u003c/text\u003e \u003c/view\u003e \u003cview class=\"page-section-spacing\"\u003e \u003cview class=\"flex-wrp\" style=\"flex-direction:row;\"\u003e \u003cview class=\"flex-item demo-text-1\"\u003e\u003c/view\u003e \u003cview class=\"flex-item demo-text-2\"\u003e\u003c/view\u003e \u003cview class=\"flex-item demo-text-3\"\u003e\u003c/view\u003e \u003c/view\u003e \u003c/view\u003e \u003c/view\u003e \u003cview class=\"page-section\"\u003e \u003cview class=\"page-section-title\"\u003e \u003ctext\u003eflex-direction: column\u003c/text\u003e \u003ctext\u003e纵向布局\u003c/text\u003e \u003c/view\u003e \u003cview class=\"flex-wrp\" style=\"flex-direction:column;\"\u003e \u003cview class=\"flex-item flex-item-V demo-text-1\"\u003e\u003c/view\u003e \u003cview class=\"flex-item flex-item-V demo-text-2\"\u003e\u003c/view\u003e \u003cview class=\"flex-item flex-item-V demo-text-3\"\u003e\u003c/view\u003e \u003c/view\u003e \u003c/view\u003e \u003c/view\u003e \u003c/view\u003e .container { margin-top: 80px; } .flex-wrp { display: flex; } .flex-item { width: 200rpx; height: 300rpx; font-size: 26rpx; } .flex-item-V { margin: 0 auto; width: 300rpx; height: 200rpx; } .page-section-title text { line-height: 36px; } .demo-text-1 { position: relative; align-items: center; justify-content: center; background-color: #1AAD19; color: #FFFFFF; font-size: 36rpx; } .demo-text-1:before { content: 'A'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); } .demo-text-2 { position: relative; align-items: center; justify-content: center; background-color: #2782D7; color: #FFFFFF; font-size: 36rpx; } .demo-text-2:before { content: 'B'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); } .demo-text-3 { position: relative; align-items: center; justify-content: center; background-color: #F1F1F1; color: #353535; font-size: 36rpx; } .demo-text-3:before { content: 'C'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); } text ​ 文本组件，相当于HTML中的span标签。\n\u003ctext\u003e啦啦啦啦\u003c/text\u003e swiper https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html#%E6%B8%B2%E6%9F%93%E6%A8%A1%E5%BC%8F%E6%95%88%E6%9E%9C%E6%BC%94%E7%A4%BA\n滑块视图容器。其中只可放置swiper-item组件，否则会导致未定义的行为。也就是说swiper内部只能放swiper-item组件，而swiper-item组件中就可以随便放其它组件及内容了。\n\u003cswiper class=\"banner\"\u003e \u003cswiper-item\u003eitem1\u003c/swiper-item\u003e \u003cswiper-item\u003eitem2\u003c/swiper-item\u003e \u003cswiper-item\u003eitem3\u003c/swiper-item\u003e \u003c/swiper\u003e .banner{ height: 80rpx; text-align: center; line-height: 80rpx; } 可以看到swiper组件有轮播图的效果。而且它有默认的高度(150px)。\n属性 类型 默认值 必填 说明 最低版本 indicator-dots boolean false 否 是否显示面板指示点 1.0.0 indicator-color color rgba(0, 0, 0, .3) 否 指示点颜色 1.1.0 indicator-active-color color #000000 否 当前选中的指示点颜色 1.1.0 autoplay boolean false 否 是否自动切换 1.0.0 current number 0 否 当前所在滑块的 index 1.0.0 interval number 5000 否 自动切换时间间隔 1.0.0 duration number 500 否 滑动动画时长 1.0.0 circular boolean false 否 是否采用衔接滑动 1.0.0 vertical boolean false 否 滑动方向是否为纵向 1.0.0 display-multiple-items number 1 否 同时显示的滑块数量 1.9.0 previous-margin string “0px” 否 前边距，可用于露出前一项的一小部分，接受 px 和 rpx 值 1.9.0 以下是一个简单的轮播图效果\nconst food = [ 'https://img1.baidu.com/it/u=3033226715,2238019049\u0026fm=253\u0026fmt=auto\u0026app=138\u0026f=JPEG?w=800\u0026h=500', 'https://img1.baidu.com/it/u=1948650034,2409824853\u0026fm=253\u0026fmt=auto\u0026app=120\u0026f=JPEG?w=1200\u0026h=675', 'https://img2.baidu.com/it/u=3016274568,4110305242\u0026fm=253\u0026fmt=auto\u0026app=138\u0026f=JPEG?w=500\u0026h=313', 'https://img2.baidu.com/it/u=2364493189,83457107\u0026fm=253\u0026fmt=auto\u0026app=138\u0026f=JPEG?w=800\u0026h=500' ] Page({ data: { food }, }) \u003cview style=\"height: 400rpx;\"\u003e \u003cswiper class=\"banner\" indicator-dots\u003e \u003cswiper-item wx:for=\"{{food}}\" wx:key=\"*this\"\u003e \u003cimage class=\"img\" src=\"{{item}}\" mode=\"aspectFill\" /\u003e \u003c/swiper-item\u003e \u003c/swiper\u003e \u003c/view\u003e .banner { height: 100%; width: 100%; text-align: center; line-height: 80rpx; } 当然, 在 Skyline 渲染模式下, 他也会有不同的表现, 具体可以看\nhttps://developers.weixin.qq.com/miniprogram/dev/component/swiper.html#%E6%8C%87%E7%A4%BA%E5%99%A8%E6%95%88%E6%9E%9C%E6%BC%94%E7%A4%BA\nscroll-view https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html\n可滚动视图区域。使用竖向滚动时，需要给 scroll-view一个固定高度，通过 WXSS 设置 height。组件属性的长度单位默认为px， 2.4.0起支持传入单位(rpx/px)。\n横向滚动需打开 enable-flex 以兼容 WebView，如 滚动条的长度是预估的，若直接子节点的高度差别较大，则滚动条长度可能会不准确 使用 worklet 函数需要开启开发者工具 “将 JS 编译成 ES5” 或 “编译 worklet 函数” 选项。 以下我会给出 纵向滚动 以及 横向滚动 两个效果, 具体属性可以在官方文档中查看\n\u003cview class=\"container\"\u003e \u003cview class=\"page-body\"\u003e \u003cview class=\"page-section\"\u003e \u003cview class=\"page-section-title\"\u003e \u003ctext\u003eVertical Scroll\u003c/text\u003e \u003ctext\u003e纵向滚动\u003c/text\u003e \u003c/view\u003e \u003cview class=\"page-section-spacing\"\u003e \u003cscroll-view type=\"list\" scroll-y=\"true\" style=\"height: 300rpx;\"\u003e \u003cview id=\"demo1\" class=\"scroll-view-item demo-text-1\"\u003e\u003c/view\u003e \u003cview id=\"demo2\" class=\"scroll-view-item demo-text-2\"\u003e\u003c/view\u003e \u003cview id=\"demo3\" class=\"scroll-view-item demo-text-3\"\u003e\u003c/view\u003e \u003c/scroll-view\u003e \u003c/view\u003e \u003c/view\u003e \u003cview class=\"page-section\"\u003e \u003cview class=\"page-section-title\"\u003e \u003ctext\u003eHorizontal Scroll\u003c/text\u003e \u003ctext\u003e横向滚动\u003c/text\u003e \u003c/view\u003e \u003cview class=\"page-section-spacing\"\u003e \u003cscroll-view type=\"list\" class=\"scroll-view_H\" scroll-x=\"true\" bindscroll=\"scroll\" style=\"width: 100%;height: 300rpx;\"\u003e \u003cview id=\"demo1\" class=\"scroll-view-item_H demo-text-1\"\u003e\u003c/view\u003e \u003cview id=\"demo2\" class=\"scroll-view-item_H demo-text-2\"\u003e\u003c/view\u003e \u003cview id=\"demo3\" class=\"scroll-view-item_H demo-text-3\"\u003e\u003c/view\u003e \u003c/scroll-view\u003e \u003c/view\u003e \u003c/view\u003e \u003c/view\u003e \u003c/view\u003e Page({ tapMove() { this.setData({ scrollTop: this.data.scrollTop + 10 }) } }) .container { margin-top: 80px; } .page-section-spacing { margin-top: 60rpx; } .scroll-view_H { white-space: nowrap; } .scroll-view-item { height: 300rpx; } .scroll-view-item_H { display: inline-block; width: 100%; height: 300rpx; } .demo-text-1 { position: relative; align-items: center; justify-content: center; background-color: #1AAD19; color: #FFFFFF; font-size: 36rpx; } .demo-text-1::before { content: 'A'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); } .demo-text-2 { position: relative; align-items: center; justify-content: center; background-color: #2782D7; color: #FFFFFF; font-size: 36rpx; } .demo-text-2::before { content: 'B'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); } .demo-text-3 { position: relative; align-items: center; justify-content: center; background-color: #F1F1F1; color: #353535; font-size: 36rpx; } .demo-text-3::before { content: 'C'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); } https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html#scroll-view-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E7%A4%BA%E4%BE%8B\n以下是横向滚动案例\n\u003cscroll-view class=\"myScroll\" scroll-x\u003e \u003cview class=\"myScroll.row\"\u003e1\u003c/view\u003e \u003cview class=\"row\"\u003e2\u003c/view\u003e \u003cview class=\"row\"\u003e3\u003c/view\u003e \u003cview class=\"row\"\u003e4\u003c/view\u003e \u003cview class=\"row\"\u003e5\u003c/view\u003e \u003cview class=\"row\"\u003e6\u003c/view\u003e \u003cview class=\"row\"\u003e7\u003c/view\u003e \u003cview class=\"row\"\u003e8\u003c/view\u003e \u003c/scroll-view\u003e .myScroll { width: 100%; height: 220rpx; background: #eee; /* 使文本在不换行的情况下继续显示 */ white-space: nowrap; } .myScroll .row { width: 220rpx; height: 220rpx; background: burlywood; margin-right: 20rpx; display: inline-block; } .myScroll .row:last-child { margin-right: 0; } icon ​ icon组件就是在页面可以显示一个图标。\n\u003cicon type=\"success\"\u003e\u003c/icon\u003e \u003cicon type=\"success\" size=\"50\"\u003e\u003c/icon\u003e \u003cicon type=\"warn\"\u003e\u003c/icon\u003e 属性 类型 默认值 必填 说明 最低版本 type string 是 icon的类型，有效值：success, success_no_circle, info, warn, waiting, cancel, download, search, clear 1.0.0 size number/string 23 否 icon的大小，单位默认为px， 2.4.0起支持传入单位(rpx/px)， 2.21.3起支持传入其余单位(rem 等)。 1.0.0 color string 否 icon的颜色，同css的color 1.0.0 progress 进度条 进度条。组件属性的长度单位默认为px， 2.4.0起支持传入单位(rpx/px)。\n属性 类型 默认值 必填 说明 最低版本 percent number 否 百分比0~100 1.0.0 show-info boolean false 否 在进度条右侧显示百分比 1.0.0 border-radius number/string 0 否 圆角大小 2.3.1 font-size number/string 16 否 右侧百分比字体大小 2.3.1 stroke-width number/string 6 否 进度条线的宽度 1.0.0 color string #09BB07 否 进度条颜色（请使用activeColor） 1.0.0 activeColor string #09BB07 否 已选择的进度条的颜色 1.0.0 backgroundColor string #EBEBEB 否 未选择的进度条的颜色 1.0.0 active boolean false 否 进度条从左往右的动画 1.0.0 active-mode string backwards 否 backwards: 动画从头播；forwards：动画从上次结束点接着播 1.7.0 duration number 30 否 进度增加1%所需毫秒数 2.8.2 bindactiveend eventhandle 否 动画完成事件 2.4.1 \u003cprogress percent=\"20\" show-info /\u003e \u003cprogress percent=\"40\" stroke-width=\"12\" /\u003e \u003cprogress percent=\"60\" color=\"pink\" /\u003e \u003cprogress percent=\"80\" active /\u003e 表单组件 具体可以在官方文档查看\nButton https://developers.weixin.qq.com/miniprogram/dev/component/button.html\n具体属性看官方文档, 可以通过 open-type 配置分享, 打开交流窗口等等功能\n\u003cbutton size=\"default\"\u003e按钮1\u003c/button\u003e \u003cbutton size=\"mini\"\u003e按钮2\u003c/button\u003e \u003cbutton size=\"mini\" type=\"primary\"\u003e按钮3\u003c/button\u003e \u003cbutton size=\"mini\" type=\"warn\"\u003e按钮3\u003c/button\u003e \u003cbutton size=\"mini\" type=\"primary\" open-type=\"share\"\u003e按钮4\u003c/button\u003e 导航组件 navigator https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html\nnavigator组件相当于HTML的超链接标签。\n\u003cnavigator target=\"self\" url=\"../about/about\" open-type=\"switchTab\"\u003e点我跳转\u003c/navigator\u003e \u003cnavigator url=\"../detail/detail\"\u003e进入详情页\u003c/navigator\u003e \u003cnavigator url=\"../detail/detail\" open-type=\"redirect\"\u003eredirect 进入详情页\u003c/navigator\u003e \u003cnavigator url=\"../index/index\" open-type=\"switchTab\"\u003e跳转到首页\u003c/navigator\u003e \u003cnavigator url=\"../detail/detail\" open-type=\"reLaunch\"\u003ereLaunch 到详情页\u003c/navigator\u003e \u003cnavigator open-type=\"exit\" target=\"miniProgram\"\u003e退出小程序\u003c/navigator\u003e 媒体组件 image https://developers.weixin.qq.com/miniprogram/dev/component/image.html\n为了保证大小, 可以使用裁剪或者缩放调整大小\n属性 类型 默认值 必填 说明 最低版本 show-menu-by-longpress boolean false 否 长按图片显示发送给朋友、收藏、保存图片、搜一搜、打开名片/前往群聊/打开小程序（若图片中包含对应二维码或小程序码）的菜单。 2.7.0 mode string scaleToFill 否 图片裁剪、缩放的模式 1.0.0 合法值 说明 最低版本 scaleToFill 缩放模式，不保持纵横比缩放图片，使图片的宽高完全拉伸至填满 image 元素 aspectFit 缩放模式，保持纵横比缩放图片，使图片的长边能完全显示出来。也就是说，可以完整地将图片显示出来。 aspectFill 缩放模式，保持纵横比缩放图片，只保证图片的短边能完全显示出来。也就是说，图片通常只在水平或垂直方向是完整的，另一个方向将会发生截取。 widthFix 缩放模式，宽度不变，高度自动变化，保持原图宽高比不变 heightFix 缩放模式，高度不变，宽度自动变化，保持原图宽高比不变 2.10.3 top 裁剪模式，不缩放图片，只显示图片的顶部区域。仅 Webview 支持。 bottom 裁剪模式，不缩放图片，只显示图片的底部区域。仅 Webview 支持。 center 裁剪模式，不缩放图片，只显示图片的中间区域。仅 Webview 支持。 left 裁剪模式，不缩放图片，只显示图片的左边区域。仅 Webview 支持。 right 裁剪模式，不缩放图片，只显示图片的右边区域。仅 Webview 支持。 top left 裁剪模式，不缩放图片，只显示图片的左上边区域。仅 Webview 支持。 top right 裁剪模式，不缩放图片，只显示图片的右上边区域。仅 Webview 支持。 bottom left 裁剪模式，不缩放图片，只显示图片的左下边区域。仅 Webview 支持。 bottom right 裁剪模式，不缩放图片，只显示图片的右下边区域。仅 Webview 支持。 可以在 https://developers.weixin.qq.com/miniprogram/dev/component/image.html#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81 查看示例代码\n地图组件 https://developers.weixin.qq.com/miniprogram/dev/component/map.html\n\u003cmap longitude=\"115\" latitude=\"39\"\u003e\u003c/map\u003e 框架 ​ 小程序依赖于微信客户端提供的环境–宿主环境，小程序借助这个宿注环境提供的功能，可以实现网页无法实现的功能。让小程序更接近原生的app体验。\n小程序开发框架的目标是通过尽可能简单、高效的方式让开发者可以在微信中开发具有原生 APP 体验的服务。\n​ 首先，我们来简单了解下小程序的运行环境。整个小程序框架系统分为两部分： 逻辑层（App Service）和 视图层（View）。小程序提供了自己的视图层描述语言 WXML 和 WXSS，以及基于 JavaScript 的逻辑层框架，并在视图层与逻辑层间提供了数据传输和事件系统，让开发者能够专注于数据与逻辑。\n​ 小程序的渲染层和逻辑层分别由2个线程管理：渲染层的界面使用了WebView 进行渲染；逻辑层采用JsCore线程运行JS脚本。一个小程序存在多个界面，所以渲染层存在多个WebView线程，这两个线程的通信会经由微信客户端（下文中也会采用Native来代指微信客户端）做中转，逻辑层发送网络请求也经由Native转发，小程序的通信模型下图所示。\n响应的数据绑定 框架的核心是一个响应的数据绑定系统，可以让数据与视图非常简单地保持同步。当做数据修改的时候，只需要在逻辑层修改数据，视图层就会做相应的更新。\n\u003cview\u003e Hello {{name}}! \u003c/view\u003e \u003cbutton bindtap=\"changeName\"\u003e Click me! \u003c/button\u003e // This is our App Service. // This is our data. var helloData = { name: 'Weixin' } // Register a Page. Page({ data: helloData, changeName: function(e) { // sent data change to view this.setData({ name: 'MINA' }) } }) 开发者通过框架将逻辑层数据中的 name 与视图层的 name 进行了绑定，所以在页面一打开的时候会显示 Hello Weixin!； 当点击按钮的时候，视图层会发送 changeName 的事件给逻辑层，逻辑层找到并执行对应的事件处理函数； 回调函数触发后，逻辑层执行 setData 的操作，将 data 中的 name 从 Weixin 变为 MINA，因为该数据和视图层已经绑定了，从而视图层会自动改变为 Hello MINA!。 逻辑层 小程序开发框架的逻辑层使用 JavaScript 引擎为小程序提供开发 JavaScript 代码的运行环境以及微信小程序的特有功能。\n逻辑层将数据进行处理后发送给视图层，同时接受视图层的事件反馈。\n开发者写的所有代码最终将会打包成一份 JavaScript 文件，并在小程序启动的时候运行，直到小程序销毁。这一行为类似 ServiceWorker，所以逻辑层也称之为 App Service。\n在 JavaScript 的基础上，我们增加了一些功能，以方便小程序的开发：\n增加 App 和 Page 方法，进行 程序注册和 页面注册。 增加 getApp 和 getCurrentPages 方法，分别用来获取 App 实例和当前页面栈。 提供丰富的 API，如微信用户数据，扫一扫，支付等微信特有能力。 提供 模块化能力，每个页面有独立的 作用域。 注意：小程序框架的逻辑层并非运行在浏览器中，因此 JavaScript 在 web 中一些能力都无法使用，如 window，document 等。\n注册小程序 每个小程序都需要在 app.js 中调用 App 方法注册小程序实例，绑定生命周期回调函数、错误监听和页面不存在监听函数等。\n// app.js App({ onLaunch (options) { // Do something initial when launch. }, onShow (options) { // Do something when show. }, onHide () { // Do something when hide. }, onError (msg) { console.log(msg) }, globalData: 'I am global data' } 属性 类型 默认值 必填 说明 最低版本 onLaunch function 否 生命周期回调——监听小程序初始化。 onShow function 否 生命周期回调——监听小程序启动或切前台。 onHide function 否 生命周期回调——监听小程序切后台。 onError function 否 错误监听函数。 onPageNotFound function 否 页面不存在监听函数。 1.9.90 onUnhandledRejection function 否 未处理的 Promise 拒绝事件监听函数。 2.10.0 onThemeChange function 否 监听系统主题变化 2.11.0 其他 any 否 开发者可以添加任意的函数或数据变量到 Object 参数中，用 this 可以访问 整个小程序只有一个 App 实例，是全部页面共享的。开发者可以通过 getApp 方法获取到全局唯一的 App 实例，获取App上的数据或调用开发者注册在 App 上的函数。\n// xxx.js const appInstance = getApp() console.log(appInstance.globalData) // I am global data 注册页面 对于小程序中的每个页面，都需要在页面对应的 js 文件中进行注册，指定页面的初始数据、生命周期回调、事件处理函数等。\n使用 Page 构造器注册页 简单的页面可以使用 Page() 进行构造。\n代码示例：\n//index.js Page({ data: { text: \"This is page data.\" }, onLoad: function(options) { // 页面创建时执行 }, onShow: function() { // 页面出现在前台时执行 }, onReady: function() { // 页面首次渲染完毕时执行 }, onHide: function() { // 页面从前台变为后台时执行 }, onUnload: function() { // 页面销毁时执行 }, onPullDownRefresh: function() { // 触发下拉刷新时执行 }, onReachBottom: function() { // 页面触底时执行 }, onShareAppMessage: function () { // 页面被用户分享时执行 }, onPageScroll: function() { // 页面滚动时执行 }, onResize: function() { // 页面尺寸变化时执行 }, onTabItemTap(item) { // tab 点击时执行 console.log(item.index) console.log(item.pagePath) console.log(item.text) }, // 事件响应函数 viewTap: function() { this.setData({ text: 'Set some data for updating view.' }, function() { // this is setData callback }) }, // 自由数据 customData: { hi: 'MINA' } }) 详细的参数含义和使用请参考 Page 参考文档\n页面生命周期 模块化 可以将一些公共的代码抽离成为一个单独的 js 文件，作为一个模块。模块只有通过 module.exports 或者 exports 才能对外暴露接口。\n注意：\nexports 是 module.exports 的一个引用，因此在模块里边随意更改 exports 的指向会造成未知的错误。所以更推荐开发者采用 module.exports 来暴露模块接口，除非你已经清晰知道这两者的关系。 小程序目前不支持直接引入 node_modules , 开发者需要使用到 node_modules 时候建议拷贝出相关的代码到小程序的目录中，或者使用小程序支持的 npm 功能。 // common.js function sayHello(name) { console.log(`Hello ${name} !`) } function sayGoodbye(name) { console.log(`Goodbye ${name} !`) } module.exports.sayHello = sayHello exports.sayGoodbye = sayGoodbye 在需要使用这些模块的文件中，使用 require 将公共代码引入\nvar common = require('common.js') Page({ helloMINA: function() { common.sayHello('MINA') }, goodbyeMINA: function() { common.sayGoodbye('MINA') } }) 文件作用域 在 JavaScript 文件中声明的变量和函数只在该文件中有效；不同的文件中可以声明相同名字的变量和函数，不会互相影响。\n通过全局函数 getApp 可以获取全局的应用实例，如果需要全局的数据可以在 App() 中设置，如：\n// app.js App({ globalData: 1 }) // a.js // The localValue can only be used in file a.js. var localValue = 'a' // Get the app instance. var app = getApp() // Get the global data and change it. app.globalData++ // b.js // You can redefine localValue in file b.js, without interference with the localValue in a.js. var localValue = 'b' // If a.js it run before b.js, now the globalData shoule be 2. console.log(getApp().globalData) API 详细见 https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/api.html#API\n视图层 WXML 数据绑定 \u003cview\u003e {{message}} \u003c/view\u003e // page.js Page({ data: { message: 'Hello MINA!' } }) 列表渲染 \u003cview wx:for=\"{{array}}\"\u003e {{item}} \u003c/view\u003e // page.js Page({ data: { array: [1, 2, 3, 4, 5] } }) 条件渲染 \u003cview wx:if=\"{{view == 'WEBVIEW'}}\"\u003e WEBVIEW \u003c/view\u003e \u003cview wx:elif=\"{{view == 'APP'}}\"\u003e APP \u003c/view\u003e \u003cview wx:else=\"{{view == 'MINA'}}\"\u003e MINA \u003c/view\u003e // page.js Page({ data: { view: 'MINA' } }) 模板 \u003ctemplate name=\"staffName\"\u003e \u003cview\u003e FirstName: {{firstName}}, LastName: {{lastName}} \u003c/view\u003e \u003c/template\u003e \u003ctemplate is=\"staffName\" data=\"{{...staffA}}\"\u003e\u003c/template\u003e \u003ctemplate is=\"staffName\" data=\"{{...staffB}}\"\u003e\u003c/template\u003e \u003ctemplate is=\"staffName\" data=\"{{...staffC}}\"\u003e\u003c/template\u003e // page.js Page({ data: { staffA: {firstName: 'Hulk', lastName: 'Hu'}, staffB: {firstName: 'Shang', lastName: 'You'}, staffC: {firstName: 'Gideon', lastName: 'Lin'} } }) 三目运算符 //是否加样式 data: { flag: false, }, // Register a Page. Page({ data: helloData, changeName: function (e) { // sent data change to view console.log(this.data) this.data.name = this.data.name === 'Weixin' ? 'xxx' : 'Weixin' this.setData({ name: this.data.name }) } }) 具体的能力以及使用方式在以下章节查看：\n数据绑定、 列表渲染、 条件渲染、 模板、 引用\nWXS WXS（WeiXin Script）是内联在 WXML 中的脚本段。通过 WXS 可以在模版中内联少量处理脚本，丰富模板的数据预处理能力。另外， WXS 还可以用来编写简单的 WXS 事件响应函数。\n从语法上看， WXS 类似于有少量限制的 JavaScript 。要完整了解 WXS 语法，请参考 WXS 语法参考。\n以下是一些使用 WXS 的简单示例。\n页面渲染 \u003cwxs module=\"m1\"\u003e var msg = \"hello world\"; module.exports.message = msg; \u003c/wxs\u003e \u003cview\u003e {{m1.message}} \u003c/view\u003e 数据处理 // page.js Page({ data: { array: [1, 2, 3, 4, 5, 1, 2, 3, 4] } }) \u003cwxs module=\"m1\"\u003e var getMax = function(array) { var max = undefined; for (var i = 0; i \u003c array.length; ++i) { max = max === undefined ? array[i] : (max \u003e= array[i] ? max : array[i]); } return max; } module.exports.getMax = getMax; \u003c/wxs\u003e \u003cview\u003e {{m1.getMax(array)}} \u003c/view\u003e 简易双向绑定 在 WXML 中，普通的属性的绑定是单向的。例如：\n\u003cinput value=\"{{value}}\" /\u003e 如果使用 this.setData({ value: 'leaf' }) 来更新 value ，this.data.value 和输入框的中显示的值都会被更新为 leaf ；但如果用户修改了输入框里的值，却不会同时改变 this.data.value 。\n如果需要在用户输入的同时改变 this.data.value ，需要借助简易双向绑定机制。此时，可以在对应项目之前加入 model: 前缀：\n如果使用 this.setData({ value: 'leaf' }) 来更新 value ，this.data.value 和输入框的中显示的值都会被更新为 leaf ；但如果用户修改了输入框里的值，却不会同时改变 this.data.value 。\n如果需要在用户输入的同时改变 this.data.value ，需要借助简易双向绑定机制。此时，可以在对应项目之前加入 model: 前缀：\n\u003cinput model:value=\"{{value}}\" /\u003e 这样，如果输入框的值被改变了， this.data.value 也会同时改变。同时， WXML 中所有绑定了 value 的位置也会被一同更新， 数据监听器 也会被正常触发。\n在开发者工具中预览效果\n用于双向绑定的表达式有如下限制：\n只能是一个单一字段的绑定，如 \u003cinput model:value=\"值为 {{value}}\" /\u003e \u003cinput model:value=\"{{ a + b }}\" /\u003e 都是非法的；\n目前，尚不能 data 路径，如 \u003cinput model:value=\"{{ a.b }}\" /\u003e 这样的表达式目前暂不支持。\n关于微信小程序警告“Do not have handler in component: pages/xxx/xxx. “的解决方法\n通过资料查询和微信开发者社区询问，原因是没有绑定bindinput方法，因此我们可以为表单绑定一个空的方法，来解决这个警告\n\u003cinput model:value=\"{{name}}\" bindinput=\"textCallback\"/\u003e Page({ data: helloData, changeName: function (e) { // sent data change to view console.log(this.data) this.data.name = this.data.name === 'Weixin' ? 'xxx' : 'Weixin' this.setData({ name: this.data.name }) }, textCallback: function () {} }) 在自定义组件中传递双向绑定 双向绑定同样可以使用在自定义组件上。如下的自定义组件：\n// custom-component.js Component({ properties: { myValue: String } }) \u003cinput model:value=\"{{myValue}}\" /\u003e 这个自定义组件将自身的 myValue 属性双向绑定到了组件内输入框的 value 属性上。这样，如果页面这样使用这个组件：\n\u003ccustom-component model:my-value=\"{{pageValue}}\" /\u003e 当输入框的值变更时，自定义组件的 myValue 属性会同时变更，这样，页面的 this.data.pageValue 也会同时变更，页面 WXML 中所有绑定了 pageValue 的位置也会被一同更新。\n在自定义组件中触发双向绑定更新 自定义组件还可以自己触发双向绑定更新，做法就是：使用 setData 设置自身的属性。例如：\n// custom-component.js Component({ properties: { myValue: String }, methods: { update: function() { // 更新 myValue this.setData({ myValue: 'leaf' }) } } }) 如果页面这样使用这个组件：\n\u003ccustom-component model:my-value=\"{{pageValue}}\" /\u003e 当组件使用 setData 更新 myValue 时，页面的 this.data.pageValue 也会同时变更，页面 WXML 中所有绑定了 pageValue 的位置也会被一同更新。\n响应显示区域变化 具体看 https://developers.weixin.qq.com/miniprogram/dev/framework/view/resizable.html\n从小程序基础库版本 2.4.0 开始，小程序在手机上支持屏幕旋转。使小程序中的页面支持屏幕旋转的方法是：在 app.json 的 window 段中设置 \"pageOrientation\": \"auto\" ，或在页面 json 文件中配置 \"pageOrientation\": \"auto\" 。\n以下是在单个页面 json 文件中启用屏幕旋转的示例。\n代码示例：\n{ \"pageOrientation\": \"auto\" } 如果页面添加了上述声明，则在屏幕旋转时，这个页面将随之旋转，显示区域尺寸也会随着屏幕旋转而变化。\n从小程序基础库版本 2.5.0 开始， pageOrientation 还可以被设置为 landscape ，表示固定为横屏显示。\n动画 https://developers.weixin.qq.com/miniprogram/dev/framework/view/animation.html\n初始渲染缓存 小程序页面的初始化分为两个部分。\n逻辑层初始化：载入必需的小程序代码、初始化页面 this 对象（也包括它涉及到的所有自定义组件的 this 对象）、将相关数据发送给视图层。 视图层初始化：载入必需的小程序代码，然后等待逻辑层初始化完毕并接收逻辑层发送的数据，最后渲染页面。 在启动页面时，尤其是小程序冷启动、进入第一个页面时，逻辑层初始化的时间较长。在页面初始化过程中，用户将看到小程序的标准载入画面（冷启动时）或可能看到轻微的白屏现象（页面跳转过程中）。\n启用初始渲染缓存，可以使视图层不需要等待逻辑层初始化完毕，而直接提前将页面初始 data 的渲染结果展示给用户，这可以使得页面对用户可见的时间大大提前。它的工作原理如下：\n在小程序页面第一次被打开后，将页面初始数据渲染结果记录下来，写入一个持久化的缓存区域（缓存可长时间保留，但可能因为小程序更新、基础库更新、储存空间回收等原因被清除）； 在这个页面被第二次打开时，检查缓存中是否还存有这个页面上一次初始数据的渲染结果，如果有，就直接将渲染结果展示出来； 如果展示了缓存中的渲染结果，这个页面暂时还不能响应用户事件，等到逻辑层初始化完毕后才能响应用户事件。 利用初始渲染缓存，可以：\n快速展示出页面中永远不会变的部分，如导航栏； 预先展示一个骨架页，提升用户体验； 展示自定义的加载提示； 提前展示广告，等等。 支持的组件 在初始渲染缓存阶段中，复杂组件不能被展示或不能响应交互。\n目前支持的内置组件：\n自定义组件本身可以被展示（但它们里面用到的内置组件也遵循上述限制）。\n静态初始渲染缓存 若想启用初始渲染缓存，最简单的方法是在页面的 json 文件中添加配置项 \"initialRenderingCache\": \"static\" ：\n{ \"initialRenderingCache\": \"static\" } 如果想要对所有页面启用，可以在 app.json 的 window 配置段中添加这个配置：\n{ \"window\": { \"initialRenderingCache\": \"static\" } } 添加这个配置项之后，在手机中预览小程序首页，然后杀死小程序再次进入，就会通过初始渲染缓存来渲染首页。\n注意：这种情况下，初始渲染缓存记录的是页面 data 应用在页面 WXML 上的结果，不包含任何 setData 的结果。\n例如，如果想要在页面中展示出“正在加载”几个字，这几个字受到 loading 数据字段控制：\n\u003cview wx:if=\"{{loading}}\"\u003e正在加载\u003c/view\u003e 这种情况下， loading 应当在 data 中指定为 true ，如：\n// 正确的做法 Page({ data: { loading: true } }) 而不能通过 setData 将 loading 置为 true ：\n// 错误的做法！不要这么做！ Page({ data: {}, onLoad: function() { this.setData({ loading: true }) } }) 换而言之，这种做法只包含页面 data 的渲染结果，即页面的纯静态成分。\n在初始渲染缓存中添加动态内容 有些场景中，只是页面 data 的渲染结果会比较局限。有时会想要额外展示一些可变的内容，如展示的广告图片 URL 等。\n这种情况下可以使用“动态”初始渲染缓存的方式。首先，配置 \"initialRenderingCache\": \"dynamic\" ：\n{ \"initialRenderingCache\": \"dynamic\" } 此时，初始渲染缓存不会被自动启用，还需要在页面中调用 this.setInitialRenderingCache(dynamicData) 才能启用。其中， dynamicData 是一组数据，与 data 一起参与页面 WXML 渲染。\nPage({ data: { loading: true }, onReady: function() { this.setInitialRenderingCache({ loadingHint: '正在加载' // 这一部分数据将被应用于界面上，相当于在初始 data 基础上额外进行一次 setData }) } }) \u003cview wx:if=\"{{loading}}\"\u003e{{loadingHint}}\u003c/view\u003e 从原理上说，在动态生成初始渲染缓存的方式下，页面会在后台使用动态数据重新渲染一次，因而开销相对较大。因而要尽量避免频繁调用 this.setInitialRenderingCache ，如果在一个页面内多次调用，仅最后一次调用生效。\n注意：\nthis.setInitialRenderingCache 调用时机不能早于 Page 的 onReady 或 Component 的 ready 生命周期，否则可能对性能有负面影响。 如果想禁用初始渲染缓存，调用 this.setInitialRenderingCache(null) 。 自定义 tabBar 参考 https://developers.weixin.qq.com/miniprogram/dev/framework/ability/custom-tabbar.html\n自定义tabBar 自定义 tabBar 可以让开发者更加灵活地设置 tabBar 样式，以满足更多个性化的场景。\n在自定义 tabBar 模式下\n为了保证低版本兼容以及区分哪些页面是 tab 页，tabBar 的相关配置项需完整声明，但这些字段不会作用于自定义 tabBar 的渲染。 此时需要开发者提供一个自定义组件来渲染 tabBar，所有 tabBar 的样式都由该自定义组件渲染。推荐用 fixed 在底部的 cover-view + cover-image 组件渲染样式，以保证 tabBar 层级相对较高。 与 tabBar 样式相关的接口，如 wx.setTabBarItem 等将失效。 每个 tab 页下的自定义 tabBar 组件实例是不同的，可通过自定义组件下的 getTabBar 接口，获取当前页面的自定义 tabBar 组件实例。 注意：如需实现 tab 选中态，要在当前页面下，通过 getTabBar 接口获取组件实例，并调用 setData 更新选中态。可参考底部的代码示例。\n使用 配置信息 在 app.json 中的 tabBar 项指定 custom 字段，同时其余 tabBar 相关配置也补充完整。 所有 tab 页的 json 里需声明 usingComponents 项，也可以在 app.json 全局开启。 { \"tabBar\": { \"custom\": true, \"color\": \"#000000\", \"selectedColor\": \"#000000\", \"backgroundColor\": \"#000000\", \"list\": [{ \"pagePath\": \"page/component/index\", \"text\": \"组件\" }, { \"pagePath\": \"page/API/index\", \"text\": \"接口\" }] }, \"usingComponents\": {} } 添加 tabBar 代码文件 在代码根目录下添加入口文件:\ncustom-tab-bar/index.js custom-tab-bar/index.json custom-tab-bar/index.wxml custom-tab-bar/index.wxss 3. 编写 tabBar 代码\n用自定义组件的方式编写即可，该自定义组件完全接管 tabBar 的渲染。另外，自定义组件新增 getTabBar 接口，可获取当前页面下的自定义 tabBar 组件实例\n以下是一个简单的自定义 tabBar 组件示例：\n\u003cview class=\"tabbar\"\u003e \u003cview class=\"tabbar-item {{ select === index ? 'tabbar-select' : '' }}\" wx:for=\"{{ list }}\" wx:key=\"index\" data-page=\"{{ item.pagePath }}\" data-index=\"{{ index }}\" data-type=\"{{ item.type }}\" bindtap=\"selectPage\"\u003e \u003cblock wx:if=\"{{ item.type === 0 }}\"\u003e \u003cimage class=\"tabbar-image\" src=\"{{ select === index ? item.selectedIconPath : item.iconPath }}\"\u003e\u003c/image\u003e \u003ctext class=\"tabbar-text\"\u003e{{ item.text }}\u003c/text\u003e \u003c/block\u003e \u003cblock wx:else\u003e \u003cview class=\"publish\"\u003e \u003cimage class=\"tabbar-image\" src=\"../images/add.png\"\u003e\u003c/image\u003e \u003c/view\u003e \u003c/block\u003e \u003c/view\u003e \u003c/view\u003e Component({ data: { select: 0, list: [ { iconPath: \"/images/index.png\", pagePath: \"/pages/index/index\", selectedIconPath: \"/images/index_fill.png\", text: \"首页\", type: 0 }, { iconPath: \"/images/classify.png\", pagePath: \"/pages/classify/classify\", selectedIconPath: \"/images/classify_fill.png\", text: \"分类\", type: 0 }, { type: 1, pagePath: \"/pages/publish/publish\", }, { iconPath: \"/images/collection.png\", pagePath: \"/pages/collection/collection\", selectedIconPath: \"/images/collection_fill.png\", text: \"收藏夹\", type: 0, }, { iconPath: \"/images/me.png\", pagePath: \"/pages/me/me\", selectedIconPath: \"/images/me_fill.png\", text: \"我的\", type: 0 } ] }, methods: { selectPage(e) { const { index, page, type } = e.currentTarget.dataset if (index !== this.data.select \u0026\u0026 type === 0) { wx.switchTab({ url: page, }) } if (type === 1) { wx.navigateTo({ url: '../../pages/publish/publish', }) } this.setData({ select: index }) } } }) .tabbar { width: 100%; height: 80rpx; display: flex; background-color: #fff; position: fixed; bottom: 0; padding-bottom: env(safe-area-inset-bottom); padding-top: 10rpx; z-index: 9999; } .tabbar-item { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; } .tabbar-item .tabbar-image { width: 40rpx; height: 40rpx; } .tabbar-item .tabbar-text { font-size: 26rpx; margin-top: 10rpx; } .tabbar-item .publish { padding: 8px; background-color: #B2A4EC; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: auto; } .tabbar-select { color: #B2A4EC; } skyline 模式 ","wordCount":"14652","inLanguage":"zh-cn","datePublished":"2023-03-02T20:52:46+08:00","dateModified":"2023-03-02T20:52:46+08:00","author":{"@type":"Person","name":"Waite Wang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://waite.wang/posts/mini-program/learn-wechat-minipro-1/"},"publisher":{"@type":"Organization","name":"隶笔难书","logo":{"@type":"ImageObject","url":"https://waite.wang/images/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://waite.wang/ accesskey=h title="隶笔难书 (Alt + H)">隶笔难书</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://waite.wang/ title=首页><span>首页</span></a></li><li><a href=https://waite.wang/search title=搜索><span>搜索</span></a></li><li><a href=https://waite.wang/categories title=分类><span>分类</span></a></li><li><a href=https://waite.wang/tags title=标签><span>标签</span></a></li><li><a href=https://waite.wang/archives title=归档><span>归档</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://waite.wang/>Home</a>&nbsp;»&nbsp;<a href=https://waite.wang/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">微信小程序入门</h1><div class=post-description>微信小程序学习笔记</div><div class=post-meta>Created: &nbsp;<span title='2023-03-02 20:52:46 +0800 +0800'>2023-03-02</span>&nbsp;·&nbsp;30 min&nbsp;·&nbsp;14652 words&nbsp;·&nbsp;Waite Wang&nbsp;|&nbsp;<a href=https://github.com/Waite0603/HugoBlog/edit/main/content/posts/mini-program/learn-wechat-minipro-1.md rel="noopener noreferrer" target=_blank>在 GitHub 编辑</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e5%85%a5%e9%97%a8 aria-label=微信小程序入门>微信小程序入门</a><ul><li><a href=#%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e4%bb%8b%e7%bb%8d aria-label=微信小程序介绍>微信小程序介绍</a><ul><li><a href=#%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e4%bb%8b%e7%bb%8d-1 aria-label=微信小程序介绍>微信小程序介绍</a></li><li><a href=#%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%89%b9%e7%82%b9 aria-label=小程序特点>小程序特点</a></li><li><a href=#%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%9a%84%e4%bc%98%e7%bc%ba%e7%82%b9 aria-label=小程序的优缺点>小程序的优缺点</a></li><li><a href=#%e5%b0%8f%e7%a8%8b%e5%ba%8f%e5%bc%80%e5%8f%91%e9%9c%80%e6%b1%82 aria-label=小程序开发需求>小程序开发需求</a></li><li><a href=#%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%9a%84%e6%b3%a8%e5%86%8c aria-label=微信小程序的注册>微信小程序的注册</a></li></ul></li><li><a href=#%e5%bc%80%e5%8f%91%e5%b7%a5%e5%85%b7 aria-label=开发工具>开发工具</a><ul><li><a href=#%e5%bc%80%e5%8f%91%e8%80%85%e5%b7%a5%e5%85%b7%e7%9a%84%e4%bd%bf%e7%94%a8 aria-label=开发者工具的使用>开发者工具的使用</a></li></ul></li><li><a href=#%e9%a1%b9%e7%9b%ae%e7%9b%ae%e5%bd%95%e7%bb%93%e6%9e%84%e4%bb%8b%e7%bb%8d aria-label=项目目录结构介绍>项目目录结构介绍</a><ul><li><a href=#pages%e7%9b%ae%e5%bd%95 aria-label=pages目录>pages目录</a></li><li><a href=#appjs%e6%96%87%e4%bb%b6 aria-label=app.js文件>app.js文件</a></li><li><a href=#appjson%e6%96%87%e4%bb%b6 aria-label=app.json文件>app.json文件</a></li><li><a href=#appwxss%e6%96%87%e4%bb%b6 aria-label=app.wxss文件>app.wxss文件</a></li><li><a href=#projectconfigjson%e6%96%87%e4%bb%b6 aria-label=project.config.json文件>project.config.json文件</a></li><li><a href=#sitemapjson aria-label=Sitemap.json>Sitemap.json</a></li></ul></li></ul></li><li><a href=#%e5%b0%8f%e7%a8%8b%e5%ba%8f%e9%85%8d%e7%bd%ae%e9%a1%b9 aria-label=小程序配置项>小程序配置项</a><ul><li><a href=#%e5%85%a8%e5%b1%80%e9%85%8d%e7%bd%ae aria-label=全局配置>全局配置</a><ul><li><a href=#entrypagepath aria-label=entryPagePath>entryPagePath</a></li><li><a href=#pages aria-label=pages>pages</a></li><li><a href=#window aria-label=window>window</a></li><li><a href=#tabbar aria-label=tabBar>tabBar</a></li><li><a href=#networktimeout aria-label=networkTimeout>networkTimeout</a></li><li><a href=#debug aria-label=debug>debug</a></li></ul></li><li><a href=#%e9%a1%b5%e9%9d%a2%e9%85%8d%e7%bd%ae aria-label=页面配置>页面配置</a></li><li><a href=#wxss aria-label=WXSS>WXSS</a><ul><li><a href=#%e5%b0%ba%e5%af%b8%e5%8d%95%e4%bd%8d aria-label=尺寸单位>尺寸单位</a></li><li><a href=#%e6%a0%b7%e5%bc%8f%e5%af%bc%e5%85%a5 aria-label=样式导入>样式导入</a></li><li><a href=#%e5%86%85%e8%81%94%e6%a0%b7%e5%bc%8f aria-label=内联样式>内联样式</a></li><li><a href=#%e9%80%89%e6%8b%a9%e5%99%a8 aria-label=选择器>选择器</a></li><li><a href=#%e5%85%a8%e5%b1%80%e6%a0%b7%e5%bc%8f%e4%b8%8e%e5%b1%80%e9%83%a8%e6%a0%b7%e5%bc%8f aria-label=全局样式与局部样式>全局样式与局部样式</a></li></ul></li></ul></li><li><a href=#%e7%bb%84%e4%bb%b6 aria-label=组件>组件</a><ul><li><a href=#%e8%a7%86%e5%9b%be%e5%9f%ba%e7%a1%80%e7%bb%84%e4%bb%b6 aria-label=视图/基础组件>视图/基础组件</a><ul><li><a href=#view aria-label=View>View</a></li><li><a href=#text aria-label=text>text</a></li><li><a href=#swiper aria-label=swiper>swiper</a></li><li><a href=#scroll-view aria-label=scroll-view>scroll-view</a></li><li><a href=#icon aria-label=icon>icon</a></li><li><a href=#progress-%e8%bf%9b%e5%ba%a6%e6%9d%a1 aria-label="progress 进度条">progress 进度条</a></li></ul></li><li><a href=#%e8%a1%a8%e5%8d%95%e7%bb%84%e4%bb%b6 aria-label=表单组件>表单组件</a><ul><li><a href=#button aria-label=Button>Button</a></li></ul></li><li><a href=#%e5%af%bc%e8%88%aa%e7%bb%84%e4%bb%b6 aria-label=导航组件>导航组件</a><ul><li><a href=#navigator aria-label=navigator>navigator</a></li></ul></li><li><a href=#%e5%aa%92%e4%bd%93%e7%bb%84%e4%bb%b6 aria-label=媒体组件>媒体组件</a><ul><li><a href=#image aria-label=image>image</a></li></ul></li><li><a href=#%e5%9c%b0%e5%9b%be%e7%bb%84%e4%bb%b6 aria-label=地图组件>地图组件</a></li></ul></li><li><a href=#%e6%a1%86%e6%9e%b6 aria-label=框架>框架</a><ul><li><a href=#%e5%93%8d%e5%ba%94%e7%9a%84%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a aria-label=响应的数据绑定>响应的数据绑定</a></li><li><a href=#%e9%80%bb%e8%be%91%e5%b1%82 aria-label=逻辑层>逻辑层</a><ul><li><a href=#%e6%b3%a8%e5%86%8c%e5%b0%8f%e7%a8%8b%e5%ba%8f aria-label=注册小程序>注册小程序</a></li><li><a href=#%e6%b3%a8%e5%86%8c%e9%a1%b5%e9%9d%a2 aria-label=注册页面>注册页面</a><ul><li><a href=#%e4%bd%bf%e7%94%a8-page-%e6%9e%84%e9%80%a0%e5%99%a8%e6%b3%a8%e5%86%8c%e9%a1%b5 aria-label="使用 Page 构造器注册页">使用 Page 构造器注册页</a></li></ul></li><li><a href=#%e9%a1%b5%e9%9d%a2%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f aria-label=页面生命周期>页面生命周期</a></li><li><a href=#%e6%a8%a1%e5%9d%97%e5%8c%96 aria-label=模块化>模块化</a></li><li><a href=#%e6%96%87%e4%bb%b6%e4%bd%9c%e7%94%a8%e5%9f%9f aria-label=文件作用域>文件作用域</a></li><li><a href=#api aria-label=API>API</a></li></ul></li><li><a href=#%e8%a7%86%e5%9b%be%e5%b1%82 aria-label=视图层>视图层</a><ul><li><a href=#wxml aria-label=WXML>WXML</a><ul><li><a href=#%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a aria-label=数据绑定>数据绑定</a></li><li><a href=#%e5%88%97%e8%a1%a8%e6%b8%b2%e6%9f%93 aria-label=列表渲染>列表渲染</a></li><li><a href=#%e6%9d%a1%e4%bb%b6%e6%b8%b2%e6%9f%93 aria-label=条件渲染>条件渲染</a></li><li><a href=#%e6%a8%a1%e6%9d%bf aria-label=模板>模板</a></li><li><a href=#%e4%b8%89%e7%9b%ae%e8%bf%90%e7%ae%97%e7%ac%a6 aria-label=三目运算符>三目运算符</a></li></ul></li><li><a href=#wxs aria-label=WXS>WXS</a><ul><li><a href=#%e9%a1%b5%e9%9d%a2%e6%b8%b2%e6%9f%93 aria-label=页面渲染>页面渲染</a></li><li><a href=#%e6%95%b0%e6%8d%ae%e5%a4%84%e7%90%86 aria-label=数据处理>数据处理</a></li></ul></li><li><a href=#%e7%ae%80%e6%98%93%e5%8f%8c%e5%90%91%e7%bb%91%e5%ae%9a aria-label=简易双向绑定>简易双向绑定</a><ul><li><a href=#%e5%9c%a8%e8%87%aa%e5%ae%9a%e4%b9%89%e7%bb%84%e4%bb%b6%e4%b8%ad%e4%bc%a0%e9%80%92%e5%8f%8c%e5%90%91%e7%bb%91%e5%ae%9a aria-label=在自定义组件中传递双向绑定>在自定义组件中传递双向绑定</a></li><li><a href=#%e5%9c%a8%e8%87%aa%e5%ae%9a%e4%b9%89%e7%bb%84%e4%bb%b6%e4%b8%ad%e8%a7%a6%e5%8f%91%e5%8f%8c%e5%90%91%e7%bb%91%e5%ae%9a%e6%9b%b4%e6%96%b0 aria-label=在自定义组件中触发双向绑定更新>在自定义组件中触发双向绑定更新</a></li></ul></li><li><a href=#%e5%93%8d%e5%ba%94%e6%98%be%e7%a4%ba%e5%8c%ba%e5%9f%9f%e5%8f%98%e5%8c%96 aria-label=响应显示区域变化>响应显示区域变化</a></li><li><a href=#%e5%8a%a8%e7%94%bb aria-label=动画>动画</a></li><li><a href=#%e5%88%9d%e5%a7%8b%e6%b8%b2%e6%9f%93%e7%bc%93%e5%ad%98 aria-label=初始渲染缓存>初始渲染缓存</a><ul><li><a href=#%e6%94%af%e6%8c%81%e7%9a%84%e7%bb%84%e4%bb%b6 aria-label=支持的组件>支持的组件</a></li><li><a href=#%e9%9d%99%e6%80%81%e5%88%9d%e5%a7%8b%e6%b8%b2%e6%9f%93%e7%bc%93%e5%ad%98 aria-label=静态初始渲染缓存>静态初始渲染缓存</a></li><li><a href=#%e5%9c%a8%e5%88%9d%e5%a7%8b%e6%b8%b2%e6%9f%93%e7%bc%93%e5%ad%98%e4%b8%ad%e6%b7%bb%e5%8a%a0%e5%8a%a8%e6%80%81%e5%86%85%e5%ae%b9 aria-label=在初始渲染缓存中添加动态内容>在初始渲染缓存中添加动态内容</a></li></ul></li></ul></li></ul></li><li><a href=#%e8%87%aa%e5%ae%9a%e4%b9%89-tabbar aria-label="自定义 tabBar">自定义 tabBar</a><ul><li><a href=#%e8%87%aa%e5%ae%9a%e4%b9%89tabbar aria-label=自定义tabBar>自定义tabBar</a></li><li><a href=#%e4%bd%bf%e7%94%a8 aria-label=使用>使用</a></li><li><a href=#skyline-%e6%a8%a1%e5%bc%8f aria-label="skyline 模式">skyline 模式</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=微信小程序入门>微信小程序入门<a hidden class=anchor aria-hidden=true href=#微信小程序入门>#</a></h2><h3 id=微信小程序介绍>微信小程序介绍<a hidden class=anchor aria-hidden=true href=#微信小程序介绍>#</a></h3><h4 id=微信小程序介绍-1>微信小程序介绍<a hidden class=anchor aria-hidden=true href=#微信小程序介绍-1>#</a></h4><p>​ 微信小程序，简称小程序，是一种不需要下载安装即可使用的应用，它实现了应用”触手可及”的梦想，用户扫一扫或搜一下即可打开应用。</p><p>​ 说明：</p><ul><li>小程序是需要下载的，小程序的占用大小很小，感觉不到下载</li><li>目前大小限制2M （最终开发的小程序打包压缩后的大小），如果超过2M,就得做分包上传.之后再合并</li><li>进入小程序后继续网络请求数据</li></ul><h4 id=小程序特点>小程序特点<a hidden class=anchor aria-hidden=true href=#小程序特点>#</a></h4><p>微信小程序的特点：</p><ul><li>免安装</li><li>接近原生（IOS，Android ）的app操作基于微信开发。使用wx提供的api开发</li><li>必须在微信里面使用</li></ul><h4 id=小程序的优缺点>小程序的优缺点<a hidden class=anchor aria-hidden=true href=#小程序的优缺点>#</a></h4><ul><li>==方便快捷，即用即走==</li><li>==速度快、不占内存==</li><li>安全稳定、保密性强</li><li>功能丰富，场景丰富</li><li>==开发成本低、维护简便==</li><li>==开发周期比较短==</li><li>体验好</li></ul><h4 id=小程序开发需求>小程序开发需求<a hidden class=anchor aria-hidden=true href=#小程序开发需求>#</a></h4><ul><li>不注册可以开发小程序(不能发布)</li><li>注册小程序<ul><li>企业注册(公司内部人员注册好了，给一个APPID)</li><li>个人注册</li></ul></li></ul><h4 id=微信小程序的注册>微信小程序的注册<a hidden class=anchor aria-hidden=true href=#微信小程序的注册>#</a></h4><p>微信公众平台：
<a href=https://mp.weixin.qq.com/ target=_blank>https://mp.weixin.qq.com/</a></p><h3 id=开发工具>开发工具<a hidden class=anchor aria-hidden=true href=#开发工具>#</a></h3><p>开发工具下载地址：
<a href=https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html target=_blank>https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html</a></p><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401192149328.png><img src=https://qiniu.waite.wang/202401192149328.png alt=image-20220122170116175></a></div></p><h4 id=开发者工具的使用>开发者工具的使用<a hidden class=anchor aria-hidden=true href=#开发者工具的使用>#</a></h4><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401192150079.png><img src=https://qiniu.waite.wang/202401192150079.png alt=image-20220122201456358></a></div></p><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401192150318.png><img src=https://qiniu.waite.wang/202401192150318.png alt=image-20220608183526635></a></div></p><blockquote><p>以下就是微信小程序开发工具的界面，主要有：微信小程序模拟器、项目目录、代码编写区域、控制台。</p></blockquote><h3 id=项目目录结构介绍>项目目录结构介绍<a hidden class=anchor aria-hidden=true href=#项目目录结构介绍>#</a></h3><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401192154095.png><img src=https://qiniu.waite.wang/202401192154095.png alt=image-20240119215440525></a></div></p><h4 id=pages目录>pages目录<a hidden class=anchor aria-hidden=true href=#pages目录>#</a></h4><p>​ pages目录下放的就是小程序中的各个页面。</p><p>​ 在pages中创建页面的时候，会出现4个文件：</p><ul><li>xxx.js：页面相关的js代码可以写在这里</li><li>xxx.wxml：这个就是页面文件，相当于我们之前的HTML，所以页面结构内容写在这里</li><li>xxx.wxss：页面的样式内容，相当于之前的css，所以页面相关的样式可以写在这里</li><li>xxx.json：页面有关的配置，比如页面导航栏的背景色、内容等等</li></ul><p>比如：<div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401192151123.png><img src=https://qiniu.waite.wang/202401192151123.png alt=10></a></div></p><h4 id=appjs文件>app.js文件<a hidden class=anchor aria-hidden=true href=#appjs文件>#</a></h4><p>​ app.js文件是整个项目的一个==总体配置==。里面包含了项目运行==生命周期的回调函数==。</p><h4 id=appjson文件>app.json文件<a hidden class=anchor aria-hidden=true href=#appjson文件>#</a></h4><p>​ 小程序根目录下的 <code>app.json</code> 文件用来对微信小程序进行全局配置，决定页面文件的路径、窗口表现、设置网络超时时间、设置多 tab 等。</p><p>小程序根目录下的 <code>app.json</code> 文件用来对微信小程序进行全局配置。文件内容为一个 JSON 对象，有以下属性：</p><p><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html target=_blank>https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html</a></p><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401192155179.png><img src=https://qiniu.waite.wang/202401192155179.png alt></a></div></p><h4 id=appwxss文件>app.wxss文件<a hidden class=anchor aria-hidden=true href=#appwxss文件>#</a></h4><ul><li>app.wxss 文件是微信小程序项目的==全局样式表==，它可以应用到所有的wxml文件中。</li><li>微信小程序中使用 rpx 作为长度单位。1rpx = 1/750 屏幕宽度。也就是屏幕宽度等于 750rpx。</li><li>px 也可以使用，表示的是设备独立像素。</li><li>建议使用长度单位 rpx。它自动做了适配。</li></ul><h4 id=projectconfigjson文件>project.config.json文件<a hidden class=anchor aria-hidden=true href=#projectconfigjson文件>#</a></h4><p>​ <code>project.config.json</code>文件是小程序项目的配置文件（如开发工具的外观配置），一般不需要修改，我们目前就改一个地方：</p><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401192153939.png><img src=https://qiniu.waite.wang/202401192153939.png alt=11></a></div></p><p><code>"checkSiteMap":false</code> 作用是==控制台不要有一些没用的警告==。</p><h4 id=sitemapjson>Sitemap.json<a hidden class=anchor aria-hidden=true href=#sitemapjson>#</a></h4><p><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html target=_blank>https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html</a></p><p>搜索功能文件，指定哪些页面可以被搜索，可被配置。是在搜索小程序的时候，指定哪些页面允许被搜索到。</p><h2 id=小程序配置项>小程序配置项<a hidden class=anchor aria-hidden=true href=#小程序配置项>#</a></h2><h3 id=全局配置>全局配置<a hidden class=anchor aria-hidden=true href=#全局配置>#</a></h3><blockquote><p><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#entryPagePath target=_blank>https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#entryPagePath</a></p></blockquote><p>小程序根目录下的 <code>app.json</code> 文件用来对微信小程序进行全局配置。文件内容为一个 JSON 对象，有以下属性：</p><table><thead><tr><th style=text-align:left>属性</th><th style=text-align:left>类型</th><th style=text-align:left>必填</th><th style=text-align:left>描述</th><th style=text-align:left>最低版本</th></tr></thead><tbody><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#entryPagePath target=_blank>entryPagePath</a></td><td style=text-align:left>string</td><td style=text-align:left>否</td><td style=text-align:left>小程序默认启动首页</td><td style=text-align:left></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#pages target=_blank>pages</a></td><td style=text-align:left>string[]</td><td style=text-align:left>是</td><td style=text-align:left>页面路径列表</td><td style=text-align:left></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#window target=_blank>window</a></td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>全局的默认窗口表现</td><td style=text-align:left></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#tabBar target=_blank>tabBar</a></td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>底部 <code>tab</code> 栏的表现</td><td style=text-align:left></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#networkTimeout target=_blank>networkTimeout</a></td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>网络超时时间</td><td style=text-align:left></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#debug target=_blank>debug</a></td><td style=text-align:left>boolean</td><td style=text-align:left>否</td><td style=text-align:left>是否开启 debug 模式，默认关闭</td><td style=text-align:left></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#functionalPages target=_blank>functionalPages</a></td><td style=text-align:left>boolean</td><td style=text-align:left>否</td><td style=text-align:left>是否启用插件功能页，默认关闭</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.1.0</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#subpackages target=_blank>subpackages</a></td><td style=text-align:left>Object[]</td><td style=text-align:left>否</td><td style=text-align:left>分包结构配置</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.7.3</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#workers target=_blank>workers</a></td><td style=text-align:left>string</td><td style=text-align:left>否</td><td style=text-align:left><code>Worker</code> 代码放置的目录</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.9.90</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#requiredBackgroundModes target=_blank>requiredBackgroundModes</a></td><td style=text-align:left>string[]</td><td style=text-align:left>否</td><td style=text-align:left>需要在后台使用的能力，如「音乐播放」</td><td style=text-align:left></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#requiredPrivateInfos target=_blank>requiredPrivateInfos</a></td><td style=text-align:left>string[]</td><td style=text-align:left>否</td><td style=text-align:left>调用的地理位置相关隐私接口</td><td style=text-align:left></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#plugins target=_blank>plugins</a></td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>使用到的插件</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.9.6</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#preloadRule target=_blank>preloadRule</a></td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>分包预下载规则</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.3.0</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#resizable target=_blank>resizable</a></td><td style=text-align:left>boolean</td><td style=text-align:left>否</td><td style=text-align:left>PC 小程序是否支持用户任意改变窗口大小（包括最大化窗口）；iPad 小程序是否支持屏幕旋转。默认关闭</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.3.0</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#usingComponents target=_blank>usingComponents</a></td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>全局
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/ target=_blank>自定义组件</a>配置</td><td style=text-align:left>开发者工具 1.02.1810190</td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#permission target=_blank>permission</a></td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>小程序接口权限相关设置</td><td style=text-align:left>微信客户端 7.0.0</td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#sitemapLocation target=_blank>sitemapLocation</a></td><td style=text-align:left>string</td><td style=text-align:left>是</td><td style=text-align:left>指明 sitemap.json 的位置</td><td style=text-align:left></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#style target=_blank>style</a></td><td style=text-align:left>string</td><td style=text-align:left>否</td><td style=text-align:left>指定使用升级后的weui样式</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.8.0</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#useextendedlib target=_blank>useExtendedLib</a></td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>指定需要引用的扩展库</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.2.1</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#entranceDeclare target=_blank>entranceDeclare</a></td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>微信消息用小程序打开</td><td style=text-align:left>微信客户端 7.0.9</td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#darkmode target=_blank>darkmode</a></td><td style=text-align:left>boolean</td><td style=text-align:left>否</td><td style=text-align:left>小程序支持 DarkMode</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.11.0</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#themeLocation target=_blank>themeLocation</a></td><td style=text-align:left>string</td><td style=text-align:left>否</td><td style=text-align:left>指明 theme.json 的位置，darkmode为true为必填</td><td style=text-align:left>开发者工具 1.03.2004271</td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#lazyCodeLoading target=_blank>lazyCodeLoading</a></td><td style=text-align:left>string</td><td style=text-align:left>否</td><td style=text-align:left>配置自定义组件代码按需注入</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.11.1</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#singlePage target=_blank>singlePage</a></td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>单页模式相关配置</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.12.0</a></td></tr><tr><td style=text-align:left>supportedMaterials</td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/material/support_material.html target=_blank>聊天素材小程序打开</a>相关配置</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.14.3</a></td></tr><tr><td style=text-align:left>serviceProviderTicket</td><td style=text-align:left>string</td><td style=text-align:left>否</td><td style=text-align:left><a href=https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/2.0/operation/thirdparty/customized_service_platform_guidelines.html target=_blank>定制化型服务商</a>票据</td><td style=text-align:left></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#embeddedAppIdList target=_blank>embeddedAppIdList</a></td><td style=text-align:left>string[]</td><td style=text-align:left>否</td><td style=text-align:left>半屏小程序 appId</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.20.1</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#halfPage target=_blank>halfPage</a></td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>视频号直播半屏场景设置</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.18.0</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#debugOptions target=_blank>debugOptions</a></td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>调试相关配置</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.22.1</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#enablePassiveEvent target=_blank>enablePassiveEvent</a></td><td style=text-align:left>Object或boolean</td><td style=text-align:left>否</td><td style=text-align:left>touch 事件监听是否为 passive</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.24.1</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#resolveAlias target=_blank>resolveAlias</a></td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>自定义模块映射规则</td><td style=text-align:left></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#renderer target=_blank>renderer</a></td><td style=text-align:left>string</td><td style=text-align:left>否</td><td style=text-align:left>全局默认的渲染后端</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.30.4</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#rendererOptions target=_blank>rendererOptions</a></td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>渲染后端选项</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.31.1</a></td></tr><tr><td style=text-align:left>componentFramework</td><td style=text-align:left>string</td><td style=text-align:left>否</td><td style=text-align:left>组件框架，详见
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/glass-easel/migration.html target=_blank>相关文档</a></td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.30.4</a></td></tr><tr><td style=text-align:left>miniApp</td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>多端模式场景接入身份管理服务时开启小程序授权页相关配置，详见
<a href=https://dev.weixin.qq.com/docs/framework/getting_started/auth.html#_4%e3%80%81%e5%bc%80%e5%90%af%e5%b0%8f%e7%a8%8b%e5%ba%8f%e6%8e%88%e6%9d%83%e9%a1%b5 target=_blank>相关文档</a></td><td style=text-align:left></td></tr><tr><td style=text-align:left>static</td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>正常情况下默认所有资源文件都被打包发布到所有平台，可以通过 static 字段配置特定每个目录/文件只能发布到特定的平台(多端场景)
<a href=https://dev.weixin.qq.com/docs/framework/guideline/devtools/condition-compile.html#%e8%b5%84%e6%ba%90 target=_blank>相关文档</a></td><td style=text-align:left></td></tr><tr><td style=text-align:left>convertRpxToVw</td><td style=text-align:left>boolean</td><td style=text-align:left>否</td><td style=text-align:left>配置是否将 rpx 单位转换为 vw 单位，开启后能修复某些 rpx 下的精度问题</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>3.3.0</a></td></tr></tbody></table><blockquote><p>以下简单列举了一部分, 其他未列举可以在官方文档中查看</p></blockquote><h4 id=entrypagepath>entryPagePath<a hidden class=anchor aria-hidden=true href=#entrypagepath>#</a></h4><p>指定小程序的默认启动路径（首页），常见情景是从微信聊天列表页下拉启动、小程序列表启动等。如果不填，将默认为 <code>pages</code> 列表的第一项。不支持带页面路径参数。</p><h4 id=pages>pages<a hidden class=anchor aria-hidden=true href=#pages>#</a></h4><p>用于指定小程序由哪些页面组成，每一项都对应一个页面的 路径（含文件名） 信息。文件名不需要写文件后缀，框架会自动去寻找对应位置的 <code>.json</code>, <code>.js</code>, <code>.wxml</code>, <code>.wxss</code> 四个文件进行处理。</p><p>未指定 <code>entryPagePath</code> 时，数组的第一项代表小程序的初始页面（首页）。</p><p><strong>小程序中新增/减少页面，都需要对 pages 数组进行修改。</strong></p><p>则需要在 app.json 中写</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;pages&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;pages/index/index&#34;</span><span class=p>,</span> <span class=s2>&#34;pages/logs/logs&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=window>window<a hidden class=anchor aria-hidden=true href=#window>#</a></h4><p>用于设置小程序的状态栏、导航条、标题、窗口背景色。</p><table><thead><tr><th style=text-align:left>属性</th><th style=text-align:left>类型</th><th style=text-align:left>默认值</th><th style=text-align:left>描述</th><th style=text-align:left>最低版本</th></tr></thead><tbody><tr><td style=text-align:left>navigationBarBackgroundColor</td><td style=text-align:left>HexColor</td><td style=text-align:left>#000000</td><td style=text-align:left>导航栏背景颜色，如 <code>#000000</code></td><td style=text-align:left></td></tr><tr><td style=text-align:left>navigationBarTextStyle</td><td style=text-align:left>string</td><td style=text-align:left>white</td><td style=text-align:left>导航栏标题、状态栏颜色，仅支持 <code>black</code> / <code>white</code></td><td style=text-align:left></td></tr><tr><td style=text-align:left>navigationBarTitleText</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>导航栏标题文字内容</td><td style=text-align:left></td></tr><tr><td style=text-align:left>navigationStyle</td><td style=text-align:left>string</td><td style=text-align:left>default</td><td style=text-align:left>导航栏样式，仅支持以下值： <code>default</code> 默认样式 <code>custom</code> 自定义导航栏，只保留右上角胶囊按钮。参见注 2。</td><td style=text-align:left>iOS/Android 微信客户端 6.6.0，Windows 微信客户端不支持</td></tr><tr><td style=text-align:left>homeButton</td><td style=text-align:left>boolean</td><td style=text-align:left>default</td><td style=text-align:left>在非首页、非页面栈最底层页面或非tabbar内页面中的导航栏展示home键</td><td style=text-align:left>微信客户端 8.0.24</td></tr><tr><td style=text-align:left>backgroundColor</td><td style=text-align:left>HexColor</td><td style=text-align:left>#ffffff</td><td style=text-align:left>窗口的背景色</td><td style=text-align:left></td></tr><tr><td style=text-align:left>backgroundTextStyle</td><td style=text-align:left>string</td><td style=text-align:left>dark</td><td style=text-align:left>下拉 loading 的样式，仅支持 <code>dark</code> / <code>light</code></td><td style=text-align:left></td></tr><tr><td style=text-align:left>backgroundColorTop</td><td style=text-align:left>string</td><td style=text-align:left>#ffffff</td><td style=text-align:left>顶部窗口的背景色，仅 iOS 支持</td><td style=text-align:left>微信客户端 6.5.16</td></tr><tr><td style=text-align:left>backgroundColorBottom</td><td style=text-align:left>string</td><td style=text-align:left>#ffffff</td><td style=text-align:left>底部窗口的背景色，仅 iOS 支持</td><td style=text-align:left>微信客户端 6.5.16</td></tr><tr><td style=text-align:left>enablePullDownRefresh</td><td style=text-align:left>boolean</td><td style=text-align:left>false</td><td style=text-align:left>是否开启全局的下拉刷新。 详见
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onpulldownrefresh target=_blank>Page.onPullDownRefresh</a></td><td style=text-align:left></td></tr><tr><td style=text-align:left>onReachBottomDistance</td><td style=text-align:left>number</td><td style=text-align:left>50</td><td style=text-align:left>页面上拉触底事件触发时距页面底部距离，单位为 px。 详见
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onreachbottom target=_blank>Page.onReachBottom</a></td><td style=text-align:left></td></tr><tr><td style=text-align:left>pageOrientation</td><td style=text-align:left>string</td><td style=text-align:left>portrait</td><td style=text-align:left>屏幕旋转设置，支持 <code>auto</code> / <code>portrait</code> / <code>landscape</code> 详见
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/view/resizable.html target=_blank>响应显示区域变化</a></td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.4.0</a> (auto) /
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.5.0</a> (landscape)</td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#restartStrategy target=_blank>restartStrategy</a></td><td style=text-align:left>string</td><td style=text-align:left>homePage</td><td style=text-align:left>重新启动策略配置</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.8.0</a></td></tr><tr><td style=text-align:left>initialRenderingCache</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>页面
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/view/initial-rendering-cache.html target=_blank>初始渲染缓存</a>配置，支持 <code>static</code> / <code>dynamic</code></td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.11.1</a></td></tr><tr><td style=text-align:left>visualEffectInBackground</td><td style=text-align:left>string</td><td style=text-align:left>none</td><td style=text-align:left>切入系统后台时，隐藏页面内容，保护用户隐私。支持 <code>hidden</code> / <code>none</code></td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.15.0</a></td></tr><tr><td style=text-align:left>handleWebviewPreload</td><td style=text-align:left>string</td><td style=text-align:left>static</td><td style=text-align:left>控制
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/performance/tips/runtime_nav.html#_2-4-%e6%8e%a7%e5%88%b6%e9%a2%84%e5%8a%a0%e8%bd%bd%e4%b8%8b%e4%b8%aa%e9%a1%b5%e9%9d%a2%e7%9a%84%e6%97%b6%e6%9c%ba target=_blank>预加载下个页面的时机</a>。支持 <code>static</code> / <code>manual</code> / <code>auto</code></td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.15.0</a></td></tr></tbody></table><p>如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;window&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;navigationBarBackgroundColor&#34;</span><span class=p>:</span> <span class=s2>&#34;#ffffff&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;navigationBarTextStyle&#34;</span><span class=p>:</span> <span class=s2>&#34;black&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;navigationBarTitleText&#34;</span><span class=p>:</span> <span class=s2>&#34;微信接口功能演示&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;backgroundColor&#34;</span><span class=p>:</span> <span class=s2>&#34;#eeeeee&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;backgroundTextStyle&#34;</span><span class=p>:</span> <span class=s2>&#34;light&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401201548556.jpeg><img src=https://qiniu.waite.wang/202401201548556.jpeg alt=img></a></div></p><h4 id=tabbar>tabBar<a hidden class=anchor aria-hidden=true href=#tabbar>#</a></h4><p>如果小程序是一个多 tab 应用（客户端窗口的底部或顶部有 tab 栏可以切换页面），可以通过 tabBar 配置项指定 tab 栏的表现，以及 tab 切换时显示的对应页面。</p><table><thead><tr><th style=text-align:left>属性</th><th style=text-align:left>类型</th><th style=text-align:left>必填</th><th style=text-align:left>默认值</th><th style=text-align:left>描述</th><th style=text-align:left>最低版本</th></tr></thead><tbody><tr><td style=text-align:left>color</td><td style=text-align:left>HexColor</td><td style=text-align:left>是</td><td style=text-align:left></td><td style=text-align:left>tab 上的文字默认颜色，仅支持十六进制颜色</td><td style=text-align:left></td></tr><tr><td style=text-align:left>selectedColor</td><td style=text-align:left>HexColor</td><td style=text-align:left>是</td><td style=text-align:left></td><td style=text-align:left>tab 上的文字选中时的颜色，仅支持十六进制颜色</td><td style=text-align:left></td></tr><tr><td style=text-align:left>backgroundColor</td><td style=text-align:left>HexColor</td><td style=text-align:left>是</td><td style=text-align:left></td><td style=text-align:left>tab 的背景色，仅支持十六进制颜色</td><td style=text-align:left></td></tr><tr><td style=text-align:left>borderStyle</td><td style=text-align:left>string</td><td style=text-align:left>否</td><td style=text-align:left>black</td><td style=text-align:left>tabbar 上边框的颜色， 仅支持 <code>black</code> / <code>white</code></td><td style=text-align:left></td></tr><tr><td style=text-align:left>list</td><td style=text-align:left>Array</td><td style=text-align:left>是</td><td style=text-align:left></td><td style=text-align:left>tab 的列表，详见 <code>list</code> 属性说明，最少 2 个、最多 5 个 tab</td><td style=text-align:left></td></tr><tr><td style=text-align:left>position</td><td style=text-align:left>string</td><td style=text-align:left>否</td><td style=text-align:left>bottom</td><td style=text-align:left>tabBar 的位置，仅支持 <code>bottom</code> / <code>top</code></td><td style=text-align:left></td></tr><tr><td style=text-align:left>custom</td><td style=text-align:left>boolean</td><td style=text-align:left>否</td><td style=text-align:left>false</td><td style=text-align:left>自定义 tabBar，见
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/ability/custom-tabbar.html target=_blank>详情</a></td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.5.0</a></td></tr></tbody></table><p>其中 list 接受一个数组，<strong>只能配置最少 2 个、最多 5 个 tab</strong>。tab 按数组的顺序排序，每个项都是一个对象，其属性值如下：</p><table><thead><tr><th style=text-align:left>属性</th><th style=text-align:left>类型</th><th style=text-align:left>必填</th><th style=text-align:left>说明</th></tr></thead><tbody><tr><td style=text-align:left>pagePath</td><td style=text-align:left>string</td><td style=text-align:left>是</td><td style=text-align:left>页面路径，必须在 pages 中先定义</td></tr><tr><td style=text-align:left>text</td><td style=text-align:left>string</td><td style=text-align:left>是</td><td style=text-align:left>tab 上按钮文字</td></tr><tr><td style=text-align:left>iconPath</td><td style=text-align:left>string</td><td style=text-align:left>否</td><td style=text-align:left>图片路径，icon 大小限制为 40kb，建议尺寸为 81px * 81px，不支持网络图片。 <strong>当 <code>position</code> 为 <code>top</code> 时，不显示 icon。</strong></td></tr><tr><td style=text-align:left>selectedIconPath</td><td style=text-align:left>string</td><td style=text-align:left>否</td><td style=text-align:left>选中时的图片路径，icon 大小限制为 40kb，建议尺寸为 81px * 81px，不支持网络图片。 <strong>当 <code>position</code> 为 <code>top</code> 时，不显示 icon。</strong></td></tr></tbody></table><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401201556765.png><img src=https://qiniu.waite.wang/202401201556765.png alt=img></a></div></p><blockquote><p>以下是一个简单示例</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=s2>&#34;tabBar&#34;</span><span class=err>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=nt>&#34;color&#34;</span><span class=p>:</span> <span class=s2>&#34;#00A95E&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=nt>&#34;selectedColor&#34;</span><span class=p>:</span> <span class=s2>&#34;#FA8072&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=nt>&#34;backgroundColor&#34;</span><span class=p>:</span> <span class=s2>&#34;#f5f5f5&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=nt>&#34;borderStyle&#34;</span><span class=p>:</span> <span class=s2>&#34;black&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=nt>&#34;list&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;pagePath&#34;</span><span class=p>:</span> <span class=s2>&#34;pages/index/index&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;Index&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;iconPath&#34;</span><span class=p>:</span> <span class=s2>&#34;icon/_home.png&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;selectedIconPath&#34;</span><span class=p>:</span> <span class=s2>&#34;icon/home.png&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;pagePath&#34;</span><span class=p>:</span> <span class=s2>&#34;pages/logs/logs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;Logs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;iconPath&#34;</span><span class=p>:</span> <span class=s2>&#34;icon/_search.png&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;selectedIconPath&#34;</span><span class=p>:</span> <span class=s2>&#34;icon/search.png&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;pagePath&#34;</span><span class=p>:</span> <span class=s2>&#34;pages/demo/demo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;Demo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;iconPath&#34;</span><span class=p>:</span> <span class=s2>&#34;icon/_videocamera.png&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;selectedIconPath&#34;</span><span class=p>:</span> <span class=s2>&#34;icon/videocamera.png&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401201601641.png><img src=https://qiniu.waite.wang/202401201601641.png alt=image-20240120160151572></a></div></p><h4 id=networktimeout>networkTimeout<a hidden class=anchor aria-hidden=true href=#networktimeout>#</a></h4><p>各类网络请求的超时时间，单位均为毫秒。</p><table><thead><tr><th style=text-align:left>属性</th><th style=text-align:left>类型</th><th style=text-align:left>必填</th><th style=text-align:left>默认值</th><th style=text-align:left>说明</th></tr></thead><tbody><tr><td style=text-align:left>request</td><td style=text-align:left>number</td><td style=text-align:left>否</td><td style=text-align:left>60000</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html target=_blank>wx.request</a> 的超时时间，单位：毫秒。</td></tr><tr><td style=text-align:left>connectSocket</td><td style=text-align:left>number</td><td style=text-align:left>否</td><td style=text-align:left>60000</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/api/network/websocket/wx.connectSocket.html target=_blank>wx.connectSocket</a> 的超时时间，单位：毫秒。</td></tr><tr><td style=text-align:left>uploadFile</td><td style=text-align:left>number</td><td style=text-align:left>否</td><td style=text-align:left>60000</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/api/network/upload/wx.uploadFile.html target=_blank>wx.uploadFile</a> 的超时时间，单位：毫秒。</td></tr><tr><td style=text-align:left>downloadFile</td><td style=text-align:left>number</td><td style=text-align:left>否</td><td style=text-align:left>60000</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/api/network/download/wx.downloadFile.html target=_blank>wx.downloadFile</a> 的超时时间，单位：毫秒</td></tr></tbody></table><h4 id=debug>debug<a hidden class=anchor aria-hidden=true href=#debug>#</a></h4><p>可以在开发者工具中开启 <code>debug</code> 模式，在开发者工具的控制台面板，调试信息以 <code>info</code> 的形式给出，其信息有 Page 的注册，页面路由，数据更新，事件触发等。可以帮助开发者快速定位一些常见的问题。</p><h3 id=页面配置>页面配置<a hidden class=anchor aria-hidden=true href=#页面配置>#</a></h3><p>app.json 中的部分配置，也支持对单个页面进行配置，可以在页面对应的 <code>.json</code> 文件来对本页面的表现进行配置。</p><p>页面中配置项在当前页面会覆盖 <code>app.json</code> 中相同的配置项（样式相关的配置项属于 <code>app.json</code> 中的 <code>window</code> 属性，但这里不需要额外指定 <code>window</code> 字段），具体的取值和含义可参考
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html target=_blank>全局配置文档</a>中说明。</p><p>文件内容为一个 JSON 对象，有以下属性：</p><table><thead><tr><th style=text-align:left>属性</th><th style=text-align:left>类型</th><th style=text-align:left>默认值</th><th style=text-align:left>描述</th><th style=text-align:left>最低版本</th></tr></thead><tbody><tr><td style=text-align:left>navigationBarBackgroundColor</td><td style=text-align:left>HexColor</td><td style=text-align:left>#000000</td><td style=text-align:left>导航栏背景颜色，如 <code>#000000</code></td><td style=text-align:left></td></tr><tr><td style=text-align:left>navigationBarTextStyle</td><td style=text-align:left>string</td><td style=text-align:left>white</td><td style=text-align:left>导航栏标题、状态栏颜色，仅支持 <code>black</code> / <code>white</code></td><td style=text-align:left></td></tr><tr><td style=text-align:left>navigationBarTitleText</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>导航栏标题文字内容</td><td style=text-align:left></td></tr><tr><td style=text-align:left>navigationStyle</td><td style=text-align:left>string</td><td style=text-align:left>default</td><td style=text-align:left>导航栏样式，仅支持以下值： <code>default</code> 默认样式 <code>custom</code> 自定义导航栏，只保留右上角胶囊按钮。</td><td style=text-align:left>iOS/Android 微信客户端 7.0.0，Windows 微信客户端不支持</td></tr><tr><td style=text-align:left>homeButton</td><td style=text-align:left>boolean</td><td style=text-align:left>false</td><td style=text-align:left>在非首页、非页面栈最底层页面或非tabbar内页面中的导航栏展示home键</td><td style=text-align:left>微信客户端 8.0.24</td></tr><tr><td style=text-align:left>backgroundColor</td><td style=text-align:left>HexColor</td><td style=text-align:left>#ffffff</td><td style=text-align:left>窗口的背景色</td><td style=text-align:left></td></tr><tr><td style=text-align:left>backgroundColorContent</td><td style=text-align:left>HexColor</td><td style=text-align:left>#RRGGBBAA</td><td style=text-align:left>页面容器背景色，
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/runtime/skyline/custom-route.html#%e8%ae%be%e7%bd%ae%e9%a1%b5%e9%9d%a2%e9%80%8f%e6%98%8e target=_blank>点击查看设置背景色详情</a></td><td style=text-align:left></td></tr><tr><td style=text-align:left>backgroundTextStyle</td><td style=text-align:left>string</td><td style=text-align:left>dark</td><td style=text-align:left>下拉 loading 的样式，仅支持 <code>dark</code> / <code>light</code></td><td style=text-align:left></td></tr><tr><td style=text-align:left>backgroundColorTop</td><td style=text-align:left>string</td><td style=text-align:left>#ffffff</td><td style=text-align:left>顶部窗口的背景色，仅 iOS 支持</td><td style=text-align:left>微信客户端 6.5.16</td></tr><tr><td style=text-align:left>backgroundColorBottom</td><td style=text-align:left>string</td><td style=text-align:left>#ffffff</td><td style=text-align:left>底部窗口的背景色，仅 iOS 支持</td><td style=text-align:left>微信客户端 6.5.16</td></tr><tr><td style=text-align:left>enablePullDownRefresh</td><td style=text-align:left>boolean</td><td style=text-align:left>false</td><td style=text-align:left>是否开启当前页面下拉刷新。 详见
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onpulldownrefresh target=_blank>Page.onPullDownRefresh</a></td><td style=text-align:left></td></tr><tr><td style=text-align:left>onReachBottomDistance</td><td style=text-align:left>number</td><td style=text-align:left>50</td><td style=text-align:left>页面上拉触底事件触发时距页面底部距离，单位为px。 详见
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onreachbottom target=_blank>Page.onReachBottom</a></td><td style=text-align:left></td></tr><tr><td style=text-align:left>pageOrientation</td><td style=text-align:left>string</td><td style=text-align:left>portrait</td><td style=text-align:left>屏幕旋转设置，支持 <code>auto</code> / <code>portrait</code> / <code>landscape</code> 详见
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/view/resizable.html target=_blank>响应显示区域变化</a></td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.4.0</a> (auto) /
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.5.0</a> (landscape)</td></tr><tr><td style=text-align:left>disableScroll</td><td style=text-align:left>boolean</td><td style=text-align:left>false</td><td style=text-align:left>设置为 <code>true</code> 则页面整体不能上下滚动。 只在页面配置中有效，无法在 <code>app.json</code> 中设置</td><td style=text-align:left></td></tr><tr><td style=text-align:left>usingComponents</td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>页面
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/ target=_blank>自定义组件</a>配置</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.6.3</a></td></tr><tr><td style=text-align:left>initialRenderingCache</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>页面
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/view/initial-rendering-cache.html target=_blank>初始渲染缓存</a>配置，支持 <code>static</code> / <code>dynamic</code></td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.11.1</a></td></tr><tr><td style=text-align:left>style</td><td style=text-align:left>string</td><td style=text-align:left>default</td><td style=text-align:left>启用新版的组件样式</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.10.2</a></td></tr><tr><td style=text-align:left>singlePage</td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>单页模式相关配置</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.12.0</a></td></tr><tr><td style=text-align:left>restartStrategy</td><td style=text-align:left>string</td><td style=text-align:left>homePage</td><td style=text-align:left>重新启动策略配置</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.8.0</a></td></tr><tr><td style=text-align:left>handleWebviewPreload</td><td style=text-align:left>string</td><td style=text-align:left>static</td><td style=text-align:left>控制
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/performance/tips/runtime_nav.html#_2-4-%e6%8e%a7%e5%88%b6%e9%a2%84%e5%8a%a0%e8%bd%bd%e4%b8%8b%e4%b8%aa%e9%a1%b5%e9%9d%a2%e7%9a%84%e6%97%b6%e6%9c%ba target=_blank>预加载下个页面的时机</a>。支持 <code>static</code> / <code>manual</code> / <code>auto</code></td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.15.0</a></td></tr><tr><td style=text-align:left>visualEffectInBackground</td><td style=text-align:left>string</td><td style=text-align:left>否</td><td style=text-align:left>切入系统后台时，隐藏页面内容，保护用户隐私。支持 <code>hidden</code> / <code>none</code>，若对页面单独设置则会覆盖全局的配置，详见
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html target=_blank>全局配置</a></td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.15.0</a></td></tr><tr><td style=text-align:left>enablePassiveEvent</td><td style=text-align:left>Object或boolean</td><td style=text-align:left>否</td><td style=text-align:left>事件监听是否为 passive，若对页面单独设置则会覆盖全局的配置，详见
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html target=_blank>全局配置</a></td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.24.1</a></td></tr><tr><td style=text-align:left>renderer</td><td style=text-align:left>string</td><td style=text-align:left>否</td><td style=text-align:left>渲染后端</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.30.4</a></td></tr><tr><td style=text-align:left>rendererOptions</td><td style=text-align:left>Object</td><td style=text-align:left>否</td><td style=text-align:left>渲染后端选项，详情
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html target=_blank>相关文档</a></td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>3.1.0</a></td></tr><tr><td style=text-align:left>componentFramework</td><td style=text-align:left>string</td><td style=text-align:left>否</td><td style=text-align:left>组件框架，详情
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/glass-easel/migration.html target=_blank>相关文档</a></td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.30.4</a></td></tr></tbody></table><ul><li>注：并不是所有 <code>app.json</code> 中的配置都可以在页面覆盖或单独指定，仅限于本文档包含的选项。</li><li>注：iOS/Android 客户端 7.0.0 以下版本，<code>navigationStyle</code> 只在 <code>app.json</code> 中生效。</li></ul><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401201608866.png><img src=https://qiniu.waite.wang/202401201608866.png alt=image-20240120160819935></a></div></p><h3 id=wxss>WXSS<a hidden class=anchor aria-hidden=true href=#wxss>#</a></h3><p>WXSS (WeiXin Style Sheets)是一套样式语言，用于描述 WXML 的组件样式。</p><p>WXSS 用来决定 WXML 的组件应该怎么显示。</p><p>为了适应广大的前端开发者，WXSS 具有 CSS 大部分特性。同时为了更适合开发微信小程序，WXSS 对 CSS 进行了扩充以及修改。</p><p>与 CSS 相比，WXSS 扩展的特性有：</p><ul><li>尺寸单位</li><li>样式导入</li></ul><h4 id=尺寸单位>尺寸单位<a hidden class=anchor aria-hidden=true href=#尺寸单位>#</a></h4><ul><li>rpx（responsive pixel）: 可以根据屏幕宽度进行自适应。规定屏幕宽为750rpx。如在 iPhone6 上，屏幕宽度为375px，共有750个物理像素，则750rpx = 375px = 750物理像素，1rpx = 0.5px = 1物理像素。</li></ul><table><thead><tr><th style=text-align:left>设备</th><th style=text-align:left>rpx换算px (屏幕宽度/750)</th><th style=text-align:left>px换算rpx (750/屏幕宽度)</th></tr></thead><tbody><tr><td style=text-align:left>iPhone5</td><td style=text-align:left>1rpx = 0.42px</td><td style=text-align:left>1px = 2.34rpx</td></tr><tr><td style=text-align:left>iPhone6</td><td style=text-align:left>1rpx = 0.5px</td><td style=text-align:left>1px = 2rpx</td></tr><tr><td style=text-align:left>iPhone6 Plus</td><td style=text-align:left>1rpx = 0.552px</td><td style=text-align:left>1px = 1.81rpx</td></tr></tbody></table><p><strong>建议：</strong> 开发微信小程序时设计师可以用 iPhone6 作为视觉稿的标准。</p><p><strong>注意：</strong> 在较小的屏幕上不可避免的会有一些毛刺，请在开发时尽量避免这种情况。</p><h4 id=样式导入>样式导入<a hidden class=anchor aria-hidden=true href=#样式导入>#</a></h4><p>使用<code>@import</code>语句可以导入外联样式表，<code>@import</code>后跟需要导入的外联样式表的相对路径，用<code>;</code>表示语句结束。</p><p><strong>示例代码：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>/** common.wxss **/
</span></span><span class=line><span class=cl>.small-p {
</span></span><span class=line><span class=cl>  padding:5px;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>/** app.wxss **/
</span></span><span class=line><span class=cl>@import &#34;common.wxss&#34;;
</span></span><span class=line><span class=cl>.middle-p {
</span></span><span class=line><span class=cl>  padding:15px;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=内联样式>内联样式<a hidden class=anchor aria-hidden=true href=#内联样式>#</a></h4><p>框架组件上支持使用 style、class 属性来控制组件的样式。</p><ul><li>style：静态的样式统一写到 class 中。style 接收动态的样式，在运行时会进行解析，请尽量避免将静态的样式写进 style 中，以免影响渲染速度。</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;color:{{color}};&#34;</span> <span class=p>/&gt;</span>
</span></span></code></pre></div><ul><li>class：用于指定样式规则，其属性值是样式规则中类选择器名(样式类名)的集合，样式类名不需要带上<code>.</code>，样式类名之间用空格分隔。</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;normal_view&#34;</span> <span class=p>/&gt;</span>
</span></span></code></pre></div><h4 id=选择器>选择器<a hidden class=anchor aria-hidden=true href=#选择器>#</a></h4><p>目前支持的选择器有：</p><table><thead><tr><th style=text-align:left>选择器</th><th style=text-align:left>样例</th><th style=text-align:left>样例描述</th></tr></thead><tbody><tr><td style=text-align:left>.class</td><td style=text-align:left><code>.intro</code></td><td style=text-align:left>选择所有拥有 class=&ldquo;intro&rdquo; 的组件</td></tr><tr><td style=text-align:left>#id</td><td style=text-align:left><code>#firstname</code></td><td style=text-align:left>选择拥有 id=&ldquo;firstname&rdquo; 的组件</td></tr><tr><td style=text-align:left>element</td><td style=text-align:left><code>view</code></td><td style=text-align:left>选择所有 view 组件</td></tr><tr><td style=text-align:left>element, element</td><td style=text-align:left><code>view, checkbox</code></td><td style=text-align:left>选择所有文档的 view 组件和所有的 checkbox 组件</td></tr><tr><td style=text-align:left>::after</td><td style=text-align:left><code>view::after</code></td><td style=text-align:left>在 view 组件后边插入内容</td></tr><tr><td style=text-align:left>::before</td><td style=text-align:left><code>view::before</code></td><td style=text-align:left>在 view 组件前边插入内容</td></tr></tbody></table><h4 id=全局样式与局部样式>全局样式与局部样式<a hidden class=anchor aria-hidden=true href=#全局样式与局部样式>#</a></h4><p>定义在 app.wxss 中的样式为全局样式，作用于每一个页面。在 page 的 wxss 文件中定义的样式为局部样式，只作用在对应的页面，并会覆盖 app.wxss 中相同的选择器。</p><h2 id=组件>组件<a hidden class=anchor aria-hidden=true href=#组件>#</a></h2><blockquote><p><a href=https://developers.weixin.qq.com/miniprogram/dev/component/ target=_blank>https://developers.weixin.qq.com/miniprogram/dev/component/</a></p></blockquote><p>html 中有 <code>div、span、ul、li 、img</code>, 而小程序上面所有的标签都没有，只有组件, 微信小程序中的组件就相当于之前HTML中的标签。但是小程序中的组件除了包裹功能，还具有样式和 js 功能。</p><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401201614793.png><img src=https://qiniu.waite.wang/202401201614793.png alt=image-20240120161419501></a></div></p><blockquote><p>以下会介绍一些常用的标签, 剩下的可以在官方文档中查看</p></blockquote><h3 id=视图基础组件>视图/基础组件<a hidden class=anchor aria-hidden=true href=#视图基础组件>#</a></h3><h4 id=view>View<a hidden class=anchor aria-hidden=true href=#view>#</a></h4><p>​ 视图容器，view组件就相当于之前HTML中的div标签。</p><table><thead><tr><th style=text-align:left>属性</th><th style=text-align:left>类型</th><th style=text-align:left>默认值</th><th style=text-align:left>必填</th><th style=text-align:left>说明</th><th style=text-align:left>最低版本</th></tr></thead><tbody><tr><td style=text-align:left>hover-class</td><td style=text-align:left>string</td><td style=text-align:left>none</td><td style=text-align:left>否</td><td style=text-align:left>指定按下去的样式类。当 <code>hover-class="none"</code> 时，没有点击态效果</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left>hover-stop-propagation</td><td style=text-align:left>boolean</td><td style=text-align:left>false</td><td style=text-align:left>否</td><td style=text-align:left>指定是否阻止本节点的祖先节点出现点击态</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.5.0</a></td></tr><tr><td style=text-align:left>hover-start-time</td><td style=text-align:left>number</td><td style=text-align:left>50</td><td style=text-align:left>否</td><td style=text-align:left>按住后多久出现点击态，单位毫秒</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left>hover-stay-time</td><td style=text-align:left>number</td><td style=text-align:left>400</td><td style=text-align:left>否</td><td style=text-align:left>手指松开后点击态保留时间，单位毫秒</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;wrapper&#34;</span> <span class=na>hover-class</span><span class=o>=</span><span class=s>&#34;wrapper-hover&#34;</span> <span class=na>hover-stay-time</span><span class=o>=</span><span class=s>&#34;1000&#34;</span><span class=p>&gt;</span>我的第一个微信程序<span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>.</span><span class=nc>wrapper</span><span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>width</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>height</span><span class=p>:</span> <span class=mi>100</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>text-align</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>line-height</span><span class=p>:</span> <span class=mi>100</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>background-color</span><span class=p>:</span> <span class=kc>skyblue</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>wrapper-hover</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>background-color</span><span class=p>:</span> <span class=kc>pink</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><blockquote><p>以下是一个 Flex 布局的例子</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;container&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;page-body&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;page-section&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;page-section-title&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>text</span><span class=p>&gt;</span>flex-direction: row<span class=p>&lt;/</span><span class=nt>text</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>text</span><span class=p>&gt;</span>横向布局<span class=p>&lt;/</span><span class=nt>text</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;page-section-spacing&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex-wrp&#34;</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;flex-direction:row;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex-item demo-text-1&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex-item demo-text-2&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex-item demo-text-3&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;page-section&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;page-section-title&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>text</span><span class=p>&gt;</span>flex-direction: column<span class=p>&lt;/</span><span class=nt>text</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>text</span><span class=p>&gt;</span>纵向布局<span class=p>&lt;/</span><span class=nt>text</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex-wrp&#34;</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;flex-direction:column;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex-item flex-item-V demo-text-1&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex-item flex-item-V demo-text-2&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex-item flex-item-V demo-text-3&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>.</span><span class=nc>container</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>margin-top</span><span class=p>:</span> <span class=mi>80</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>flex-wrp</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>display</span><span class=p>:</span> <span class=kc>flex</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>flex-item</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>width</span><span class=p>:</span> <span class=mi>200</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>height</span><span class=p>:</span> <span class=mi>300</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>font-size</span><span class=p>:</span> <span class=mi>26</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>flex-item-V</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>margin</span><span class=p>:</span> <span class=mi>0</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>width</span><span class=p>:</span> <span class=mi>300</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>height</span><span class=p>:</span> <span class=mi>200</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>page-section-title</span> <span class=nt>text</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>line-height</span><span class=p>:</span> <span class=mi>36</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>demo-text-1</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>position</span><span class=p>:</span> <span class=kc>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>align-items</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>justify-content</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>background-color</span><span class=p>:</span> <span class=mh>#1AAD19</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>color</span><span class=p>:</span> <span class=mh>#FFFFFF</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>font-size</span><span class=p>:</span> <span class=mi>36</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>demo-text-1</span><span class=p>:</span><span class=nd>before</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>content</span><span class=p>:</span> <span class=s1>&#39;A&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>position</span><span class=p>:</span> <span class=kc>absolute</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>top</span><span class=p>:</span> <span class=mi>50</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>left</span><span class=p>:</span> <span class=mi>50</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>transform</span><span class=p>:</span> <span class=nb>translate</span><span class=p>(</span><span class=mi>-50</span><span class=kt>%</span><span class=p>,</span> <span class=mi>-50</span><span class=kt>%</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>demo-text-2</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>position</span><span class=p>:</span> <span class=kc>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>align-items</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>justify-content</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>background-color</span><span class=p>:</span> <span class=mh>#2782D7</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>color</span><span class=p>:</span> <span class=mh>#FFFFFF</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>font-size</span><span class=p>:</span> <span class=mi>36</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>demo-text-2</span><span class=p>:</span><span class=nd>before</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>content</span><span class=p>:</span> <span class=s1>&#39;B&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>position</span><span class=p>:</span> <span class=kc>absolute</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>top</span><span class=p>:</span> <span class=mi>50</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>left</span><span class=p>:</span> <span class=mi>50</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>transform</span><span class=p>:</span> <span class=nb>translate</span><span class=p>(</span><span class=mi>-50</span><span class=kt>%</span><span class=p>,</span> <span class=mi>-50</span><span class=kt>%</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>demo-text-3</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>position</span><span class=p>:</span> <span class=kc>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>align-items</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>justify-content</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>background-color</span><span class=p>:</span> <span class=mh>#F1F1F1</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>color</span><span class=p>:</span> <span class=mh>#353535</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>font-size</span><span class=p>:</span> <span class=mi>36</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>demo-text-3</span><span class=p>:</span><span class=nd>before</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>content</span><span class=p>:</span> <span class=s1>&#39;C&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>position</span><span class=p>:</span> <span class=kc>absolute</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>top</span><span class=p>:</span> <span class=mi>50</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>left</span><span class=p>:</span> <span class=mi>50</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>transform</span><span class=p>:</span> <span class=nb>translate</span><span class=p>(</span><span class=mi>-50</span><span class=kt>%</span><span class=p>,</span> <span class=mi>-50</span><span class=kt>%</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401201623482.png><img src=https://qiniu.waite.wang/202401201623482.png alt=image-20240120162353536></a></div></p><h4 id=text>text<a hidden class=anchor aria-hidden=true href=#text>#</a></h4><p>​ 文本组件，相当于HTML中的span标签。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>text</span><span class=p>&gt;</span>啦啦啦啦<span class=p>&lt;/</span><span class=nt>text</span><span class=p>&gt;</span>
</span></span></code></pre></div><h4 id=swiper>swiper<a hidden class=anchor aria-hidden=true href=#swiper>#</a></h4><blockquote><p><a href=https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html#%E6%B8%B2%E6%9F%93%E6%A8%A1%E5%BC%8F%E6%95%88%E6%9E%9C%E6%BC%94%E7%A4%BA target=_blank>https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html#%E6%B8%B2%E6%9F%93%E6%A8%A1%E5%BC%8F%E6%95%88%E6%9E%9C%E6%BC%94%E7%A4%BA</a></p></blockquote><p>滑块视图容器。其中只可放置<code>swiper-item</code>组件，否则会导致未定义的行为。也就是说swiper内部只能放swiper-item组件，而swiper-item组件中就可以随便放其它组件及内容了。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>swiper</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;banner&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>swiper-item</span><span class=p>&gt;</span>item1<span class=p>&lt;/</span><span class=nt>swiper-item</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>swiper-item</span><span class=p>&gt;</span>item2<span class=p>&lt;/</span><span class=nt>swiper-item</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>swiper-item</span><span class=p>&gt;</span>item3<span class=p>&lt;/</span><span class=nt>swiper-item</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>swiper</span><span class=p>&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>.</span><span class=nc>banner</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>height</span><span class=p>:</span> <span class=mi>80</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>text-align</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>line-height</span><span class=p>:</span> <span class=mi>80</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>可以看到swiper组件有轮播图的效果。而且它有默认的高度(150px)。</p><table><thead><tr><th style=text-align:left></th><th style=text-align:left>属性</th><th style=text-align:left>类型</th><th style=text-align:left>默认值</th><th style=text-align:left>必填</th><th style=text-align:left>说明</th><th>最低版本</th></tr></thead><tbody><tr><td style=text-align:left></td><td style=text-align:left>indicator-dots</td><td style=text-align:left>boolean</td><td style=text-align:left>false</td><td style=text-align:left>否</td><td style=text-align:left>是否显示面板指示点</td><td><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left></td><td style=text-align:left>indicator-color</td><td style=text-align:left>color</td><td style=text-align:left>rgba(0, 0, 0, .3)</td><td style=text-align:left>否</td><td style=text-align:left>指示点颜色</td><td><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.1.0</a></td></tr><tr><td style=text-align:left></td><td style=text-align:left>indicator-active-color</td><td style=text-align:left>color</td><td style=text-align:left>#000000</td><td style=text-align:left>否</td><td style=text-align:left>当前选中的指示点颜色</td><td><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.1.0</a></td></tr><tr><td style=text-align:left></td><td style=text-align:left>autoplay</td><td style=text-align:left>boolean</td><td style=text-align:left>false</td><td style=text-align:left>否</td><td style=text-align:left>是否自动切换</td><td><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left></td><td style=text-align:left>current</td><td style=text-align:left>number</td><td style=text-align:left>0</td><td style=text-align:left>否</td><td style=text-align:left>当前所在滑块的 index</td><td><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left></td><td style=text-align:left>interval</td><td style=text-align:left>number</td><td style=text-align:left>5000</td><td style=text-align:left>否</td><td style=text-align:left>自动切换时间间隔</td><td><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left></td><td style=text-align:left>duration</td><td style=text-align:left>number</td><td style=text-align:left>500</td><td style=text-align:left>否</td><td style=text-align:left>滑动动画时长</td><td><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left></td><td style=text-align:left>circular</td><td style=text-align:left>boolean</td><td style=text-align:left>false</td><td style=text-align:left>否</td><td style=text-align:left>是否采用衔接滑动</td><td><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left></td><td style=text-align:left>vertical</td><td style=text-align:left>boolean</td><td style=text-align:left>false</td><td style=text-align:left>否</td><td style=text-align:left>滑动方向是否为纵向</td><td><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left></td><td style=text-align:left>display-multiple-items</td><td style=text-align:left>number</td><td style=text-align:left>1</td><td style=text-align:left>否</td><td style=text-align:left>同时显示的滑块数量</td><td><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.9.0</a></td></tr><tr><td style=text-align:left></td><td style=text-align:left>previous-margin</td><td style=text-align:left>string</td><td style=text-align:left>&ldquo;0px&rdquo;</td><td style=text-align:left>否</td><td style=text-align:left>前边距，可用于露出前一项的一小部分，接受 px 和 rpx 值</td><td><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.9.0</a></td></tr></tbody></table><blockquote><p>以下是一个简单的轮播图效果</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>food</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;https://img1.baidu.com/it/u=3033226715,2238019049&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=800&amp;h=500&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;https://img1.baidu.com/it/u=1948650034,2409824853&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=1200&amp;h=675&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;https://img2.baidu.com/it/u=3016274568,4110305242&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=313&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=s1>&#39;https://img2.baidu.com/it/u=2364493189,83457107&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=800&amp;h=500&#39;</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Page</span><span class=p>({</span>
</span></span><span class=line><span class=cl> <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>food</span>
</span></span><span class=line><span class=cl> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;height: 400rpx;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>swiper</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;banner&#34;</span> <span class=na>indicator-dots</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>swiper-item</span> <span class=na>wx:for</span><span class=o>=</span><span class=s>&#34;{{food}}&#34;</span> <span class=na>wx:key</span><span class=o>=</span><span class=s>&#34;*this&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   <span class=p>&lt;</span><span class=nt>image</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;img&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;{{item}}&#34;</span> <span class=na>mode</span><span class=o>=</span><span class=s>&#34;aspectFill&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>swiper-item</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;/</span><span class=nt>swiper</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>.</span><span class=nc>banner</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>height</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>width</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>text-align</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>line-height</span><span class=p>:</span> <span class=mi>80</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><blockquote><p>当然, 在 Skyline 渲染模式下, 他也会有不同的表现, 具体可以看</p><p><a href=https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html#%E6%8C%87%E7%A4%BA%E5%99%A8%E6%95%88%E6%9E%9C%E6%BC%94%E7%A4%BA target=_blank>https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html#%E6%8C%87%E7%A4%BA%E5%99%A8%E6%95%88%E6%9E%9C%E6%BC%94%E7%A4%BA</a></p></blockquote><h4 id=scroll-view>scroll-view<a hidden class=anchor aria-hidden=true href=#scroll-view>#</a></h4><blockquote><p><a href=https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html target=_blank>https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html</a></p></blockquote><p>可滚动视图区域。使用竖向滚动时，需要给
<a href=https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html target=_blank>scroll-view</a>一个固定高度，通过 WXSS 设置 height。组件属性的长度单位默认为px，
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.4.0</a>起支持传入单位(rpx/px)。</p><ol><li>横向滚动需打开 enable-flex 以兼容 WebView，如</li><li>滚动条的长度是预估的，若直接子节点的高度差别较大，则滚动条长度可能会不准确</li><li>使用 <code>worklet</code> 函数需要开启开发者工具 &ldquo;将 JS 编译成 ES5&rdquo; 或 &ldquo;编译 worklet 函数&rdquo; 选项。</li></ol><blockquote><p>以下我会给出 纵向滚动 以及 横向滚动 两个效果, 具体属性可以在官方文档中查看</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;container&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;page-body&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;page-section&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;page-section-title&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>text</span><span class=p>&gt;</span>Vertical Scroll<span class=p>&lt;/</span><span class=nt>text</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>text</span><span class=p>&gt;</span>纵向滚动<span class=p>&lt;/</span><span class=nt>text</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;page-section-spacing&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>scroll-view</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;list&#34;</span> <span class=na>scroll-y</span><span class=o>=</span><span class=s>&#34;true&#34;</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;height: 300rpx;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>view</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;demo1&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;scroll-view-item demo-text-1&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>view</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;demo2&#34;</span>  <span class=na>class</span><span class=o>=</span><span class=s>&#34;scroll-view-item demo-text-2&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>view</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;demo3&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;scroll-view-item demo-text-3&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>scroll-view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;page-section&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;page-section-title&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>text</span><span class=p>&gt;</span>Horizontal Scroll<span class=p>&lt;/</span><span class=nt>text</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>text</span><span class=p>&gt;</span>横向滚动<span class=p>&lt;/</span><span class=nt>text</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;page-section-spacing&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>scroll-view</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;list&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;scroll-view_H&#34;</span>  <span class=na>scroll-x</span><span class=o>=</span><span class=s>&#34;true&#34;</span> <span class=na>bindscroll</span><span class=o>=</span><span class=s>&#34;scroll&#34;</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;width: 100%;height: 300rpx;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>view</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;demo1&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;scroll-view-item_H demo-text-1&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>view</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;demo2&#34;</span>  <span class=na>class</span><span class=o>=</span><span class=s>&#34;scroll-view-item_H demo-text-2&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>view</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;demo3&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;scroll-view-item_H demo-text-3&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>scroll-view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>Page</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>tapMove</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>setData</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>scrollTop</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>scrollTop</span> <span class=o>+</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>.</span><span class=nc>container</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>margin-top</span><span class=p>:</span> <span class=mi>80</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>page-section-spacing</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>margin-top</span><span class=p>:</span> <span class=mi>60</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>scroll-view_H</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>white-space</span><span class=p>:</span> <span class=kc>nowrap</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>scroll-view-item</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>height</span><span class=p>:</span> <span class=mi>300</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>scroll-view-item_H</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>display</span><span class=p>:</span> <span class=kc>inline-block</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>width</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>height</span><span class=p>:</span> <span class=mi>300</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>demo-text-1</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>position</span><span class=p>:</span> <span class=kc>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>align-items</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>justify-content</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>background-color</span><span class=p>:</span> <span class=mh>#1AAD19</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>color</span><span class=p>:</span> <span class=mh>#FFFFFF</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>font-size</span><span class=p>:</span> <span class=mi>36</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>demo-text-1</span><span class=p>::</span><span class=nd>before</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>content</span><span class=p>:</span> <span class=s1>&#39;A&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>position</span><span class=p>:</span> <span class=kc>absolute</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>top</span><span class=p>:</span> <span class=mi>50</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>left</span><span class=p>:</span> <span class=mi>50</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>transform</span><span class=p>:</span> <span class=nb>translate</span><span class=p>(</span><span class=mi>-50</span><span class=kt>%</span><span class=p>,</span> <span class=mi>-50</span><span class=kt>%</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>demo-text-2</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>position</span><span class=p>:</span> <span class=kc>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>align-items</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>justify-content</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>background-color</span><span class=p>:</span> <span class=mh>#2782D7</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>color</span><span class=p>:</span> <span class=mh>#FFFFFF</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>font-size</span><span class=p>:</span> <span class=mi>36</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>demo-text-2</span><span class=p>::</span><span class=nd>before</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>content</span><span class=p>:</span> <span class=s1>&#39;B&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>position</span><span class=p>:</span> <span class=kc>absolute</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>top</span><span class=p>:</span> <span class=mi>50</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>left</span><span class=p>:</span> <span class=mi>50</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>transform</span><span class=p>:</span> <span class=nb>translate</span><span class=p>(</span><span class=mi>-50</span><span class=kt>%</span><span class=p>,</span> <span class=mi>-50</span><span class=kt>%</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>demo-text-3</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>position</span><span class=p>:</span> <span class=kc>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>align-items</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>justify-content</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>background-color</span><span class=p>:</span> <span class=mh>#F1F1F1</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>color</span><span class=p>:</span> <span class=mh>#353535</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>font-size</span><span class=p>:</span> <span class=mi>36</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>demo-text-3</span><span class=p>::</span><span class=nd>before</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>content</span><span class=p>:</span> <span class=s1>&#39;C&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>position</span><span class=p>:</span> <span class=kc>absolute</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>top</span><span class=p>:</span> <span class=mi>50</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>left</span><span class=p>:</span> <span class=mi>50</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>transform</span><span class=p>:</span> <span class=nb>translate</span><span class=p>(</span><span class=mi>-50</span><span class=kt>%</span><span class=p>,</span> <span class=mi>-50</span><span class=kt>%</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><blockquote><p><a href=https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html#scroll-view-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E7%A4%BA%E4%BE%8B target=_blank>https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html#scroll-view-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E7%A4%BA%E4%BE%8B</a></p></blockquote><blockquote><p>以下是横向滚动案例</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- scroll-view --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>scroll-view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;myScroll&#34;</span> <span class=na>scroll-x</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;myScroll.row&#34;</span><span class=p>&gt;</span>1<span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;row&#34;</span><span class=p>&gt;</span>2<span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;row&#34;</span><span class=p>&gt;</span>3<span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;row&#34;</span><span class=p>&gt;</span>4<span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;row&#34;</span><span class=p>&gt;</span>5<span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;row&#34;</span><span class=p>&gt;</span>6<span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;row&#34;</span><span class=p>&gt;</span>7<span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;row&#34;</span><span class=p>&gt;</span>8<span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>scroll-view</span><span class=p>&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>.</span><span class=nc>myScroll</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>width</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>height</span><span class=p>:</span> <span class=mi>220</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>background</span><span class=p>:</span> <span class=mh>#eee</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=c>/* 使文本在不换行的情况下继续显示 */</span>
</span></span><span class=line><span class=cl> <span class=k>white-space</span><span class=p>:</span> <span class=kc>nowrap</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>myScroll</span> <span class=p>.</span><span class=nc>row</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>width</span><span class=p>:</span> <span class=mi>220</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>height</span><span class=p>:</span> <span class=mi>220</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>background</span><span class=p>:</span> <span class=kc>burlywood</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>margin-right</span><span class=p>:</span> <span class=mi>20</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>display</span><span class=p>:</span> <span class=kc>inline-block</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>myScroll</span> <span class=p>.</span><span class=nc>row</span><span class=p>:</span><span class=nd>last-child</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>margin-right</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=icon>icon<a hidden class=anchor aria-hidden=true href=#icon>#</a></h4><p>​ icon组件就是在页面可以显示一个图标。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>icon</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;success&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>icon</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>icon</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;success&#34;</span> <span class=na>size</span><span class=o>=</span><span class=s>&#34;50&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>icon</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>icon</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;warn&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>icon</span><span class=p>&gt;</span>
</span></span></code></pre></div><table><thead><tr><th style=text-align:left>属性</th><th style=text-align:left>类型</th><th style=text-align:left>默认值</th><th style=text-align:left>必填</th><th style=text-align:left>说明</th><th style=text-align:left>最低版本</th></tr></thead><tbody><tr><td style=text-align:left>type</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>是</td><td style=text-align:left>icon的类型，有效值：success, success_no_circle, info, warn, waiting, cancel, download, search, clear</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left>size</td><td style=text-align:left>number/string</td><td style=text-align:left>23</td><td style=text-align:left>否</td><td style=text-align:left>icon的大小，单位默认为px，
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.4.0</a>起支持传入单位(rpx/px)，
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.21.3</a>起支持传入其余单位(rem 等)。</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left>color</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>否</td><td style=text-align:left>icon的颜色，同css的color</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr></tbody></table><h4 id=progress-进度条>progress 进度条<a hidden class=anchor aria-hidden=true href=#progress-进度条>#</a></h4><p>进度条。组件属性的长度单位默认为px，
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.4.0</a>起支持传入单位(rpx/px)。</p><table><thead><tr><th style=text-align:left>属性</th><th style=text-align:left>类型</th><th style=text-align:left>默认值</th><th style=text-align:left>必填</th><th style=text-align:left>说明</th><th style=text-align:left>最低版本</th></tr></thead><tbody><tr><td style=text-align:left>percent</td><td style=text-align:left>number</td><td style=text-align:left></td><td style=text-align:left>否</td><td style=text-align:left>百分比0~100</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left>show-info</td><td style=text-align:left>boolean</td><td style=text-align:left>false</td><td style=text-align:left>否</td><td style=text-align:left>在进度条右侧显示百分比</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left>border-radius</td><td style=text-align:left>number/string</td><td style=text-align:left>0</td><td style=text-align:left>否</td><td style=text-align:left>圆角大小</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.3.1</a></td></tr><tr><td style=text-align:left>font-size</td><td style=text-align:left>number/string</td><td style=text-align:left>16</td><td style=text-align:left>否</td><td style=text-align:left>右侧百分比字体大小</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.3.1</a></td></tr><tr><td style=text-align:left>stroke-width</td><td style=text-align:left>number/string</td><td style=text-align:left>6</td><td style=text-align:left>否</td><td style=text-align:left>进度条线的宽度</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left>color</td><td style=text-align:left>string</td><td style=text-align:left>#09BB07</td><td style=text-align:left>否</td><td style=text-align:left>进度条颜色（请使用activeColor）</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left>activeColor</td><td style=text-align:left>string</td><td style=text-align:left>#09BB07</td><td style=text-align:left>否</td><td style=text-align:left>已选择的进度条的颜色</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left>backgroundColor</td><td style=text-align:left>string</td><td style=text-align:left>#EBEBEB</td><td style=text-align:left>否</td><td style=text-align:left>未选择的进度条的颜色</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left>active</td><td style=text-align:left>boolean</td><td style=text-align:left>false</td><td style=text-align:left>否</td><td style=text-align:left>进度条从左往右的动画</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr><tr><td style=text-align:left>active-mode</td><td style=text-align:left>string</td><td style=text-align:left>backwards</td><td style=text-align:left>否</td><td style=text-align:left>backwards: 动画从头播；forwards：动画从上次结束点接着播</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.7.0</a></td></tr><tr><td style=text-align:left>duration</td><td style=text-align:left>number</td><td style=text-align:left>30</td><td style=text-align:left>否</td><td style=text-align:left>进度增加1%所需毫秒数</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.8.2</a></td></tr><tr><td style=text-align:left>bindactiveend</td><td style=text-align:left>eventhandle</td><td style=text-align:left></td><td style=text-align:left>否</td><td style=text-align:left>动画完成事件</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.4.1</a></td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>progress</span> <span class=na>percent</span><span class=o>=</span><span class=s>&#34;20&#34;</span> <span class=na>show-info</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>progress</span> <span class=na>percent</span><span class=o>=</span><span class=s>&#34;40&#34;</span> <span class=na>stroke-width</span><span class=o>=</span><span class=s>&#34;12&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>progress</span> <span class=na>percent</span><span class=o>=</span><span class=s>&#34;60&#34;</span> <span class=na>color</span><span class=o>=</span><span class=s>&#34;pink&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>progress</span> <span class=na>percent</span><span class=o>=</span><span class=s>&#34;80&#34;</span> <span class=na>active</span> <span class=p>/&gt;</span>
</span></span></code></pre></div><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401210046684.png><img src=https://qiniu.waite.wang/202401210046684.png alt=image-20240121004604493></a></div></p><h3 id=表单组件>表单组件<a hidden class=anchor aria-hidden=true href=#表单组件>#</a></h3><blockquote><p>具体可以在官方文档查看</p></blockquote><h4 id=button>Button<a hidden class=anchor aria-hidden=true href=#button>#</a></h4><blockquote><p><a href=https://developers.weixin.qq.com/miniprogram/dev/component/button.html target=_blank>https://developers.weixin.qq.com/miniprogram/dev/component/button.html</a></p><p>具体属性看官方文档, 可以通过 <code>open-type</code> 配置分享, 打开交流窗口等等功能</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>button</span> <span class=na>size</span><span class=o>=</span><span class=s>&#34;default&#34;</span><span class=p>&gt;</span>按钮1<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>button</span> <span class=na>size</span><span class=o>=</span><span class=s>&#34;mini&#34;</span><span class=p>&gt;</span>按钮2<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>button</span> <span class=na>size</span><span class=o>=</span><span class=s>&#34;mini&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;primary&#34;</span><span class=p>&gt;</span>按钮3<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>button</span> <span class=na>size</span><span class=o>=</span><span class=s>&#34;mini&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;warn&#34;</span><span class=p>&gt;</span>按钮3<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>button</span> <span class=na>size</span><span class=o>=</span><span class=s>&#34;mini&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;primary&#34;</span> <span class=na>open-type</span><span class=o>=</span><span class=s>&#34;share&#34;</span><span class=p>&gt;</span>按钮4<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span></code></pre></div><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401212153960.png><img src=https://qiniu.waite.wang/202401212153960.png alt=image-20240121215332766></a></div></p><h3 id=导航组件>导航组件<a hidden class=anchor aria-hidden=true href=#导航组件>#</a></h3><h4 id=navigator>navigator<a hidden class=anchor aria-hidden=true href=#navigator>#</a></h4><blockquote><p><a href=https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html target=_blank>https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html</a></p><p>navigator组件相当于HTML的超链接标签。</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- 
</span></span></span><span class=line><span class=cl><span class=c>  navigator组件相当于HTML的超链接标签。
</span></span></span><span class=line><span class=cl><span class=c>    target属性：在哪个目标上发生跳转，默认self-当前小程序；
</span></span></span><span class=line><span class=cl><span class=c>    url属性：当前小程序内的跳转链接
</span></span></span><span class=line><span class=cl><span class=c>    open-type属性：指定跳转方式，默认是navigate
</span></span></span><span class=line><span class=cl><span class=c>      navigate：保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面。
</span></span></span><span class=line><span class=cl><span class=c>      redirect：关闭当前页面，跳转到应用内的某个页面。但是不允许跳转到 tabbar 页面。
</span></span></span><span class=line><span class=cl><span class=c>      switchTab：跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面
</span></span></span><span class=line><span class=cl><span class=c>      reLaunch：关闭所有页面，打开到应用内的某个页面
</span></span></span><span class=line><span class=cl><span class=c>      navigateBack：关闭当前页面，返回上一页面或多级页面。
</span></span></span><span class=line><span class=cl><span class=c> --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>navigator</span> <span class=na>target</span><span class=o>=</span><span class=s>&#34;self&#34;</span> <span class=na>url</span><span class=o>=</span><span class=s>&#34;../about/about&#34;</span> <span class=na>open-type</span><span class=o>=</span><span class=s>&#34;switchTab&#34;</span><span class=p>&gt;</span>点我跳转<span class=p>&lt;/</span><span class=nt>navigator</span><span class=p>&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- 导航 
</span></span></span><span class=line><span class=cl><span class=c>跳转到页面，都不写后缀名
</span></span></span><span class=line><span class=cl><span class=c>1、open-type=&#39;navigate&#39; 跳转方式:
</span></span></span><span class=line><span class=cl><span class=c>保留当前页面，跳转应用内的某个页面，但不跳转tabber页面
</span></span></span><span class=line><span class=cl><span class=c>2、open-type=&#34;redirect 关闭当前页面，跳转到应用内的某个页面。但是不允许跳转到 tabbar 页面。 没返回，有返回首页
</span></span></span><span class=line><span class=cl><span class=c>3、open-type=&#34;switchTab&#34;  跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面
</span></span></span><span class=line><span class=cl><span class=c>4、reLaunch 关闭所有页面，打开到应用内的某个页面
</span></span></span><span class=line><span class=cl><span class=c>5、navigateBack 关闭当前页面，返回上一页面或多级页面。标签的话，就是返回上一页。用方法的话，可以指定返回多少级
</span></span></span><span class=line><span class=cl><span class=c>6、exit	退出小程序，`target=&#34;miniProgram&#34;`时生效 需要用真机去测
</span></span></span><span class=line><span class=cl><span class=c>
</span></span></span><span class=line><span class=cl><span class=c>--&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>navigator</span> <span class=na>url</span><span class=o>=</span><span class=s>&#34;../detail/detail&#34;</span><span class=p>&gt;</span>进入详情页<span class=p>&lt;/</span><span class=nt>navigator</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>navigator</span> <span class=na>url</span><span class=o>=</span><span class=s>&#34;../detail/detail&#34;</span> <span class=na>open-type</span><span class=o>=</span><span class=s>&#34;redirect&#34;</span><span class=p>&gt;</span>redirect 进入详情页<span class=p>&lt;/</span><span class=nt>navigator</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>navigator</span> <span class=na>url</span><span class=o>=</span><span class=s>&#34;../index/index&#34;</span> <span class=na>open-type</span><span class=o>=</span><span class=s>&#34;switchTab&#34;</span><span class=p>&gt;</span>跳转到首页<span class=p>&lt;/</span><span class=nt>navigator</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 还可以调tabBar --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>navigator</span> <span class=na>url</span><span class=o>=</span><span class=s>&#34;../detail/detail&#34;</span> <span class=na>open-type</span><span class=o>=</span><span class=s>&#34;reLaunch&#34;</span><span class=p>&gt;</span>reLaunch 到详情页<span class=p>&lt;/</span><span class=nt>navigator</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>navigator</span> <span class=na>open-type</span><span class=o>=</span><span class=s>&#34;exit&#34;</span> <span class=na>target</span><span class=o>=</span><span class=s>&#34;miniProgram&#34;</span><span class=p>&gt;</span>退出小程序<span class=p>&lt;/</span><span class=nt>navigator</span><span class=p>&gt;</span>
</span></span></code></pre></div><h3 id=媒体组件>媒体组件<a hidden class=anchor aria-hidden=true href=#媒体组件>#</a></h3><h4 id=image>image<a hidden class=anchor aria-hidden=true href=#image>#</a></h4><blockquote><p><a href=https://developers.weixin.qq.com/miniprogram/dev/component/image.html target=_blank>https://developers.weixin.qq.com/miniprogram/dev/component/image.html</a></p></blockquote><p>为了保证大小, 可以使用裁剪或者缩放调整大小</p><table><thead><tr><th style=text-align:left></th><th style=text-align:left>属性</th><th style=text-align:left>类型</th><th style=text-align:left>默认值</th><th style=text-align:left>必填</th><th style=text-align:left>说明</th><th style=text-align:left>最低版本</th></tr></thead><tbody><tr><td style=text-align:left></td><td style=text-align:left>show-menu-by-longpress</td><td style=text-align:left>boolean</td><td style=text-align:left>false</td><td style=text-align:left>否</td><td style=text-align:left>长按图片显示发送给朋友、收藏、保存图片、搜一搜、打开名片/前往群聊/打开小程序（若图片中包含对应二维码或小程序码）的菜单。</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.7.0</a></td></tr><tr><td style=text-align:left></td><td style=text-align:left>mode</td><td style=text-align:left>string</td><td style=text-align:left>scaleToFill</td><td style=text-align:left>否</td><td style=text-align:left>图片裁剪、缩放的模式</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.0.0</a></td></tr></tbody></table><table><thead><tr><th style=text-align:left></th><th style=text-align:left></th><th style=text-align:left></th></tr></thead><tbody><tr><td style=text-align:left>合法值</td><td style=text-align:left>说明</td><td style=text-align:left>最低版本</td></tr><tr><td style=text-align:left>scaleToFill</td><td style=text-align:left>缩放模式，不保持纵横比缩放图片，使图片的宽高完全拉伸至填满 image 元素</td><td style=text-align:left></td></tr><tr><td style=text-align:left>aspectFit</td><td style=text-align:left>缩放模式，保持纵横比缩放图片，使图片的长边能完全显示出来。也就是说，可以完整地将图片显示出来。</td><td style=text-align:left></td></tr><tr><td style=text-align:left>aspectFill</td><td style=text-align:left>缩放模式，保持纵横比缩放图片，只保证图片的短边能完全显示出来。也就是说，图片通常只在水平或垂直方向是完整的，另一个方向将会发生截取。</td><td style=text-align:left></td></tr><tr><td style=text-align:left>widthFix</td><td style=text-align:left>缩放模式，宽度不变，高度自动变化，保持原图宽高比不变</td><td style=text-align:left></td></tr><tr><td style=text-align:left>heightFix</td><td style=text-align:left>缩放模式，高度不变，宽度自动变化，保持原图宽高比不变</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.10.3</a></td></tr><tr><td style=text-align:left>top</td><td style=text-align:left>裁剪模式，不缩放图片，只显示图片的顶部区域。仅 Webview 支持。</td><td style=text-align:left></td></tr><tr><td style=text-align:left>bottom</td><td style=text-align:left>裁剪模式，不缩放图片，只显示图片的底部区域。仅 Webview 支持。</td><td style=text-align:left></td></tr><tr><td style=text-align:left>center</td><td style=text-align:left>裁剪模式，不缩放图片，只显示图片的中间区域。仅 Webview 支持。</td><td style=text-align:left></td></tr><tr><td style=text-align:left>left</td><td style=text-align:left>裁剪模式，不缩放图片，只显示图片的左边区域。仅 Webview 支持。</td><td style=text-align:left></td></tr><tr><td style=text-align:left>right</td><td style=text-align:left>裁剪模式，不缩放图片，只显示图片的右边区域。仅 Webview 支持。</td><td style=text-align:left></td></tr><tr><td style=text-align:left>top left</td><td style=text-align:left>裁剪模式，不缩放图片，只显示图片的左上边区域。仅 Webview 支持。</td><td style=text-align:left></td></tr><tr><td style=text-align:left>top right</td><td style=text-align:left>裁剪模式，不缩放图片，只显示图片的右上边区域。仅 Webview 支持。</td><td style=text-align:left></td></tr><tr><td style=text-align:left>bottom left</td><td style=text-align:left>裁剪模式，不缩放图片，只显示图片的左下边区域。仅 Webview 支持。</td><td style=text-align:left></td></tr><tr><td style=text-align:left>bottom right</td><td style=text-align:left>裁剪模式，不缩放图片，只显示图片的右下边区域。仅 Webview 支持。</td><td style=text-align:left></td></tr></tbody></table><blockquote><p>可以在
<a href=https://developers.weixin.qq.com/miniprogram/dev/component/image.html#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81 target=_blank>https://developers.weixin.qq.com/miniprogram/dev/component/image.html#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81</a> 查看示例代码</p></blockquote><h3 id=地图组件>地图组件<a hidden class=anchor aria-hidden=true href=#地图组件>#</a></h3><blockquote><p><a href=https://developers.weixin.qq.com/miniprogram/dev/component/map.html target=_blank>https://developers.weixin.qq.com/miniprogram/dev/component/map.html</a></p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- 
</span></span></span><span class=line><span class=cl><span class=c>  latitude：维度
</span></span></span><span class=line><span class=cl><span class=c>  longitude：经度
</span></span></span><span class=line><span class=cl><span class=c> --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>map</span> <span class=na>longitude</span><span class=o>=</span><span class=s>&#34;115&#34;</span> <span class=na>latitude</span><span class=o>=</span><span class=s>&#34;39&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>map</span><span class=p>&gt;</span>
</span></span></code></pre></div><h2 id=框架>框架<a hidden class=anchor aria-hidden=true href=#框架>#</a></h2><p>​ 小程序依赖于微信客户端提供的环境&ndash;宿主环境，小程序借助这个宿注环境提供的功能，可以实现网页无法实现的功能。让小程序更接近原生的app体验。</p><p>小程序开发框架的目标是通过尽可能简单、高效的方式让开发者可以在微信中开发具有原生 APP 体验的服务。</p><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401222127287.png><img src=https://qiniu.waite.wang/202401222127287.png alt></a></div></p><p>​ 首先，我们来简单了解下小程序的运行环境。整个小程序框架系统分为两部分：<strong>
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/ target=_blank>逻辑层</a></strong>（App Service）和 <strong><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/view/ target=_blank>视图层</a></strong>（View）。小程序提供了自己的视图层描述语言 <code>WXML</code> 和 <code>WXSS</code>，以及基于 <code>JavaScript</code> 的逻辑层框架，并在视图层与逻辑层间提供了数据传输和事件系统，让开发者能够专注于数据与逻辑。</p><p>​ 小程序的渲染层和逻辑层分别由2个线程管理：渲染层的界面使用了WebView 进行渲染；逻辑层采用JsCore线程运行JS脚本。一个小程序存在多个界面，所以渲染层存在多个WebView线程，这两个线程的通信会经由微信客户端（下文中也会采用Native来代指微信客户端）做中转，逻辑层发送网络请求也经由Native转发，小程序的通信模型下图所示。</p><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401222127418.png><img src=https://qiniu.waite.wang/202401222127418.png alt></a></div></p><h3 id=响应的数据绑定>响应的数据绑定<a hidden class=anchor aria-hidden=true href=#响应的数据绑定>#</a></h3><p>框架的核心是一个响应的数据绑定系统，可以让数据与视图非常简单地保持同步。当做数据修改的时候，只需要在逻辑层修改数据，视图层就会做相应的更新。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- This is our View --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span><span class=p>&gt;</span> Hello {{name}}! <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>button</span> <span class=na>bindtap</span><span class=o>=</span><span class=s>&#34;changeName&#34;</span><span class=p>&gt;</span> Click me! <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// This is our App Service.
</span></span></span><span class=line><span class=cl><span class=c1>// This is our data.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>helloData</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Weixin&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Register a Page.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Page</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=o>:</span> <span class=nx>helloData</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>changeName</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// sent data change to view
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>this</span><span class=p>.</span><span class=nx>setData</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;MINA&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><ul><li>开发者通过框架将逻辑层数据中的 <code>name</code> 与视图层的 <code>name</code> 进行了绑定，所以在页面一打开的时候会显示 <code>Hello Weixin!</code>；</li><li>当点击按钮的时候，视图层会发送 <code>changeName</code> 的事件给逻辑层，逻辑层找到并执行对应的事件处理函数；</li><li>回调函数触发后，逻辑层执行 <code>setData</code> 的操作，将 <code>data</code> 中的 <code>name</code> 从 <code>Weixin</code> 变为 <code>MINA</code>，因为该数据和视图层已经绑定了，从而视图层会自动改变为 <code>Hello MINA!</code>。</li></ul><h3 id=逻辑层>逻辑层<a hidden class=anchor aria-hidden=true href=#逻辑层>#</a></h3><p>小程序开发框架的逻辑层使用 <code>JavaScript</code> 引擎为小程序提供开发 <code>JavaScript</code> 代码的运行环境以及微信小程序的特有功能。</p><p>逻辑层将数据进行处理后发送给视图层，同时接受视图层的事件反馈。</p><p>开发者写的所有代码最终将会打包成一份 <code>JavaScript</code> 文件，并在小程序启动的时候运行，直到小程序销毁。这一行为类似
<a href=https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API target=_blank>ServiceWorker</a>，所以逻辑层也称之为 App Service。</p><p>在 <code>JavaScript</code> 的基础上，我们增加了一些功能，以方便小程序的开发：</p><ul><li>增加 <code>App</code> 和 <code>Page</code> 方法，进行
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/app.html target=_blank>程序注册</a>和
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html target=_blank>页面注册</a>。</li><li>增加 <code>getApp</code> 和 <code>getCurrentPages</code> 方法，分别用来获取 <code>App</code> 实例和当前页面栈。</li><li>提供丰富的
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/api.html target=_blank>API</a>，如微信用户数据，扫一扫，支付等微信特有能力。</li><li>提供
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/module.html#%e6%a8%a1%e5%9d%97%e5%8c%96 target=_blank>模块化</a>能力，每个页面有独立的
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/module.html#%e6%96%87%e4%bb%b6%e4%bd%9c%e7%94%a8%e5%9f%9f target=_blank>作用域</a>。</li></ul><p><strong>注意：小程序框架的逻辑层并非运行在浏览器中，因此 <code>JavaScript</code> 在 web 中一些能力都无法使用，如 <code>window</code>，<code>document</code> 等。</strong></p><h4 id=注册小程序>注册小程序<a hidden class=anchor aria-hidden=true href=#注册小程序>#</a></h4><p>每个小程序都需要在 <code>app.js</code> 中调用 <code>App</code> 方法注册小程序实例，绑定生命周期回调函数、错误监听和页面不存在监听函数等。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// app.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>App</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>onLaunch</span> <span class=p>(</span><span class=nx>options</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Do something initial when launch.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onShow</span> <span class=p>(</span><span class=nx>options</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Do something when show.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onHide</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Do something when hide.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onError</span> <span class=p>(</span><span class=nx>msg</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>msg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>globalData</span><span class=o>:</span> <span class=s1>&#39;I am global data&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><table><thead><tr><th style=text-align:left>属性</th><th style=text-align:left>类型</th><th style=text-align:left>默认值</th><th style=text-align:left>必填</th><th style=text-align:left>说明</th><th style=text-align:left>最低版本</th></tr></thead><tbody><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html#onLaunch-Object-object target=_blank>onLaunch</a></td><td style=text-align:left>function</td><td style=text-align:left></td><td style=text-align:left>否</td><td style=text-align:left>生命周期回调——监听小程序初始化。</td><td style=text-align:left></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html#onShow-Object-object target=_blank>onShow</a></td><td style=text-align:left>function</td><td style=text-align:left></td><td style=text-align:left>否</td><td style=text-align:left>生命周期回调——监听小程序启动或切前台。</td><td style=text-align:left></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html#onHide target=_blank>onHide</a></td><td style=text-align:left>function</td><td style=text-align:left></td><td style=text-align:left>否</td><td style=text-align:left>生命周期回调——监听小程序切后台。</td><td style=text-align:left></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html#onError-String-error target=_blank>onError</a></td><td style=text-align:left>function</td><td style=text-align:left></td><td style=text-align:left>否</td><td style=text-align:left>错误监听函数。</td><td style=text-align:left></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html#onPageNotFound-Object-object target=_blank>onPageNotFound</a></td><td style=text-align:left>function</td><td style=text-align:left></td><td style=text-align:left>否</td><td style=text-align:left>页面不存在监听函数。</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>1.9.90</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html#onUnhandledRejection-Object-object target=_blank>onUnhandledRejection</a></td><td style=text-align:left>function</td><td style=text-align:left></td><td style=text-align:left>否</td><td style=text-align:left>未处理的 Promise 拒绝事件监听函数。</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.10.0</a></td></tr><tr><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/api/App.html#onThemeChange-Object-object target=_blank>onThemeChange</a></td><td style=text-align:left>function</td><td style=text-align:left></td><td style=text-align:left>否</td><td style=text-align:left>监听系统主题变化</td><td style=text-align:left><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.11.0</a></td></tr><tr><td style=text-align:left>其他</td><td style=text-align:left>any</td><td style=text-align:left></td><td style=text-align:left>否</td><td style=text-align:left>开发者可以添加任意的函数或数据变量到 <code>Object</code> 参数中，用 <code>this</code> 可以访问</td><td style=text-align:left></td></tr></tbody></table><p>整个小程序只有一个 App 实例，是全部页面共享的。开发者可以通过 <code>getApp</code> 方法获取到全局唯一的 App 实例，获取App上的数据或调用开发者注册在 <code>App</code> 上的函数。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// xxx.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>appInstance</span> <span class=o>=</span> <span class=nx>getApp</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>appInstance</span><span class=p>.</span><span class=nx>globalData</span><span class=p>)</span> <span class=c1>// I am global data
</span></span></span></code></pre></div><h4 id=注册页面>注册页面<a hidden class=anchor aria-hidden=true href=#注册页面>#</a></h4><p>对于小程序中的每个页面，都需要在页面对应的 <code>js</code> 文件中进行注册，指定页面的初始数据、生命周期回调、事件处理函数等。</p><h5 id=使用-page-构造器注册页>使用 Page 构造器注册页<a hidden class=anchor aria-hidden=true href=#使用-page-构造器注册页>#</a></h5><p>简单的页面可以使用 <code>Page()</code> 进行构造。</p><p><strong>代码示例：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>//index.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Page</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>text</span><span class=o>:</span> <span class=s2>&#34;This is page data.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onLoad</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>options</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 页面创建时执行
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onShow</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 页面出现在前台时执行
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onReady</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 页面首次渲染完毕时执行
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onHide</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 页面从前台变为后台时执行
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onUnload</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 页面销毁时执行
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onPullDownRefresh</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 触发下拉刷新时执行
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onReachBottom</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 页面触底时执行
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onShareAppMessage</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 页面被用户分享时执行
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onPageScroll</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 页面滚动时执行
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onResize</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 页面尺寸变化时执行
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onTabItemTap</span><span class=p>(</span><span class=nx>item</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// tab 点击时执行
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>item</span><span class=p>.</span><span class=nx>index</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>item</span><span class=p>.</span><span class=nx>pagePath</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>item</span><span class=p>.</span><span class=nx>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 事件响应函数
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>viewTap</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>setData</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>text</span><span class=o>:</span> <span class=s1>&#39;Set some data for updating view.&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// this is setData callback
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 自由数据
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>customData</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>hi</span><span class=o>:</span> <span class=s1>&#39;MINA&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><p>详细的参数含义和使用请参考
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html target=_blank>Page 参考文档</a></p><h4 id=页面生命周期>页面生命周期<a hidden class=anchor aria-hidden=true href=#页面生命周期>#</a></h4><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202401222133494.png><img src=https://qiniu.waite.wang/202401222133494.png alt=img></a></div></p><h4 id=模块化>模块化<a hidden class=anchor aria-hidden=true href=#模块化>#</a></h4><p>可以将一些公共的代码抽离成为一个单独的 js 文件，作为一个模块。模块只有通过
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/api/module.html target=_blank><code>module.exports</code></a> 或者 <code>exports</code> 才能对外暴露接口。</p><p>注意：</p><ul><li><code>exports</code> 是
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/api/module.html target=_blank><code>module.exports</code></a> 的一个引用，因此在模块里边随意更改 <code>exports</code> 的指向会造成未知的错误。所以更推荐开发者采用 <code>module.exports</code> 来暴露模块接口，除非你已经清晰知道这两者的关系。</li><li>小程序目前不支持直接引入 <code>node_modules</code> , 开发者需要使用到 <code>node_modules</code> 时候建议拷贝出相关的代码到小程序的目录中，或者使用小程序支持的
<a href=https://developers.weixin.qq.com/miniprogram/dev/devtools/npm.html target=_blank>npm</a> 功能。</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// common.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>sayHello</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Hello </span><span class=si>${</span><span class=nx>name</span><span class=si>}</span><span class=sb> !`</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>sayGoodbye</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Goodbye </span><span class=si>${</span><span class=nx>name</span><span class=si>}</span><span class=sb> !`</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span><span class=p>.</span><span class=nx>sayHello</span> <span class=o>=</span> <span class=nx>sayHello</span>
</span></span><span class=line><span class=cl><span class=nx>exports</span><span class=p>.</span><span class=nx>sayGoodbye</span> <span class=o>=</span> <span class=nx>sayGoodbye</span>
</span></span></code></pre></div><p>在需要使用这些模块的文件中，使用 <code>require</code> 将公共代码引入</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>common</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;common.js&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>Page</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>helloMINA</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>common</span><span class=p>.</span><span class=nx>sayHello</span><span class=p>(</span><span class=s1>&#39;MINA&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>goodbyeMINA</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>common</span><span class=p>.</span><span class=nx>sayGoodbye</span><span class=p>(</span><span class=s1>&#39;MINA&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><h4 id=文件作用域>文件作用域<a hidden class=anchor aria-hidden=true href=#文件作用域>#</a></h4><p>在 JavaScript 文件中声明的变量和函数只在该文件中有效；不同的文件中可以声明相同名字的变量和函数，不会互相影响。</p><p>通过全局函数 <code>getApp</code> 可以获取全局的应用实例，如果需要全局的数据可以在 <code>App()</code> 中设置，如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// app.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>App</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>globalData</span><span class=o>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=c1>// a.js
</span></span></span><span class=line><span class=cl><span class=c1>// The localValue can only be used in file a.js.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>localValue</span> <span class=o>=</span> <span class=s1>&#39;a&#39;</span>
</span></span><span class=line><span class=cl><span class=c1>// Get the app instance.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>getApp</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1>// Get the global data and change it.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>globalData</span><span class=o>++</span>
</span></span><span class=line><span class=cl><span class=c1>// b.js
</span></span></span><span class=line><span class=cl><span class=c1>// You can redefine localValue in file b.js, without interference with the localValue in a.js.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>localValue</span> <span class=o>=</span> <span class=s1>&#39;b&#39;</span>
</span></span><span class=line><span class=cl><span class=c1>// If a.js it run before b.js, now the globalData shoule be 2.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>getApp</span><span class=p>().</span><span class=nx>globalData</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=api>API<a hidden class=anchor aria-hidden=true href=#api>#</a></h4><blockquote><p>详细见
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/api.html#API target=_blank>https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/api.html#API</a></p></blockquote><h3 id=视图层>视图层<a hidden class=anchor aria-hidden=true href=#视图层>#</a></h3><h4 id=wxml>WXML<a hidden class=anchor aria-hidden=true href=#wxml>#</a></h4><h5 id=数据绑定>数据绑定<a hidden class=anchor aria-hidden=true href=#数据绑定>#</a></h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!--wxml--&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span><span class=p>&gt;</span> {{message}} <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>// page.js
</span></span><span class=line><span class=cl>Page({
</span></span><span class=line><span class=cl>  data: {
</span></span><span class=line><span class=cl>    message: &#39;Hello MINA!&#39;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>})
</span></span></code></pre></div><h5 id=列表渲染>列表渲染<a hidden class=anchor aria-hidden=true href=#列表渲染>#</a></h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!--wxml--&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span> <span class=na>wx:for</span><span class=o>=</span><span class=s>&#34;{{array}}&#34;</span><span class=p>&gt;</span> {{item}} <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>// page.js
</span></span><span class=line><span class=cl>Page({
</span></span><span class=line><span class=cl>  data: {
</span></span><span class=line><span class=cl>    array: [1, 2, 3, 4, 5]
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>})
</span></span></code></pre></div><h5 id=条件渲染>条件渲染<a hidden class=anchor aria-hidden=true href=#条件渲染>#</a></h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!--wxml--&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span> <span class=na>wx:if</span><span class=o>=</span><span class=s>&#34;{{view == &#39;WEBVIEW&#39;}}&#34;</span><span class=p>&gt;</span> WEBVIEW <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span> <span class=na>wx:elif</span><span class=o>=</span><span class=s>&#34;{{view == &#39;APP&#39;}}&#34;</span><span class=p>&gt;</span> APP <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span> <span class=na>wx:else</span><span class=o>=</span><span class=s>&#34;{{view == &#39;MINA&#39;}}&#34;</span><span class=p>&gt;</span> MINA <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>// page.js
</span></span><span class=line><span class=cl>Page({
</span></span><span class=line><span class=cl>  data: {
</span></span><span class=line><span class=cl>    view: &#39;MINA&#39;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>})
</span></span></code></pre></div><h5 id=模板>模板<a hidden class=anchor aria-hidden=true href=#模板>#</a></h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!--wxml--&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;staffName&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    FirstName: {{firstName}}, LastName: {{lastName}}
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;staffName&#34;</span> <span class=na>data</span><span class=o>=</span><span class=s>&#34;{{...staffA}}&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;staffName&#34;</span> <span class=na>data</span><span class=o>=</span><span class=s>&#34;{{...staffB}}&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;staffName&#34;</span> <span class=na>data</span><span class=o>=</span><span class=s>&#34;{{...staffC}}&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>// page.js
</span></span><span class=line><span class=cl>Page({
</span></span><span class=line><span class=cl>  data: {
</span></span><span class=line><span class=cl>    staffA: {firstName: &#39;Hulk&#39;, lastName: &#39;Hu&#39;},
</span></span><span class=line><span class=cl>    staffB: {firstName: &#39;Shang&#39;, lastName: &#39;You&#39;},
</span></span><span class=line><span class=cl>    staffC: {firstName: &#39;Gideon&#39;, lastName: &#39;Lin&#39;}
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>})
</span></span></code></pre></div><h5 id=三目运算符>三目运算符<a hidden class=anchor aria-hidden=true href=#三目运算符>#</a></h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=c1>//&lt;view class=&#34;{{flag?&#39;red&#39;:&#39;green&#39;}}&#34;&gt;是否加样式&lt;/view&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>flag</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>},</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// Register a Page.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Page</span><span class=p>({</span>
</span></span><span class=line><span class=cl> <span class=nx>data</span><span class=o>:</span> <span class=nx>helloData</span><span class=p>,</span>
</span></span><span class=line><span class=cl> <span class=nx>changeName</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// sent data change to view
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>name</span> <span class=o>===</span> <span class=s1>&#39;Weixin&#39;</span> <span class=o>?</span> <span class=s1>&#39;xxx&#39;</span> <span class=o>:</span> <span class=s1>&#39;Weixin&#39;</span>
</span></span><span class=line><span class=cl>  <span class=k>this</span><span class=p>.</span><span class=nx>setData</span><span class=p>({</span>
</span></span><span class=line><span class=cl>   <span class=nx>name</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>name</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><blockquote><p>具体的能力以及使用方式在以下章节查看：</p><p><a href=https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/data.html target=_blank>数据绑定</a>、
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/list.html target=_blank>列表渲染</a>、
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/conditional.html target=_blank>条件渲染</a>、
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/template.html target=_blank>模板</a>、
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/import.html target=_blank>引用</a></p></blockquote><h4 id=wxs>WXS<a hidden class=anchor aria-hidden=true href=#wxs>#</a></h4><p>WXS（WeiXin Script）是内联在 WXML 中的脚本段。通过 WXS 可以在模版中内联少量处理脚本，丰富模板的数据预处理能力。另外， WXS 还可以用来编写简单的
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/view/interactive-animation.html target=_blank>WXS 事件响应函数</a>。</p><p>从语法上看， WXS 类似于有少量限制的 JavaScript 。要完整了解 WXS 语法，请参考
<a href=https://developers.weixin.qq.com/miniprogram/dev/reference/wxs/ target=_blank>WXS 语法参考</a>。</p><p>以下是一些使用 WXS 的简单示例。</p><h5 id=页面渲染>页面渲染<a hidden class=anchor aria-hidden=true href=#页面渲染>#</a></h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!--wxml--&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>wxs</span> <span class=na>module</span><span class=o>=</span><span class=s>&#34;m1&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>var msg = &#34;hello world&#34;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>module.exports.message = msg;
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>wxs</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span><span class=p>&gt;</span> {{m1.message}} <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span></code></pre></div><h5 id=数据处理>数据处理<a hidden class=anchor aria-hidden=true href=#数据处理>#</a></h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// page.js
</span></span><span class=line><span class=cl>Page({
</span></span><span class=line><span class=cl>  data: {
</span></span><span class=line><span class=cl>    array: [1, 2, 3, 4, 5, 1, 2, 3, 4]
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>})
</span></span><span class=line><span class=cl><span class=c>&lt;!--wxml--&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 下面的 getMax 函数，接受一个数组，且返回数组中最大的元素的值 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>wxs</span> <span class=na>module</span><span class=o>=</span><span class=s>&#34;m1&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>var getMax = function(array) {
</span></span><span class=line><span class=cl>  var max = undefined;
</span></span><span class=line><span class=cl>  for (var i = 0; i <span class=p>&lt;</span> <span class=nt>array.length</span><span class=err>;</span> <span class=err>++</span><span class=na>i</span><span class=err>)</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>    <span class=na>max </span><span class=o>=</span> <span class=s>max</span> <span class=err>===</span> <span class=na>undefined</span> <span class=err>?</span>
</span></span><span class=line><span class=cl>      <span class=na>array</span><span class=err>[</span><span class=na>i</span><span class=err>]</span> <span class=na>:</span>
</span></span><span class=line><span class=cl>      <span class=err>(</span><span class=na>max</span> <span class=p>&gt;</span>= array[i] ? max : array[i]);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>  return max;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>module.exports.getMax = getMax;
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>wxs</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 调用 wxs 里面的 getMax 函数，参数为 page.js 里面的 array --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span><span class=p>&gt;</span> {{m1.getMax(array)}} <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span></code></pre></div><h4 id=简易双向绑定>简易双向绑定<a hidden class=anchor aria-hidden=true href=#简易双向绑定>#</a></h4><p>在 WXML 中，普通的属性的绑定是单向的。例如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>input</span> <span class=na>value</span><span class=o>=</span><span class=s>&#34;{{value}}&#34;</span> <span class=p>/&gt;</span>
</span></span></code></pre></div><p>如果使用 <code>this.setData({ value: 'leaf' })</code> 来更新 <code>value</code> ，<code>this.data.value</code> 和输入框的中显示的值都会被更新为 <code>leaf</code> ；但如果用户修改了输入框里的值，却不会同时改变 <code>this.data.value</code> 。</p><p>如果需要在用户输入的同时改变 <code>this.data.value</code> ，需要借助简易双向绑定机制。此时，可以在对应项目之前加入 <code>model:</code> 前缀：</p><p>如果使用 <code>this.setData({ value: 'leaf' })</code> 来更新 <code>value</code> ，<code>this.data.value</code> 和输入框的中显示的值都会被更新为 <code>leaf</code> ；但如果用户修改了输入框里的值，却不会同时改变 <code>this.data.value</code> 。</p><p>如果需要在用户输入的同时改变 <code>this.data.value</code> ，需要借助简易双向绑定机制。此时，可以在对应项目之前加入 <code>model:</code> 前缀：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>input</span> <span class=na>model:value</span><span class=o>=</span><span class=s>&#34;{{value}}&#34;</span> <span class=p>/&gt;</span>
</span></span></code></pre></div><p>这样，如果输入框的值被改变了， <code>this.data.value</code> 也会同时改变。同时， WXML 中所有绑定了 <code>value</code> 的位置也会被一同更新，
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/observer.html target=_blank>数据监听器</a> 也会被正常触发。</p><p><a href=https://developers.weixin.qq.com/s/8jXvobmV7vcj target=_blank>在开发者工具中预览效果</a></p><p>用于双向绑定的表达式有如下限制：</p><ol><li>只能是一个单一字段的绑定，如</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>input</span> <span class=nx>model</span><span class=o>:</span><span class=nx>value</span><span class=o>=</span><span class=s2>&#34;值为 {{value}}&#34;</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>input</span> <span class=nx>model</span><span class=o>:</span><span class=nx>value</span><span class=o>=</span><span class=s2>&#34;{{ a + b }}&#34;</span> <span class=o>/&gt;</span>
</span></span></code></pre></div><p>都是非法的；</p><ol><li>目前，尚不能 data 路径，如</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>input</span> <span class=nx>model</span><span class=o>:</span><span class=nx>value</span><span class=o>=</span><span class=s2>&#34;{{ a.b }}&#34;</span> <span class=o>/&gt;</span>
</span></span></code></pre></div><p>这样的表达式目前暂不支持。</p><blockquote><p>关于微信小程序警告“Do not have handler in component: pages/xxx/xxx. “的解决方法</p></blockquote><p>通过资料查询和微信开发者社区询问，原因是没有绑定bindinput方法，因此我们可以为表单绑定一个空的方法，来解决这个警告</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>input</span> <span class=na>model:value</span><span class=o>=</span><span class=s>&#34;{{name}}&#34;</span> <span class=na>bindinput</span><span class=o>=</span><span class=s>&#34;textCallback&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- js --&gt;</span>
</span></span><span class=line><span class=cl>Page({
</span></span><span class=line><span class=cl> data: helloData,
</span></span><span class=line><span class=cl> changeName: function (e) {
</span></span><span class=line><span class=cl>  // sent data change to view
</span></span><span class=line><span class=cl>  console.log(this.data)
</span></span><span class=line><span class=cl>  this.data.name = this.data.name === &#39;Weixin&#39; ? &#39;xxx&#39; : &#39;Weixin&#39;
</span></span><span class=line><span class=cl>  this.setData({
</span></span><span class=line><span class=cl>   name: this.data.name
</span></span><span class=line><span class=cl>  })
</span></span><span class=line><span class=cl> },
</span></span><span class=line><span class=cl> textCallback: function () {}
</span></span><span class=line><span class=cl>})
</span></span></code></pre></div><h5 id=在自定义组件中传递双向绑定>在自定义组件中传递双向绑定<a hidden class=anchor aria-hidden=true href=#在自定义组件中传递双向绑定>#</a></h5><p>双向绑定同样可以使用在自定义组件上。如下的自定义组件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// custom-component.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Component</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>properties</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>myValue</span><span class=o>:</span> <span class=nb>String</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!--</span> <span class=nx>custom</span><span class=o>-</span><span class=nx>component</span><span class=p>.</span><span class=nx>wxml</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>input</span> <span class=nx>model</span><span class=o>:</span><span class=nx>value</span><span class=o>=</span><span class=s2>&#34;{{myValue}}&#34;</span> <span class=o>/&gt;</span>
</span></span></code></pre></div><p>这个自定义组件将自身的 <code>myValue</code> 属性双向绑定到了组件内输入框的 <code>value</code> 属性上。这样，如果页面这样使用这个组件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>custom-component</span> <span class=na>model:my-value</span><span class=o>=</span><span class=s>&#34;{{pageValue}}&#34;</span> <span class=p>/&gt;</span>
</span></span></code></pre></div><p>当输入框的值变更时，自定义组件的 <code>myValue</code> 属性会同时变更，这样，页面的 <code>this.data.pageValue</code> 也会同时变更，页面 WXML 中所有绑定了 <code>pageValue</code> 的位置也会被一同更新。</p><h5 id=在自定义组件中触发双向绑定更新>在自定义组件中触发双向绑定更新<a hidden class=anchor aria-hidden=true href=#在自定义组件中触发双向绑定更新>#</a></h5><p>自定义组件还可以自己触发双向绑定更新，做法就是：使用 setData 设置自身的属性。例如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// custom-component.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Component</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>properties</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>myValue</span><span class=o>:</span> <span class=nb>String</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>methods</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>update</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 更新 myValue
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>this</span><span class=p>.</span><span class=nx>setData</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>myValue</span><span class=o>:</span> <span class=s1>&#39;leaf&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><p>如果页面这样使用这个组件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>custom-component</span> <span class=na>model:my-value</span><span class=o>=</span><span class=s>&#34;{{pageValue}}&#34;</span> <span class=p>/&gt;</span>
</span></span></code></pre></div><p>当组件使用 <code>setData</code> 更新 <code>myValue</code> 时，页面的 <code>this.data.pageValue</code> 也会同时变更，页面 WXML 中所有绑定了 <code>pageValue</code> 的位置也会被一同更新。</p><h4 id=响应显示区域变化>响应显示区域变化<a hidden class=anchor aria-hidden=true href=#响应显示区域变化>#</a></h4><blockquote><p>具体看
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/view/resizable.html target=_blank>https://developers.weixin.qq.com/miniprogram/dev/framework/view/resizable.html</a></p></blockquote><p>从小程序基础库版本
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.4.0</a> 开始，小程序在手机上支持屏幕旋转。使小程序中的页面支持屏幕旋转的方法是：在 <code>app.json</code> 的 <code>window</code> 段中设置 <code>"pageOrientation": "auto"</code> ，或在页面 json 文件中配置 <code>"pageOrientation": "auto"</code> 。</p><p>以下是在单个页面 json 文件中启用屏幕旋转的示例。</p><p><strong>代码示例：</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;pageOrientation&#34;</span><span class=p>:</span> <span class=s2>&#34;auto&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>如果页面添加了上述声明，则在屏幕旋转时，这个页面将随之旋转，显示区域尺寸也会随着屏幕旋转而变化。</p><p>从小程序基础库版本
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html target=_blank>2.5.0</a> 开始， <code>pageOrientation</code> 还可以被设置为 <code>landscape</code> ，表示固定为横屏显示。</p><h4 id=动画>动画<a hidden class=anchor aria-hidden=true href=#动画>#</a></h4><blockquote><p><a href=https://developers.weixin.qq.com/miniprogram/dev/framework/view/animation.html target=_blank>https://developers.weixin.qq.com/miniprogram/dev/framework/view/animation.html</a></p></blockquote><h4 id=初始渲染缓存>初始渲染缓存<a hidden class=anchor aria-hidden=true href=#初始渲染缓存>#</a></h4><p>小程序页面的初始化分为两个部分。</p><ul><li>逻辑层初始化：载入必需的小程序代码、初始化页面 this 对象（也包括它涉及到的所有自定义组件的 this 对象）、将相关数据发送给视图层。</li><li>视图层初始化：载入必需的小程序代码，然后等待逻辑层初始化完毕并接收逻辑层发送的数据，最后渲染页面。</li></ul><p>在启动页面时，尤其是小程序冷启动、进入第一个页面时，逻辑层初始化的时间较长。在页面初始化过程中，用户将看到小程序的标准载入画面（冷启动时）或可能看到轻微的白屏现象（页面跳转过程中）。</p><p>启用初始渲染缓存，可以使视图层不需要等待逻辑层初始化完毕，而直接提前将页面初始 data 的渲染结果展示给用户，这可以使得页面对用户可见的时间大大提前。它的工作原理如下：</p><ul><li>在小程序页面第一次被打开后，将页面初始数据渲染结果记录下来，写入一个持久化的缓存区域（缓存可长时间保留，但可能因为小程序更新、基础库更新、储存空间回收等原因被清除）；</li><li>在这个页面被第二次打开时，检查缓存中是否还存有这个页面上一次初始数据的渲染结果，如果有，就直接将渲染结果展示出来；</li><li>如果展示了缓存中的渲染结果，这个页面暂时还不能响应用户事件，等到逻辑层初始化完毕后才能响应用户事件。</li></ul><p>利用初始渲染缓存，可以：</p><ul><li>快速展示出页面中永远不会变的部分，如导航栏；</li><li>预先展示一个骨架页，提升用户体验；</li><li>展示自定义的加载提示；</li><li>提前展示广告，等等。</li></ul><h5 id=支持的组件>支持的组件<a hidden class=anchor aria-hidden=true href=#支持的组件>#</a></h5><p>在初始渲染缓存阶段中，复杂组件不能被展示或不能响应交互。</p><p>目前支持的内置组件：</p><ul><li><code>&lt;view /></code></li><li><code>&lt;text /></code></li><li><code>&lt;button /></code></li><li><code>&lt;image /></code></li><li><code>&lt;scroll-view /></code></li><li><code>&lt;rich-text /></code></li></ul><p>自定义组件本身可以被展示（但它们里面用到的内置组件也遵循上述限制）。</p><h5 id=静态初始渲染缓存>静态初始渲染缓存<a hidden class=anchor aria-hidden=true href=#静态初始渲染缓存>#</a></h5><p>若想启用初始渲染缓存，最简单的方法是在页面的 <code>json</code> 文件中添加配置项 <code>"initialRenderingCache": "static"</code> ：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;initialRenderingCache&#34;</span><span class=p>:</span> <span class=s2>&#34;static&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>如果想要对所有页面启用，可以在 <code>app.json</code> 的 <code>window</code> 配置段中添加这个配置：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;window&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;initialRenderingCache&#34;</span><span class=p>:</span> <span class=s2>&#34;static&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>添加这个配置项之后，在手机中预览小程序首页，然后杀死小程序再次进入，就会通过初始渲染缓存来渲染首页。</p><p>注意：这种情况下，初始渲染缓存记录的是页面 data 应用在页面 WXML 上的结果，不包含任何 setData 的结果。</p><p>例如，如果想要在页面中展示出“正在加载”几个字，这几个字受到 <code>loading</code> 数据字段控制：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span> <span class=na>wx:if</span><span class=o>=</span><span class=s>&#34;{{loading}}&#34;</span><span class=p>&gt;</span>正在加载<span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>这种情况下， <code>loading</code> 应当在 <code>data</code> 中指定为 <code>true</code> ，如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// 正确的做法
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Page</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>loading</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><p>而不能通过 <code>setData</code> 将 <code>loading</code> 置为 <code>true</code> ：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// 错误的做法！不要这么做！
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Page</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=o>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onLoad</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>setData</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>loading</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><p>换而言之，这种做法只包含页面 <code>data</code> 的渲染结果，即页面的纯静态成分。</p><h5 id=在初始渲染缓存中添加动态内容>在初始渲染缓存中添加动态内容<a hidden class=anchor aria-hidden=true href=#在初始渲染缓存中添加动态内容>#</a></h5><p>有些场景中，只是页面 <code>data</code> 的渲染结果会比较局限。有时会想要额外展示一些可变的内容，如展示的广告图片 URL 等。</p><p>这种情况下可以使用“动态”初始渲染缓存的方式。首先，配置 <code>"initialRenderingCache": "dynamic"</code> ：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;initialRenderingCache&#34;</span><span class=p>:</span> <span class=s2>&#34;dynamic&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>此时，初始渲染缓存不会被自动启用，还需要在页面中调用 <code>this.setInitialRenderingCache(dynamicData)</code> 才能启用。其中， <code>dynamicData</code> 是一组数据，与 <code>data</code> 一起参与页面 WXML 渲染。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>Page</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>loading</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>onReady</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>setInitialRenderingCache</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>loadingHint</span><span class=o>:</span> <span class=s1>&#39;正在加载&#39;</span> <span class=c1>// 这一部分数据将被应用于界面上，相当于在初始 data 基础上额外进行一次 setData
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>view</span> <span class=nx>wx</span><span class=o>:</span><span class=k>if</span><span class=o>=</span><span class=s2>&#34;{{loading}}&#34;</span><span class=o>&gt;</span><span class=p>{{</span><span class=nx>loadingHint</span><span class=p>}}</span><span class=o>&lt;</span><span class=err>/view&gt;</span>
</span></span></code></pre></div><p>从原理上说，在动态生成初始渲染缓存的方式下，页面会在后台使用动态数据重新渲染一次，因而开销相对较大。因而要尽量避免频繁调用 <code>this.setInitialRenderingCache</code> ，如果在一个页面内多次调用，仅最后一次调用生效。</p><p>注意：</p><ul><li><code>this.setInitialRenderingCache</code> 调用时机不能早于 <code>Page</code> 的 <code>onReady</code> 或 <code>Component</code> 的 <code>ready</code> 生命周期，否则可能对性能有负面影响。</li><li>如果想禁用初始渲染缓存，调用 <code>this.setInitialRenderingCache(null)</code> 。</li></ul><h2 id=自定义-tabbar>自定义 tabBar<a hidden class=anchor aria-hidden=true href=#自定义-tabbar>#</a></h2><blockquote><p>参考
<a href=https://developers.weixin.qq.com/miniprogram/dev/framework/ability/custom-tabbar.html target=_blank>https://developers.weixin.qq.com/miniprogram/dev/framework/ability/custom-tabbar.html</a></p></blockquote><h3 id=自定义tabbar>自定义tabBar<a hidden class=anchor aria-hidden=true href=#自定义tabbar>#</a></h3><p>自定义 tabBar 可以让开发者更加灵活地设置 tabBar 样式，以满足更多个性化的场景。</p><p>在自定义 tabBar 模式下</p><p>为了保证低版本兼容以及区分哪些页面是 tab 页，tabBar 的相关配置项需完整声明，但这些字段不会作用于自定义 tabBar 的渲染。
此时需要开发者提供一个自定义组件来渲染 tabBar，所有 tabBar 的样式都由该自定义组件渲染。推荐用 fixed 在底部的 cover-view + cover-image 组件渲染样式，以保证 tabBar 层级相对较高。
与 tabBar 样式相关的接口，如 wx.setTabBarItem 等将失效。
每个 tab 页下的自定义 tabBar 组件实例是不同的，可通过自定义组件下的 getTabBar 接口，获取当前页面的自定义 tabBar 组件实例。
注意：如需实现 tab 选中态，要在当前页面下，通过 getTabBar 接口获取组件实例，并调用 setData 更新选中态。可参考底部的代码示例。</p><h3 id=使用>使用<a hidden class=anchor aria-hidden=true href=#使用>#</a></h3><ol><li>配置信息</li></ol><ul><li>在 app.json 中的 tabBar 项指定 custom 字段，同时其余 tabBar 相关配置也补充完整。</li></ul><ul><li>所有 tab 页的 json 里需声明 usingComponents 项，也可以在 app.json 全局开启。</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;tabBar&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;custom&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;color&#34;</span><span class=p>:</span> <span class=s2>&#34;#000000&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;selectedColor&#34;</span><span class=p>:</span> <span class=s2>&#34;#000000&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;backgroundColor&#34;</span><span class=p>:</span> <span class=s2>&#34;#000000&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;list&#34;</span><span class=p>:</span> <span class=p>[{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;pagePath&#34;</span><span class=p>:</span> <span class=s2>&#34;page/component/index&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;组件&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;pagePath&#34;</span><span class=p>:</span> <span class=s2>&#34;page/API/index&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;接口&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}]</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;usingComponents&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=2><li>添加 tabBar 代码文件</li></ol><p>在代码根目录下添加入口文件:</p><p>custom-tab-bar/index.js
custom-tab-bar/index.json
custom-tab-bar/index.wxml
custom-tab-bar/index.wxss
3. 编写 tabBar 代码</p><p>用自定义组件的方式编写即可，该自定义组件完全接管 tabBar 的渲染。另外，自定义组件新增 getTabBar 接口，可获取当前页面下的自定义 tabBar 组件实例</p><p>以下是一个简单的自定义 tabBar 组件示例：</p><p><div class=post-img-view><a data-fancybox=gallery href=https://qiniu.waite.wang/202403262041168.png><img src=https://qiniu.waite.wang/202403262041168.png alt></a></div></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;tabbar&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;tabbar-item {{ select === index ? &#39;tabbar-select&#39; : &#39;&#39; }}&#34;</span> <span class=na>wx:for</span><span class=o>=</span><span class=s>&#34;{{ list }}&#34;</span> <span class=na>wx:key</span><span class=o>=</span><span class=s>&#34;index&#34;</span> <span class=na>data-page</span><span class=o>=</span><span class=s>&#34;{{ item.pagePath }}&#34;</span> <span class=na>data-index</span><span class=o>=</span><span class=s>&#34;{{ index }}&#34;</span> <span class=na>data-type</span><span class=o>=</span><span class=s>&#34;{{ item.type }}&#34;</span> <span class=na>bindtap</span><span class=o>=</span><span class=s>&#34;selectPage&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>block</span> <span class=na>wx:if</span><span class=o>=</span><span class=s>&#34;{{ item.type === 0 }}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   <span class=p>&lt;</span><span class=nt>image</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;tabbar-image&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;{{ select === index ?  item.selectedIconPath : item.iconPath }}&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>image</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   <span class=p>&lt;</span><span class=nt>text</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;tabbar-text&#34;</span><span class=p>&gt;</span>{{ item.text }}<span class=p>&lt;/</span><span class=nt>text</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>block</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>block</span> <span class=na>wx:else</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   <span class=p>&lt;</span><span class=nt>view</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;publish&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>image</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;tabbar-image&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;../images/add.png&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>image</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>block</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>view</span><span class=p>&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>Component</span><span class=p>({</span>
</span></span><span class=line><span class=cl> <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>select</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>list</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>iconPath</span><span class=o>:</span> <span class=s2>&#34;/images/index.png&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>pagePath</span><span class=o>:</span> <span class=s2>&#34;/pages/index/index&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>selectedIconPath</span><span class=o>:</span> <span class=s2>&#34;/images/index_fill.png&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>text</span><span class=o>:</span> <span class=s2>&#34;首页&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>type</span><span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>   <span class=p>},</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>iconPath</span><span class=o>:</span> <span class=s2>&#34;/images/classify.png&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>pagePath</span><span class=o>:</span> <span class=s2>&#34;/pages/classify/classify&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>selectedIconPath</span><span class=o>:</span> <span class=s2>&#34;/images/classify_fill.png&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>text</span><span class=o>:</span> <span class=s2>&#34;分类&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>type</span><span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>   <span class=p>},</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>type</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>pagePath</span><span class=o>:</span> <span class=s2>&#34;/pages/publish/publish&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=p>},</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>iconPath</span><span class=o>:</span> <span class=s2>&#34;/images/collection.png&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>pagePath</span><span class=o>:</span> <span class=s2>&#34;/pages/collection/collection&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>selectedIconPath</span><span class=o>:</span> <span class=s2>&#34;/images/collection_fill.png&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>text</span><span class=o>:</span> <span class=s2>&#34;收藏夹&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>type</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=p>},</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>iconPath</span><span class=o>:</span> <span class=s2>&#34;/images/me.png&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>pagePath</span><span class=o>:</span> <span class=s2>&#34;/pages/me/me&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>selectedIconPath</span><span class=o>:</span> <span class=s2>&#34;/images/me_fill.png&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>text</span><span class=o>:</span> <span class=s2>&#34;我的&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>type</span><span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl> <span class=p>},</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=nx>methods</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>selectPage</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=kr>const</span> <span class=p>{</span> <span class=nx>index</span><span class=p>,</span> <span class=nx>page</span><span class=p>,</span> <span class=nx>type</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>e</span><span class=p>.</span><span class=nx>currentTarget</span><span class=p>.</span><span class=nx>dataset</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=p>(</span><span class=nx>index</span> <span class=o>!==</span> <span class=k>this</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>select</span> <span class=o>&amp;&amp;</span> <span class=nx>type</span> <span class=o>===</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>wx</span><span class=p>.</span><span class=nx>switchTab</span><span class=p>({</span>
</span></span><span class=line><span class=cl>     <span class=nx>url</span><span class=o>:</span> <span class=nx>page</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=p>(</span><span class=nx>type</span> <span class=o>===</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>wx</span><span class=p>.</span><span class=nx>navigateTo</span><span class=p>({</span>
</span></span><span class=line><span class=cl>     <span class=nx>url</span><span class=o>:</span> <span class=s1>&#39;../../pages/publish/publish&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>   <span class=p>}</span>
</span></span><span class=line><span class=cl>   <span class=k>this</span><span class=p>.</span><span class=nx>setData</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>select</span><span class=o>:</span> <span class=nx>index</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>.</span><span class=nc>tabbar</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>width</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>height</span><span class=p>:</span> <span class=mi>80</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>display</span><span class=p>:</span> <span class=kc>flex</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>background-color</span><span class=p>:</span> <span class=mh>#fff</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>position</span><span class=p>:</span> <span class=kc>fixed</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>bottom</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>padding-bottom</span><span class=p>:</span> <span class=nf>env</span><span class=p>(</span><span class=n>safe</span><span class=o>-</span><span class=n>area</span><span class=o>-</span><span class=kc>inset</span><span class=o>-</span><span class=kc>bottom</span><span class=p>);</span>
</span></span><span class=line><span class=cl> <span class=k>padding-top</span><span class=p>:</span> <span class=mi>10</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>z-index</span><span class=p>:</span> <span class=mi>9999</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>tabbar-item</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>flex</span><span class=p>:</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>display</span><span class=p>:</span> <span class=kc>flex</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>flex-direction</span><span class=p>:</span> <span class=kc>column</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>justify-content</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>align-items</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>tabbar-item</span> <span class=p>.</span><span class=nc>tabbar-image</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>width</span><span class=p>:</span> <span class=mi>40</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>height</span><span class=p>:</span> <span class=mi>40</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>tabbar-item</span> <span class=p>.</span><span class=nc>tabbar-text</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>font-size</span><span class=p>:</span> <span class=mi>26</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>margin-top</span><span class=p>:</span> <span class=mi>10</span><span class=n>rpx</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>tabbar-item</span> <span class=p>.</span><span class=nc>publish</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>padding</span><span class=p>:</span> <span class=mi>8</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>background-color</span><span class=p>:</span> <span class=mh>#B2A4EC</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>border-radius</span><span class=p>:</span> <span class=mi>50</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>display</span><span class=p>:</span> <span class=kc>flex</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>align-items</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>justify-content</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl> <span class=k>margin-bottom</span><span class=p>:</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>tabbar-select</span> <span class=p>{</span>
</span></span><span class=line><span class=cl> <span class=k>color</span><span class=p>:</span> <span class=mh>#B2A4EC</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=skyline-模式>skyline 模式<a hidden class=anchor aria-hidden=true href=#skyline-模式>#</a></h3></div><footer class=post-footer><ul class=post-tags><li><a href=https://waite.wang/tags/wechat-mini-program/>Wechat Mini Program</a></li></ul><nav class=paginav><a class=prev href=https://waite.wang/posts/vue/system-learn-vue-4-animation-router/><span class=title>« 上一页</span><br><span>系统学习 Vue -- 4. 动画和路由</span>
</a><a class=next href=https://waite.wang/posts/vue/system-learn-vue-2-component/><span class=title>下一页 »</span><br><span>系统学习 Vue -- 2-深入组件</span></a></nav></footer><script src=https://utteranc.es/client.js repo=Waite0603/HugoBlog issue-term=pathname theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span><a href=https://beian.miit.gov.cn/ target=_blank rel="noopener noreferrer">粤 ICP 备 2022028437 号</a></span><br><span>Copyright &copy; 2018 - 2025 By <a href=https://waite.wang/>Waite</a>, All Rights
Reserved.</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script src=/js/jquery-3.5.1.min.js></script><link rel=stylesheet href=/css/jquery.fancybox.min.css><script src=/js/jquery.fancybox.min.js></script></body></html>