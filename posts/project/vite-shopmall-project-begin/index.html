<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Vite B端后台管理起始项 | 隶笔难书</title>
<meta name=keywords content="Project"><meta name=description content="创建vite项目并安装vscode插件
Vite
Vite 是一个 web 开发构建工具，由于其原生 ES 模块导入方式，可以实现闪电般的冷服务器启动.通过在终端中运行以下命令，可以使用 Vite 快速构建 Vue 项目"><meta name=author content><link rel=canonical href=https://waite.wang/posts/project/vite-shopmall-project-begin/><link crossorigin=anonymous href=/assets/css/stylesheet.1f25c954b6964bfd120383618e0c76f5d98627118274109d51919206cab78c1e.css integrity="sha256-HyXJVLaWS/0SA4Nhjgx29dmGJxGCdBCdUZGSBsq3jB4=" rel="preload stylesheet" as=style><link rel=icon href=https://waite.wang/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://waite.wang/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://waite.wang/favicon-32x32.png><link rel=apple-touch-icon href=https://waite.wang/apple-touch-icon.png><link rel=mask-icon href=https://waite.wang/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://waite.wang/posts/project/vite-shopmall-project-begin/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://waite.wang/posts/project/vite-shopmall-project-begin/"><meta property="og:site_name" content="隶笔难书"><meta property="og:title" content="Vite B端后台管理起始项"><meta property="og:description" content="创建vite项目并安装vscode插件 Vite Vite 是一个 web 开发构建工具，由于其原生 ES 模块导入方式，可以实现闪电般的冷服务器启动.通过在终端中运行以下命令，可以使用 Vite 快速构建 Vue 项目"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-04-05T16:04:23+08:00"><meta property="article:modified_time" content="2023-04-05T16:04:23+08:00"><meta property="article:tag" content="Project"><meta name=twitter:card content="summary"><meta name=twitter:title content="Vite B端后台管理起始项"><meta name=twitter:description content="创建vite项目并安装vscode插件
Vite
Vite 是一个 web 开发构建工具，由于其原生 ES 模块导入方式，可以实现闪电般的冷服务器启动.通过在终端中运行以下命令，可以使用 Vite 快速构建 Vue 项目"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://waite.wang/posts/"},{"@type":"ListItem","position":2,"name":"Vite B端后台管理起始项","item":"https://waite.wang/posts/project/vite-shopmall-project-begin/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Vite B端后台管理起始项","name":"Vite B端后台管理起始项","description":"创建vite项目并安装vscode插件 Vite Vite 是一个 web 开发构建工具，由于其原生 ES 模块导入方式，可以实现闪电般的冷服务器启动.通过在终端中运行以下命令，可以使用 Vite 快速构建 Vue 项目\n","keywords":["Project"],"articleBody":"创建vite项目并安装vscode插件 Vite Vite 是一个 web 开发构建工具，由于其原生 ES 模块导入方式，可以实现闪电般的冷服务器启动.通过在终端中运行以下命令，可以使用 Vite 快速构建 Vue 项目\n兼容性注意\nVite 需要 Node.js 版本 14.18+，16+。然而，有些模板需要依赖更高的 Node 版本才能正常运行，当你的包管理器发出警告时，请注意升级你的 Node 版本。\n使用 NPM: $ npm create vite@latest 使用 Yarn: $ yarn create vite 使用 PNPM: $ pnpm create vite 然后按照提示操作即可！\n你还可以通过附加的命令行选项直接指定项目名称和你想要使用的模板。例如，要构建一个 Vite + Vue 项目，运行:\n# npm 6.x npm create vite@latest my-vue-app --template vue # npm 7+, extra double-dash is needed: npm create vite@latest my-vue-app -- --template vue # yarn yarn create vite my-vue-app --template vue # pnpm pnpm create vite my-vue-app --template vue 查阅更多可以查看 Vite and Vue3 官网\n插件安装 Vue Language Features (Volar): VueLF 是一个专门为 Vue 3 构建的语言支持插件。它基于@vue/reactivity按需计算一切，实现原生 TypeScript 语言服务级别的性能。 Vue 3 Snippets: Vue 代码提示 WindiCSS IntelliSense Stylelint: 然后禁用项目的 css 和 scss 验证。 (ctrl+shift+p) 并搜索“设置 json” \"scss.validate\": false \"css.validate\": false 在项目根目录stylelint.config.js中创建 stylelint 插件配置文件, 添加以下内容以忽略规则apply, tailwind,etc: module.exports = { rules: { 'at-rule-no-unknown': [ true, { ignoreAtRules: ['tailwind', 'apply', 'variants', 'responsive', 'screen'] } ], 'declaration-block-trailing-semicolon': null, 'no-descending-specificity': null } } Element-plus https://element-plus.org/zh-CN/\n我们建议您使用包管理器（如 NPM、Yarn 或 pnpm）安装 Element Plus，然后您就可以使用打包工具，例如 Vite 或 webpack。\n# 选择一个你喜欢的包管理器 # NPM $ npm install element-plus --save # Yarn $ yarn add element-plus # pnpm $ pnpm install element-plus 用法 完整引入 如果你对打包后的文件大小不是很在乎，那么使用完整导入会更方便。\n// main.ts import { createApp } from 'vue' import ElementPlus from 'element-plus' import 'element-plus/dist/index.css' import App from './App.vue' const app = createApp(App) app.use(ElementPlus) app.mount('#app') Windi CSS https://cn.windicss.org/guide/\n安装相关包： npm i -D vite-plugin-windicss windicss 然后，在你的 Vite 配置中添加插件： // vite.config.js import WindiCSS from 'vite-plugin-windicss' export default { plugins: [ WindiCSS(), ], } 最后，在你的 Vite 入口文件中导入 virtual:windi.css： import 'virtual:windi.css' 使用及 @apply 简化代码 \u003cscript setup\u003e \u003c/script\u003e \u003ctemplate\u003e \u003cbutton class='btn'\u003e 按钮 \u003c/button\u003e \u003c/template\u003e \u003cstyle\u003e .btn{ @apply bg-purple-500 text-indigo-50 px-4 py-2 rounded-full transition-all duration-500 hover:( bg-purple-900) focus:(ring-8 ring-purple-900); } \u003c/style\u003e Vue-router https://router.vuejs.org/zh/index.html\nnpm install vue-router@4 yarn add vue-router@4 /router/index.js import { createRouter, // 函数用来创建一个路由实例 createWebHashHistory // 用来创建一个基于哈希路由的历史对象 } from 'vue-router' const routes = [{ path: '/', name: 'Home', component: () =\u003e import('../views/Home.vue') }] // 这段代码定义了一个路由器，该路由器使用createWebHashHistory()创建的历史记录对象和给定的路由（routes）来定义路由。 // createWebHashHistory()创建的历史记录对象会把URL的片段存储在window.location.hash中，以支持前进和后退按钮和书签。 const router = createRouter({ history: createWebHashHistory(), routes }) export default router main.js import router from './router' const app = createApp(App) app.use(router) app.mount('#app') 捕获所有路由或 404 Not found 路由 常规参数只匹配 url 片段之间的字符，用 / 分隔。如果我们想匹配任意路径，我们可以使用自定义的 路径参数 正则表达式，在 路径参数 后面的括号中加入 正则表达式 :\nconst routes = [ // 将匹配所有内容并将其放在 `$route.params.pathMatch` 下 { path: '/:pathMatch(.*)*', name: 'NotFound', component: NotFound }, // 将匹配以 `/user-` 开头的所有内容，并将其放在 `$route.params.afterUser` 下 { path: '/user-:afterUser(.*)', component: UserGeneric }, ] 登陆页面开发 ElementPlus_Layout 布局: 通过基础的 24 分栏，迅速简便地创建布局。 Flexbox: 使用 flex 创建一个块级 flex 容器。 Layout 响应式布局 参照了 Bootstrap 的 响应式设计，预设了五个响应尺寸：xs、sm、md、lg 和 xl。\n\u003ctemplate\u003e \u003cel-row :gutter=\"10\"\u003e \u003cel-col :xs=\"8\" :sm=\"6\" :md=\"4\" :lg=\"3\" :xl=\"1\" \u003e\u003cdiv class=\"grid-content ep-bg-purple\" /\u003e\u003c/el-col\u003e \u003cel-col :xs=\"4\" :sm=\"6\" :md=\"8\" :lg=\"9\" :xl=\"11\" \u003e\u003cdiv class=\"grid-content ep-bg-purple-light\" /\u003e\u003c/el-col\u003e \u003cel-col :xs=\"4\" :sm=\"6\" :md=\"8\" :lg=\"9\" :xl=\"11\" \u003e\u003cdiv class=\"grid-content ep-bg-purple\" /\u003e\u003c/el-col\u003e \u003cel-col :xs=\"8\" :sm=\"6\" :md=\"4\" :lg=\"3\" :xl=\"1\" \u003e\u003cdiv class=\"grid-content ep-bg-purple-light\" /\u003e\u003c/el-col\u003e \u003c/el-row\u003e \u003c/template\u003e \u003cstyle\u003e .el-col { border-radius: 4px; } .grid-content { border-radius: 4px; min-height: 36px; } \u003c/style\u003e xs \u003c768px 响应式栅格数或者栅格属性对象 number / object sm ≥768px 响应式栅格数或者栅格属性对象 number / object md ≥992px 响应式栅格数或者栅格属性对象 number / object lg ≥1200px 响应式栅格数或者栅格属性对象 number / object xl ≥1920px 响应式栅格数或者栅格属性对象 number / object icon 图标引入 https://element-plus.gitee.io/zh-CN/component/icon.html\n# 选择一个你喜欢的包管理器 # NPM $ npm install @element-plus/icons-vue # Yarn $ yarn add @element-plus/icons-vue # pnpm $ pnpm install @element-plus/icons-vue 注册所有图标\n您需要从 @element-plus/icons-vue 中导入所有图标并进行全局注册。\n// main.ts // 如果您正在使用CDN引入，请删除下面一行。 import * as ElementPlusIconsVue from '@element-plus/icons-vue' const app = createApp(App) for (const [key, component] of Object.entries(ElementPlusIconsVue)) { app.component(key, component) } 使用(插槽)\n\u003cel-input v-model=\"form.username\" placeholder=\"请输入用户名\"\u003e \u003ctemplate #prefix\u003e \u003cel-icon class=\"el-input__icon\"\u003e \u003csearch /\u003e \u003c/el-icon\u003e \u003c/template\u003e \u003c/el-input\u003e import { Calendar, Search } from '@element-plus/icons-vue' 外部 icon 阿里巴巴矢量图库iconfont\n选择图标加入购物车, 直接下载引用\n// mian.js import './assets/icon/iconfont.css' \u003cel-link type=\"primary\" class=\"text-white\" @click=\"JumpToGithub\"\u003e \u003ci class=\"iconfont icon-icon_github mr-1\"\u003e\u003c/i\u003e Github \u003c/el-link\u003e setup 是在单文件组件 (SFC) 中使用组合式 API 的编译时语法糖。当同时使用 SFC 与组合式 API 时该语法是默认推荐。相比于普通的 语法，它具有更多优势：\n更少的样板内容，更简洁的代码。 能够使用纯 TypeScript 声明 props 和自定义事件。 更好的运行时性能 (其模板会被编译成同一作用域内的渲染函数，避免了渲染上下文代理对象)。 更好的 IDE 类型推导性能 (减少了语言服务器从代码中抽取类型的工作)。 普通的 只在组件被首次引入的时候执行一次不同， 中的代码会在每次组件实例被创建的时候执行。 当使用 的时候，任何在 声明的顶层的绑定 (包括变量，函数声明，以及 import 导入的内容) 都能在模板中直接使用 import 导入的内容也会以同样的方式暴露。这意味着我们可以在模板表达式中直接使用导入的 helper 函数，而不需要通过 methods 选项来暴露它 \u003cscript setup\u003e // 变量 const msg = 'Hello!' // 函数 function log() { console.log(msg) } \u003c/script\u003e \u003ctemplate\u003e \u003cbutton @click=\"log\"\u003e{{ msg }}\u003c/button\u003e \u003c/template\u003e \u003cscript setup\u003e import { capitalize } from './helpers' \u003c/script\u003e \u003ctemplate\u003e \u003cdiv\u003e{{ capitalize('hello') }}\u003c/div\u003e \u003c/template\u003e 以下为简单示例代码\n\u003ctemplate\u003e \u003cul\u003e \u003cli\u003e{{ myref0 }}\u003c/li\u003e \u003cli\u003e{{ myref1 }}\u003c/li\u003e \u003cli\u003e{{ myref2 }}\u003c/li\u003e \u003cli\u003e{{ myref3 }}\u003c/li\u003e \u003cli\u003e{{ myrea0 }}\u003c/li\u003e \u003cli\u003e{{ myrea1 }}\u003c/li\u003e \u003cli\u003e{{ myrea2.age }}\u003c/li\u003e \u003cli\u003e{{ myrea3.user.name }}\u003c/li\u003e \u003cli\u003e{{ myrea4.one.three.age.four }}\u003c/li\u003e \u003c/ul\u003e \u003cel-button @click=\"change\"\u003echange\u003c/el-button\u003e \u003c/template\u003e \u003cscript\u003e import { ref, reactive } from 'vue' export default { setup() { let myref0 = ref(1); let myref1 = ref(2); let myref2 = ref(true); let myref3 = ref('myref3') let myrea0 = reactive(0); let myrea1 = reactive('myrea1'); let myrea2 = reactive({ age: 3 }) let myrea3 = reactive({ user: { name: \"zs\", } }) let myrea4 = reactive({ top: 'top', one: { two: \"two\", three: { name: \"LS\", age: { four: \"four\" } }, } }) function change() { myref0 = 2; myref1.value++; myref2.value = false; myref3.value = 'MyRef333' myrea0++; myrea1 = 'myrea1111'; myrea2.age++; myrea3.user.name = \"ww\"; myrea4.one.three.age.four = \"five\"; console.log(myref0); console.log(myrea0); console.log(myrea1); } return { myref0, myrea0, myref1, myrea1, myref2, myrea2, myref3, myrea3, myrea4, change } } } \u003c/script\u003e 1 =\u003e 1 2 =\u003e 3 false =\u003e flase MyRef3 =\u003e MyRef333 0 =\u003e 0 myrea1 =\u003e myrea1 3 =\u003e 4 zs =\u003e ww four =\u003e five ref包裹简单类型，可以响应数据变化。 reactive包裹简单类型，不可以响应数据变化。 在更改ref包裹的值时，需要加 .value 来触发响应。 在页面中使用，{{ }}进行文本插值时，即使使用ref包裹也不需要添加 .value 属性，得益于在检测到 __v_isRef:true 时，vue会帮我们添加。 登录表单校验 \u003cel-form ref=\"formRef\" :model=\"form\" :rules=\"rules\" class=\"w-2/4\"\u003e \u003cel-form-item prop=\"username\"\u003e \u003cel-input v-model=\"form.username\" placeholder=\"请输入用户名\"\u003e \u003ctemplate #prefix\u003e \u003cel-icon\u003e \u003cUser /\u003e \u003c/el-icon\u003e \u003c/template\u003e \u003c/el-input\u003e \u003c/el-form-item\u003e \u003cel-form-item prop=\"password\"\u003e \u003cel-input v-model=\"form.password\" type=\"password\" placeholder=\"请输入密码\" show-password @keyup.enter.native=\"onSubmit\"\u003e \u003ctemplate #prefix\u003e \u003cel-icon\u003e \u003cLock /\u003e \u003c/el-icon\u003e \u003c/template\u003e \u003c/el-input\u003e \u003c/el-form-item\u003e \u003cel-form-item\u003e \u003cel-button round color=\"#2563eb \" class=\"w-full\" type=\"primary\" @click=\"onSubmit\"\u003e登 录\u003c/el-button\u003e \u003c/el-form-item\u003e \u003c/el-form\u003e import { reactive, ref } from 'vue' // do not use same name with ref const form = reactive({ username: \"\", password: \"\" }) const rules = { username: [ { required: true, message: '用户名不能为空', trigger: 'blur' }, ], password: [ { required: true, message: '密码不能为空', trigger: 'blur' }, ] } const formRef = ref(null) const onSubmit = () =\u003e { formRef.value.validate((valid) =\u003e { if (!valid) { return false } console.log(\"验证通过\"); }) } Axios http://axios-js.com/\nnpm install axios // /src/axios.js import axios from 'axios'; console.log(import.meta.env.VITE_APP_BASE_API); const instance = axios.create({ baseURL:import.meta.env.VITE_APP_BASE_API, }) export default instance; // vue.config.js import { defineConfig } from 'vite' import vue from '@vitejs/plugin-vue' import WindiCSS from 'vite-plugin-windicss' import path from 'path' // https://vitejs.dev/config/ export default defineConfig({ // 它将别名“~”映射到当前目录的“src”文件夹，因此在进行路径引用时，可以使用“~”，而不是使用相对路径。 resolve: { alias: { '~': path.resolve(__dirname, 'src'), }, }, plugins: [ vue(), WindiCSS() ], server: { cors: true, proxy: { '/api': { target: 'https://ceshi13.dishait.cn', changeOrigin: true, rewrite: (path) =\u003e path.replace(/^\\/api/, ''), }, }, }, build: { sourcemap: false, // 消除打包大小超过500kb警告 chunkSizeWarningLimit: 4000 }, }) import axios from '~/axios'; // 通过 export 导出 export const login = (username, password) =\u003e { return axios.post('/admin/login', { username, password }); }; Vueuse https://vueuse.org/\n把一些原本不支持响应式的 api 等 支持响应式\nuseCookies npm i @vueuse/integrations npm i universal-cookie \u003ctemplate\u003e \u003cdiv class=\"container\"\u003e \u003cdiv class=\"row\"\u003e \u003cdiv class=\"col-12\"\u003e \u003cel-button type=\"primary\" @click=\"set('test', 'test')\"\u003e设置cookie\u003c/el-button\u003e \u003cel-button type=\"primary\" @click=\"remove('test')\"\u003e删除cookie\u003c/el-button\u003e \u003cel-button type=\"primary\" @click=\"get('test')\"\u003e读取cookie\u003c/el-button\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup\u003e import { useCookies } from \"@vueuse/integrations/useCookies\"; const TokenKey = \"admin-token\"; const cookies = useCookies(); // 获取token export function getToken() { return cookies.get(TokenKey); } // 设置token export function setToken(token) { // token 有效期为 60 分钟 const expires = new Date(Date.now() + 60 * 60 * 1000); cookies.set(TokenKey, token, { expires }); } // 移除token export function removeToken() { return cookies.remove(TokenKey); } \u003c/script\u003e 拦截器 import { getToken} from '~/composables/auth' import { toast } from '~/composables/util' import axios from 'axios'; // 创建axios实例 const instance = axios.create({ baseURL: import.meta.env.VITE_APP_BASE_API, }) // 添加请求拦截器 instance.interceptors.request.use(function (config) { // 在发送请求之前做些什么 const token = getToken(); if (token) { config.headers['token'] = token; } return config; }, function (error) { // 对请求错误做些什么 return Promise.reject(error); }); // 添加响应拦截器 instance.interceptors.response.use(function (response) { // 对响应数据做点什么 return response.data.data; }, function (error) { // 对响应错误做点什么 toast(error.response.data.msg, 'error'); return Promise.reject(error); }); export default instance; Vuex Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式 + 库。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。\nnpm install vuex@next --save // /store/index.js import { createStore } from 'vuex' // 创建一个新的 store 实例 const store = createStore({ state() { return { // 用户信息 user: {} } }, mutations: { // 设置用户信息 SET_USER_INFO(state, user) { state.user = user } } }); export default store import { useStore } from 'vuex' const store = useStore(); store.commit('SET_USER_INFO', res2); \u003ctemplate\u003e \u003cdiv class=\"about\"\u003e \u003ch1\u003e {{ $store.state.user }}\u003c/h1\u003e \u003c/div\u003e \u003c/template\u003e 具体使用看 官方文档\n全局路由守卫 // /src/permission.js // 处理权限相关 import router from '~/router' import { getToken } from '~/composables/auth' import { toast } from '~/composables/util' // 全局前置守卫 router.beforeEach((to, from, next) =\u003e { // 如果有token，就放行 const token = getToken(); // 如果没有token，就跳转到登录页 if (!token \u0026\u0026 to.path !== '/login') { toast(\"请先登录\", \"warning\"); return next ({ path: \"/login\" }) }; // 防止重复登录 if (token \u0026\u0026 to.path === '/login') { toast(\"请先退出登录\", \"warning\"); return next ({ path: from.path }) }; next() }) // mian.js import \"./permission\" app.use(store) 全局 loading // npm i nprogress // main.js import \"nprogress/nprogress.css\" // composable/util.js // 显示全屏loading export function showFullLoading() { nprogress.start() } // 隐藏全屏loading export function hideFullLoading() { nprogress.done() } // permission.js import { toast, showFullLoading, hideFullLoading } from '~/composables/util' // 全局前置守卫 router.beforeEach(async (to, from, next) =\u003e { // 显示 loading showFullLoading(); } // 全局后置守卫 router.afterEach(() =\u003e { // 隐藏 loading hideFullLoading(); }) 样式 #nprogress .bar { background: wheat !important; height: 3px !important; } 动态页面标题 // router/index.js { path: '/login', name: 'Login', component: Login, meta: { title: '登录' } } // permission.js // 全局前置守卫 router.beforeEach(async (to, from, next) =\u003e { // 设置页面标题 document.title = to.meta.title; } 后台 Layout 开发 组件引用 // /layout/admin.vue \u003ctemplate\u003e \u003cel-container\u003e \u003cel-header\u003e \u003cf-header\u003e\u003c/f-header\u003e \u003c/el-header\u003e \u003cel-container\u003e \u003cel-aside width=\"200px\"\u003e \u003cf-menu\u003e\u003c/f-menu\u003e \u003c/el-aside\u003e \u003cel-main\u003e \u003cf-tag-list\u003e\u003c/f-tag-list\u003e \u003crouter-view\u003e\u003c/router-view\u003e \u003c/el-main\u003e \u003c/el-container\u003e \u003cel-footer\u003eFooter\u003c/el-footer\u003e \u003c/el-container\u003e \u003c/template\u003e import FHeader from './components/FHeader.vue'; import FMenu from './components/FMenu.vue'; import FTagList from './components/FTagList.vue'; 头部代码 \u003ctemplate\u003e \u003cdiv class=\"f-header\"\u003e \u003cspan class=\"logo\"\u003e \u003cel-icon class=\"mr-1\"\u003e\u003celeme-filled /\u003e\u003c/el-icon\u003e 帝莎编程 \u003c/span\u003e \u003cel-icon class=\"icon-btn\"\u003e \u003cfold /\u003e \u003c/el-icon\u003e \u003cel-icon class=\"icon-btn\"\u003e \u003crefresh /\u003e \u003c/el-icon\u003e \u003cdiv class=\"ml-auto flex items-center\"\u003e \u003cel-icon class=\"icon-btn\"\u003e\u003cfull-screen /\u003e\u003c/el-icon\u003e \u003cel-dropdown class=\"dropdown\" @command=\"handleCommand\"\u003e \u003cspan class=\"flex items-center text-light-50\"\u003e \u003cel-avatar class=\"mr-2\" :size=\"25\" :src=\"$store.state.user.avatar\" /\u003e {{ $store.state.user.username }} \u003cel-icon class=\"el-icon--right\"\u003e \u003carrow-down /\u003e \u003c/el-icon\u003e \u003c/span\u003e \u003ctemplate #dropdown\u003e \u003cel-dropdown-menu\u003e \u003cel-dropdown-item command=\"rePwd\"\u003e修改密码\u003c/el-dropdown-item\u003e \u003cel-dropdown-item command=\"logout\"\u003e退出登录\u003c/el-dropdown-item\u003e \u003c/el-dropdown-menu\u003e \u003c/template\u003e \u003c/el-dropdown\u003e \u003c/div\u003e \u003c/div\u003e \u003c/template\u003e \u003cstyle\u003e .f-header { @apply flex items-center bg-indigo-700 text-light-50 fixed top-0 left-0 right-0; height: 64px; } .logo { width: 250px; @apply flex justify-center items-center text-xl font-thin; } .icon-btn { @apply flex justify-center items-center; width: 42px; height: 64px; cursor: pointer; } .icon-btn:hover { @apply bg-indigo-600; } .f-header .dropdown { height: 64px; cursor: pointer; @apply flex justify-center items-center mx-5; } \u003c/style\u003e 下拉菜单事件绑定 \u003cel-dropdown class=\"dropdown\" @command=\"handleCommand\"\u003e \u003cspan class=\"flex items-center text-light-50\"\u003e \u003cel-avatar class=\"mr-2\" :size=\"25\" :src=\"$store.state.user.avatar\" /\u003e {{ $store.state.user.username }} \u003cel-icon class=\"el-icon--right\"\u003e \u003carrow-down /\u003e \u003c/el-icon\u003e \u003c/span\u003e \u003ctemplate #dropdown\u003e \u003cel-dropdown-menu\u003e \u003cel-dropdown-item command=\"rePwd\"\u003e修改密码\u003c/el-dropdown-item\u003e \u003cel-dropdown-item command=\"logout\"\u003e退出登录\u003c/el-dropdown-item\u003e \u003c/el-dropdown-menu\u003e \u003c/template\u003e \u003c/el-dropdown\u003e \u003cscript setup\u003e const handleCommand = (command)=\u003e{ console.log(command); } \u003c/script\u003e 页面刷新和全屏 https://vueuse.org/core/useFullscreen/#usefullscreen\nnpm i @vueuse/core \u003cel-tooltip effect=\"dark\" content=\"刷新\" placement=\"bottom\"\u003e \u003cel-icon class=\"icon-btn\" @click=\"handleRefresh\"\u003e \u003crefresh /\u003e \u003c/el-icon\u003e \u003c/el-tooltip\u003e \u003cel-tooltip effect=\"dark\" content=\"全屏\" placement=\"bottom\"\u003e \u003cel-icon class=\"icon-btn\" @click=\"toggle\"\u003e \u003cfull-screen v-if=\"!isFullscreen\" /\u003e \u003caim v-else /\u003e \u003c/el-icon\u003e \u003c/el-tooltip\u003e // full-screen v-if=\"!isFullscreen\"和aim v-else是两个自定义的组件，它们 // 分别代表全屏和非全屏状态下的图标。其中，v-if=\"!isFullscreen\"表示当 // isFullscreen为false时，显示full-screen组件，否则显示aim组件。 \u003cscript setup\u003e import { useFullscreen } from '@vueuse/core' const handleRefresh = ()=\u003e{ // router.go(0); location.reload(); } // const toggle = ()=\u003e{ // if (document.fullscreenElement) { // document.exitFullscreen(); // } else { // document.documentElement.requestFullscreen(); // } // } const { isFullscreen, toggle } = useFullscreen() // isFullscreen 是否全屏 // toggle 切换全屏 \u003c/script\u003e 通用抽屉组件封装 defineExpose 使用 的组件是默认关闭的——即通过模板引用或者 $parent 链获取到的组件的公开实例，不会暴露任何在 中声明的绑定。\n可以通过 defineExpose 编译器宏来显式指定在 组件中要暴露出去的属性：\n\u003cscript setup\u003e import { ref } from 'vue' const a = 1 const b = ref(2) defineExpose({ a, b }) \u003c/script\u003e 当父组件通过模板引用的方式获取到当前组件的实例，获取到的实例会像这样 { a: number, b: number } (ref 会和在普通实例中一样被自动解包)\n\u003ctemplate\u003e \u003cel-drawer v-model=\"showDrawer\" title=\"修改密码\" size=\"45%\" :close-on-click-modal=\"false\"\u003e \u003cdiv class=\"formDrawer\"\u003e \u003cdiv class=\"body\"\u003e \u003cslot\u003e\u003c/slot\u003e \u003c/div\u003e \u003cdiv class=\"actions\"\u003e \u003cel-button type=\"primary\"\u003e提交\u003c/el-button\u003e \u003cel-button type=\"default\" @click=\"close\"\u003e取消\u003c/el-button\u003e \u003c/div\u003e \u003c/div\u003e \u003c/el-drawer\u003e \u003c/template\u003e \u003cscript setup\u003e import { ref } from \"vue\" const showDrawer = ref(false) // 打开 const open = ()=\u003e showDrawer.value = true // 关闭 const close = ()=\u003eshowDrawer.value = false // 向父组件暴露以下方法 defineExpose({ open, close }) \u003c/script\u003e \u003cstyle\u003e .formDrawer{ width: 100%; height: 100%; position: relative; @apply flex flex-col; } .formDrawer .body{ flex: 1; position: absolute; top: 0; left: 0; right: 0; bottom: 50px; overflow-y: auto; } .formDrawer .actions{ height: 50px; @apply mt-auto flex items-center; } \u003c/style\u003e defineProps() 和 defineEmits() 为了在声明 props 和 emits 选项时获得完整的类型推导支持，我们可以使用 defineProps 和 defineEmits API，它们将自动地在 中可用：\n\u003cscript setup\u003e const props = defineProps({ foo: String }) const emit = defineEmits(['change', 'delete']) // setup 代码 \u003c/script\u003e \u003ctemplate\u003e \u003cel-drawer v-model=\"showDrawer\" :title=\"title\" :size=\"size\" :close-on-click-modal=\"false\" :destroy-on-close=\"destroyOnClose\"\u003e \u003cdiv class=\"formDrawer\"\u003e \u003cdiv class=\"body\"\u003e \u003cslot\u003e\u003c/slot\u003e \u003c/div\u003e \u003cdiv class=\"actions\"\u003e \u003cel-button type=\"primary\" @click=\"submit\" :loading=\"loading\"\u003e{{ submitText }}\u003c/el-button\u003e \u003cel-button type=\"default\" @click=\"close\"\u003e取消\u003c/el-button\u003e \u003c/div\u003e \u003c/div\u003e \u003c/el-drawer\u003e \u003c/template\u003e \u003cscript setup\u003e // defineProps() 接收父组件传递的参数 const props = defineProps({ title: String, size: { type: String, default: '45%' }, // 控制是否在关闭 Drawer 之后将子元素全部销毁 destroyOnClose: { type: Boolean, default: true }, // 提交按钮的文字 submitText: { type: String, default: '提交' }, }) // 这段代码使用了 Vue 3 中的 defineEmits 函数来声明了一个名为 submit 的事件。然后在 submit 函数中，调用了 emit 函数并传入了 // 事件名称 'submit'，从而触发了名为 submit 的事件。这样做的好处是可以在组件的模板中使用 v-on:submit 或 @submit 来监听该事件 // 从而实现组件与父组件之间的通信。 const emit = defineEmits(['submit']) const submit = () =\u003e emit('submit') \u003cscript\u003e \u003cform-drawer ref=\"formDrawerRef\" title=\"修改密码\" size=\"30%\" destroy-on-close @submit=\"onSubmit\" /\u003e 菜单栏 \u003ctemplate\u003e \u003cdiv class=\"f-menu\" :style=\"{ width: $store.state.asideWidth }\"\u003e \u003cel-menu :default-active=\"defaultActive\" unique-opened default-active=\"2\" class=\"border-0\" @select=\"handleSelect\" :collapse=\"isCollapse\" :collapse-transition=\"false\"\u003e \u003ctemplate v-for=\"(item, index) in asideMenus\" :key=\"index\"\u003e \u003cel-sub-menu v-if=\"item.child \u0026\u0026 item.child.length \u003e 0\" :index=\"item.name\"\u003e \u003ctemplate #title\u003e \u003cel-icon\u003e \u003ccomponent :is=\"item.icon\"\u003e\u003c/component\u003e \u003c/el-icon\u003e \u003cspan\u003e{{ item.name }}\u003c/span\u003e \u003c/template\u003e \u003cel-menu-item v-for=\"(item2, index2) in item.child\" :key=\"index2\" :index=\"item2.frontpath\"\u003e \u003cel-icon\u003e \u003ccomponent :is=\"item2.icon\"\u003e\u003c/component\u003e \u003c/el-icon\u003e \u003cspan\u003e{{ item2.name }}\u003c/span\u003e \u003c/el-menu-item\u003e \u003c/el-sub-menu\u003e \u003cel-menu-item v-else :index=\"item.frontpath\"\u003e \u003cel-icon\u003e \u003ccomponent :is=\"item.icon\"\u003e\u003c/component\u003e \u003c/el-icon\u003e \u003cspan\u003e{{ item.name }}\u003c/span\u003e \u003c/el-menu-item\u003e \u003c/template\u003e \u003c/el-menu\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup\u003e import { useRouter, useRoute } from 'vue-router'; import { computed, ref } from 'vue'; import { useStore } from 'vuex'; const store = useStore() const isCollapse = computed(() =\u003e store.state.asideWidth != \"250px\") // 默认选中当前路由路径 const route = useRoute() const defaultActive = ref(route.path) const router = useRouter() const asideMenus = [ { \"name\": \"后台面板\", \"icon\": \"help\", \"child\": [{ \"name\": \"主控台\", \"icon\": \"home-filled\", \"frontpath\": \"/\", }] }, { \"name\": \"商城管理\", \"icon\": \"shopping-bag\", \"child\": [{ \"name\": \"商品管理\", \"icon\": \"shopping-cart-full\", \"frontpath\": \"/goods/list\", }], }, { \"name\": \"用户管理\", \"icon\": \"user\", \"frontpath\": \"/user/list\" } ] const handleSelect = (e) =\u003e { router.push(e) } \u003c/script\u003e \u003cstyle\u003e .f-menu { transition: all 0.2s; top: 64px; bottom: 0; left: 0; overflow-y: auto; overflow-x: hidden; @apply shadow-md fixed bg-light-50; } .f-menu::-webkit-scrollbar { width: 0px; } \u003c/style\u003e const store = createStore({ state() { return { // 用户信息 user: {}, // 侧边栏宽度 asideWidth: \"250px\", } }, mutations: { // 设置用户信息 SET_USER_INFO(state, user) { state.user = user }, // 侧边栏展开 ASIDE_OPEN(state) { state.asideWidth = state.asideWidth == \"250px\" ? \"64px\" : \"250px\" } } }); Menu 属性名 说明 unique-opened 是否只保持一个子菜单的展开 default-active 页面加载时默认激活菜单的 index 根据菜单添加路由 check 路由 https://router.vuejs.org/zh/guide/advanced/dynamic-routing.html#%E6%9F%A5%E7%9C%8B%E7%8E%B0%E6%9C%89%E8%B7%AF%E7%94%B1\nVue Router 提供了两个功能来查看现有的路由：\nrouter.hasRoute()：检查路由是否存在。 router.getRoutes()：获取一个包含所有路由记录的数组。 hasRoute(name): boolean Checks if a route with a given name exists import { createRouter, // 函数用来创建一个路由实例 createWebHashHistory // 用来创建一个基于哈希路由的历史对象 } from 'vue-router' import Index from '~/pages/index.vue' import NotFound from '~/pages/404.vue' import Admin from '~/layouts/admin.vue' import GoodList from '~/pages/goods/list.vue' import CategoryList from '~/pages/category/list.vue' import Login from '~/pages/login/login.vue' // 默认路由, 所有用户都可以访问 const routes = [ { path: '/', name: 'Admin', component: Admin, meta: { title: '后台首页' } }, { path: '/:pathMatch(.*)*', name: 'NotFound', component: NotFound, meta: { title: '404' } }, { path: '/login', name: 'Login', component: Login, meta: { title: '登录' } } ] // 动态路由, 用于匹配用户权限添加的路由 const asyncRoutes = [{ path: \"/\", name: \"/\", component: Index, meta: { title: \"后台首页\" } }, { path: \"/goods/list\", name: \"/goods/list\", component: GoodList, meta: { title: \"商品管理\" } }, { path: \"/category/list\", name: \"/category/list\", component: CategoryList, meta: { title: \"分类列表\" } }] // 这段代码定义了一个路由器，该路由器使用createWebHashHistory()创建的历史记录对象和给定的路由（routes）来定义路由。 // createWebHashHistory()创建的历史记录对象会把URL的片段存储在window.location.hash中，以支持前进和后退按钮和书签。 export const router = createRouter({ history: createWebHashHistory(), routes }) // 用于添加动态路由 export function addRoutes(menus) { // 是否有新的路由 let hasNewRoutes = false const findAndAddRoutesByMenu = (menuList) =\u003e { menuList.forEach(menu =\u003e { let item = asyncRoutes.find(item =\u003e item.path == menu.frontpath) // 判断是否已经添加过路由 if (item \u0026\u0026 !router.hasRoute(item.path)) { router.addRoute('Admin', item) hasNewRoutes = true } if (menu.child \u0026\u0026 menu.child.length \u003e 0) { findAndAddRoutesByMenu(menu.child) } }) } findAndAddRoutesByMenu(menus) return hasNewRoutes } 动态路由主要通过两个函数实现。router.addRoute() 和 router.removeRoute()。它们只注册一个新的路由，也就是说，如果新增加的路由与当前位置相匹配，就需要你用 router.push() 或 router.replace() 来手动导航\n// 全局前置守卫 router.beforeEach(async (to, from, next) =\u003e { // 如果用户登录了，自动获取用户信息，并存储在vuex当中 let hasNewRoutes = false if (token) { let { menus } = await store.dispatch(\"getinfo\") // 动态添加路由 hasNewRoutes = addRoutes(menus); } // 设置页面标题 document.title = to.meta.title; hasNewRoutes ? next(to.fullPath) : next(); }) 标签导航方法 const tabList = ref([ { title: '后台首页', path: \"/\" } ]) // 添加标签导航 const addTab = (tab) =\u003e { // 判断是否存在 let notab = tabList.value.findIndex(item =\u003e item.path == tab.path) == -1; if (notab) { tabList.value.push(tab); } cookies.set(\"tabList\", tabList.value); } // 初始化标签导航列表 function initTabList() { let tbs = cookies.get(\"tabList\"); if (tbs) { tabList.value = tbs; } } initTabList() // onBeforeRouteUpdate 监听路由变化 onBeforeRouteUpdate((to, from) =\u003e { activeTab.value = to.path; addTab({ title: to.meta.title, path: to.path }); }) // 页面切换 const changeTab = (t) =\u003e { activeTab.value = t; router.push(t); } // 移除标签导航 const removeTab = (t) =\u003e { let tabs = tabList.value let a = activeTab.value if (a == t) { tabs.forEach((tab, index) =\u003e { if (tab.path == t) { const nextTab = tabs[index + 1] || tabs[index - 1] if (nextTab) { a = nextTab.path } } }) } activeTab.value = a; tabList.value = tabList.value.filter(tab =\u003e tab.path != t); cookies.set(\"tabList\", tabList.value); } Keep-alive 页面缓存 https://cn.vuejs.org/guide/built-ins/keep-alive.html#keepalive\n默认情况下，一个组件实例在被替换掉后会被销毁。这会导致它丢失其中所有已变化的状态——当这个组件再一次被显示时，会创建一个只带有初始状态的新实例。\n在切换时创建新的组件实例通常是有意义的，但在这个例子中，我们的确想要组件能在被“切走”的时候保留它们的状态。要解决这个问题，我们可以用 内置组件将这些动态组件包装起来：\n\u003cKeepAlive\u003e \u003ccomponent :is=\"activeComponent\" /\u003e \u003c/KeepAlive\u003e transition全局过渡动画 https://cn.vuejs.org/guide/built-ins/transition.html\n每个子页面只能有一个 根结点\nhttps://animate.style/ 动画效果！\nhttps://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.css\n权限控制 V-permission 自定义指令 // directives\\permission.js import store from \"~/store\" function hasPermission(value, el = false) { if (!Array.isArray(value)) { throw new Error(`需要配置权限，例如 v-permission=\"['getStatistics3,GET']\"`) } const hasAuth = value.findIndex(v =\u003e store.state.ruleNames.includes(v)) != -1 if (el \u0026\u0026 !hasAuth) { // 拿到当前元素的父元素，然后删除当前元素 el.parentNode \u0026\u0026 el.parentNode.removeChild(el) } return hasAuth } export default { install(app) { app.directive(\"permission\", { // el: 指令所绑定的元素，可以用来直接操作 DOM 。 // binding: 传递给指令的值，例如：v-my-directive=\"1 + 1\" 中，参数为 2。 mounted(el, binding) { hasPermission(binding.value, el) } }) } } // main.js import permission from '~/directives/permission' const app = createApp(App) app.use(permission) app.mount('#app') 运用\n// 直接调用 directives\\permission.js 中方法判断 不存在删除元素 \u003cel-col v-permission=\"['getStatistics3,GET']\" :span=\"12\" :offset=\"0\"\u003e \u003cIndexChart /\u003e \u003c/el-col\u003e 统计面板 Element Plus 提示插件： Element Plus Snippets\nLayout 布局\n卡片\ntag 标签\n骨架屏组件 在需要等待加载内容的位置设置一个骨架屏，某些场景下比 Loading 的视觉效果更好。\n数字滚动动画 gsap\n封装组件 /components/CountTo.vue \u003ctemplate\u003e {{ d.num.toFixed(2) }} \u003c/template\u003e \u003cscript setup\u003e import { reactive, watch } from 'vue'; import gsap from 'gsap' const props = defineProps({ value: { type: Number, default: 0 } }) const d = reactive({ num: 0 }) function AnimateToValue() { gsap.to(d, { duration: 0.5, num: props.value }) } AnimateToValue() // watch 是 Vue.js 3 中的一个 API，用于监听变量或者对象的变化，并在变化时执行回调函数。 watch(() =\u003e props.value, () =\u003e AnimateToValue() ) \u003c/script\u003e 应用以及使用 import CountTo from \"~/components/CountTo.vue\"; \u003cspan class=\"text-3xl font-bold text-gray-500\"\u003e \u003cCountTo :value=\"item.value\" /\u003e \u003c/span\u003e Echarts 初步实现 \u003ctemplate\u003e \u003cel-card shadow=\"never\" class=\"mt-5\"\u003e \u003ctemplate #header\u003e \u003cdiv class=\"flex justify-between\"\u003e \u003cspan class=\"text-sm\"\u003e订单统计\u003c/span\u003e \u003cdiv\u003e \u003cel-check-tag v-for=\"(item, index) in options\" :key=\"index\" :checked=\"current == item.value\" style=\"margin-right: 8px\" @click=\"handleChoose(item.value)\"\u003e{{ item.text }}\u003c/el-check-tag\u003e \u003c/div\u003e \u003c/div\u003e \u003c/template\u003e \u003cdiv id=\"chart\" style=\"width: 100%;height: 300px;\"\u003e\u003c/div\u003e \u003c/el-card\u003e \u003c/template\u003e \u003cscript setup\u003e import { ref, onMounted } from 'vue'; import * as echarts from 'echarts'; import { getStatistics3 } from \"~/api/index.js\" const current = ref(\"week\") const options = [{ text: \"近1个月\", value: \"month\" }, { text: \"近1周\", value: \"week\" }, { text: \"近24小时\", value: \"hour\" }] const handleChoose = (type) =\u003e { current.value = type; getData(); } var myChart = null onMounted(() =\u003e { var chartDom = document.getElementById('chart'); myChart = echarts.init(chartDom); getData() }) function getData() { var option; option = { xAxis: { type: 'category', data: [] }, yAxis: { type: 'value' }, series: [ { data: [], type: 'bar', showBackground: true, backgroundStyle: { color: 'rgba(180, 180, 180, 0.2)' } } ] }; // option \u0026\u0026 myChart.setOption(option); myChart.showLoading() getStatistics3(current.value).then(res=\u003e{ option.xAxis.data = res.x option.series[0].data = res.y myChart.setOption(option) }).finally(()=\u003e{ myChart.hideLoading() }) } \u003c/script\u003e loading 动画\nmyChart.showLoading() myChart.hideLoading() 在页面销毁之前释放图表 不然可能出现白屏现象\nhttps://echarts.apache.org/handbook/zh/concepts/chart-size/#%E5%AE%B9%E5%99%A8%E8%8A%82%E7%82%B9%E8%A2%AB%E9%94%80%E6%AF%81%E4%BB%A5%E5%8F%8A%E8%A2%AB%E9%87%8D%E5%BB%BA%E6%97%B6\n假设页面中存在多个标签页，每个标签页都包含一些图表。当选中一个标签页的时候，其他标签页的内容在 DOM 中被移除了。这样，当用户再选中这些标签页的时候，就会发现图表“不见”了。 本质上，这是由于图表的容器节点被移除导致的。即使之后该节点被重新添加，图表所在的节点也已经不存在了。 正确的做法是，在图表容器被销毁之后，调用 echartsInstance.dispose 销毁实例，在图表容器重新被添加后再次调用 echarts.init 初始化。 import { ref, onMounted, onBeforeUnmount } from 'vue'; onBeforeUnmount(()=\u003e{ if(myChart) echarts.dispose(myChart) }) 图表跟随画面变化 https://vueuse.org/core/useResizeObserver/#useresizeobserver https://echarts.apache.org/handbook/zh/concepts/chart-size/#%E4%B8%BA%E5%9B%BE%E8%A1%A8%E8%AE%BE%E7%BD%AE%E7%89%B9%E5%AE%9A%E7%9A%84%E5%A4%A7%E5%B0%8F \u003cdiv ref=\"el\" id=\"chart\" style=\"width: 100%;height: 300px;\"\u003e\u003c/div\u003e \u003cscript setup\u003e import { useResizeObserver } from '@vueuse/core'; const el = ref(null); useResizeObserver(el, (entries) =\u003e { const entry = entries[0]; const { width, height } = entry.contentRect; myChart.resize({ width, height }); }); \u003c/script\u003e 页面变化监听 //使用防抖 (setTimeout定时器) const getWindowInfo = () =\u003e { const windowInfo = { width: window.innerWidth, hight: window.innerHeight } }; const debounce = (fn, delay) =\u003e { let timer; return function() { if (timer) { clearTimeout(timer); } timer = setTimeout(() =\u003e { fn(); }, delay); } }; //触发事件 触发时间（指定时间内执行事件） const cancalDebounce = debounce(getWindowInfo, 500); window.addEventListener('resize', cancalDebounce); // vue3 使用生命周期销毁钩子 onUnmounted(() =\u003e { console.log('onUnmounted','打印是否生效'); //移除监听事件 window.removeEventListener('resize', cancalDebounce); }) 样例\n\u003ctemplate\u003e \u003cdiv ref=\"el\"\u003e \u003cel-container class=\"bg-white rounded\" :style=\"{ height: h + 'px' }\"\u003e \u003cel-header\u003eHeader\u003c/el-header\u003e \u003cel-container\u003e \u003cel-aside width=\"200px\"\u003eAside\u003c/el-aside\u003e \u003cel-main\u003eMain\u003c/el-main\u003e \u003c/el-container\u003e \u003c/el-container\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript setup\u003e import { watch, ref, onUnmounted } from 'vue'; import { useResizeObserver } from '@vueuse/core'; // 获取屏幕高度 let windowHeight = window.innerHeight || document.documentElement.clientHeight // 计算表格高度: 屏幕高度 - 头部高度 - 页签高度 - padding const h = ref(windowHeight - 60 - 44 - 40); //使用防抖 (setTimeout定时器) const getWindowInfo = () =\u003e { const windowInfo = { width: window.innerWidth, hight: window.innerHeight } // 改变 h 的值 h.value = windowInfo.hight - 60 - 44 - 40; }; const debounce = (fn, delay) =\u003e { let timer; return function () { if (timer) { clearTimeout(timer); } timer = setTimeout(() =\u003e { fn(); }, delay); } }; // 触发事件 触发时间（指定时间内执行事件） const cancalDebounce = debounce(getWindowInfo, 500); window.addEventListener('resize', cancalDebounce); // 销毁监听 onUnmounted(() =\u003e { //移除监听事件 window.removeEventListener('resize', cancalDebounce); }); \u003c/script\u003e ","wordCount":"8027","inLanguage":"zh-cn","datePublished":"2023-04-05T16:04:23+08:00","dateModified":"2023-04-05T16:04:23+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://waite.wang/posts/project/vite-shopmall-project-begin/"},"publisher":{"@type":"Organization","name":"隶笔难书","logo":{"@type":"ImageObject","url":"https://waite.wang/images/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://waite.wang/ accesskey=h title="隶笔难书 (Alt + H)">隶笔难书</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://waite.wang/ title=首页><span>首页</span></a></li><li><a href=https://waite.wang/search title=搜索><span>搜索</span></a></li><li><a href=https://waite.wang/categories title=分类><span>分类</span></a></li><li><a href=https://waite.wang/tags title=标签><span>标签</span></a></li><li><a href=https://waite.wang/archives title=归档><span>归档</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><script src=https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js></script><script>const elementCode=".mermaid",loadMermaid=function(e){mermaid.initialize({theme:e}),mermaid.init({theme:e},document.querySelectorAll(elementCode))},saveOriginalData=function(){return new Promise((e,t)=>{try{var n=document.querySelectorAll(elementCode),s=n.length;n.forEach(t=>{t.setAttribute("data-original-code",t.innerHTML),s--,s==0&&e()})}catch(e){t(e)}})},resetProcessed=function(){return new Promise((e,t)=>{try{var n=document.querySelectorAll(elementCode),s=n.length;n.forEach(t=>{t.getAttribute("data-original-code")!=null&&(t.removeAttribute("data-processed"),t.innerHTML=t.getAttribute("data-original-code")),s--,s==0&&e()})}catch(e){t(e)}})};saveOriginalData().catch(console.error);let isdark=document.body.className.includes("dark");isdark?resetProcessed().then(loadMermaid("dark")).catch(console.error):resetProcessed().then(loadMermaid("neutral")).catch(console.error),document.getElementById("theme-toggle").addEventListener("click",()=>{resetProcessed(),document.body.className.includes("dark")?loadMermaid("neutral"):loadMermaid("dark").catch(console.error)})</script><h1 class="post-title entry-hint-parent">Vite B端后台管理起始项</h1><div class=post-meta>Created: &nbsp;<span title='2023-04-05 16:04:23 +0800 +0800'>2023-04-05</span>&nbsp;·&nbsp;17 min&nbsp;·&nbsp;8027 words&nbsp;|&nbsp;<a href=https://github.com/Waite0603/HugoBlog/edit/main/content/posts/project/vite-shopmall-project-begin.md rel="noopener noreferrer" target=_blank>在 GitHub 编辑</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%88%9b%e5%bb%bavite%e9%a1%b9%e7%9b%ae%e5%b9%b6%e5%ae%89%e8%a3%85vscode%e6%8f%92%e4%bb%b6 aria-label=创建vite项目并安装vscode插件>创建vite项目并安装vscode插件</a><ul><li><a href=#vite aria-label=Vite>Vite</a></li><li><a href=#%e6%8f%92%e4%bb%b6%e5%ae%89%e8%a3%85 aria-label=插件安装>插件安装</a><ul><li><a href=#%e7%94%a8%e6%b3%95 aria-label=用法>用法</a><ul><li><a href=#%e5%ae%8c%e6%95%b4%e5%bc%95%e5%85%a5 aria-label=完整引入>完整引入</a></li></ul></li></ul></li></ul></li><li><a href=#%e7%99%bb%e9%99%86%e9%a1%b5%e9%9d%a2%e5%bc%80%e5%8f%91 aria-label=登陆页面开发>登陆页面开发</a><ul><li><a href=#layout-%e5%93%8d%e5%ba%94%e5%bc%8f%e5%b8%83%e5%b1%80 aria-label="Layout 响应式布局">Layout 响应式布局</a></li><li><a href=#%e6%a0%b7%e5%bc%8f aria-label=样式>样式</a></li></ul></li><li><a href=#%e5%8a%a8%e6%80%81%e9%a1%b5%e9%9d%a2%e6%a0%87%e9%a2%98 aria-label=动态页面标题>动态页面标题</a></li><li><a href=#%e5%90%8e%e5%8f%b0-layout-%e5%bc%80%e5%8f%91 aria-label="后台 Layout 开发">后台 Layout 开发</a><ul><li><a href=#%e7%bb%84%e4%bb%b6%e5%bc%95%e7%94%a8 aria-label=组件引用>组件引用</a></li></ul></li><li><a href=#%e5%a4%b4%e9%83%a8%e4%bb%a3%e7%a0%81 aria-label=头部代码>头部代码</a><ul><li><a href=#%e9%a1%b5%e9%9d%a2%e5%88%b7%e6%96%b0%e5%92%8c%e5%85%a8%e5%b1%8f aria-label=页面刷新和全屏>页面刷新和全屏</a></li></ul></li><li><a href=#%e9%80%9a%e7%94%a8%e6%8a%bd%e5%b1%89%e7%bb%84%e4%bb%b6%e5%b0%81%e8%a3%85 aria-label=通用抽屉组件封装>通用抽屉组件封装</a></li><li><a href=#%e8%8f%9c%e5%8d%95%e6%a0%8f aria-label=菜单栏>菜单栏</a><ul><li><a href=#%e6%a0%b9%e6%8d%ae%e8%8f%9c%e5%8d%95%e6%b7%bb%e5%8a%a0%e8%b7%af%e7%94%b1 aria-label=根据菜单添加路由>根据菜单添加路由</a><ul><li><a href=#check-%e8%b7%af%e7%94%b1 aria-label="check 路由">check 路由</a></li><li><a href=#%e6%a0%87%e7%ad%be%e5%af%bc%e8%88%aa%e6%96%b9%e6%b3%95 aria-label=标签导航方法>标签导航方法</a></li></ul></li><li><a href=#keep-alive-%e9%a1%b5%e9%9d%a2%e7%bc%93%e5%ad%98 aria-label="Keep-alive 页面缓存">Keep-alive 页面缓存</a></li><li><a href=#transition%e5%85%a8%e5%b1%80%e8%bf%87%e6%b8%a1%e5%8a%a8%e7%94%bb aria-label=transition全局过渡动画>transition全局过渡动画</a></li></ul></li><li><a href=#%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6-v-permission aria-label="权限控制 V-permission">权限控制 V-permission</a></li><li><a href=#%e7%bb%9f%e8%ae%a1%e9%9d%a2%e6%9d%bf aria-label=统计面板>统计面板</a><ul><li><a href=#%e6%95%b0%e5%ad%97%e6%bb%9a%e5%8a%a8%e5%8a%a8%e7%94%bb aria-label=数字滚动动画>数字滚动动画</a></li><li><a href=#echarts aria-label=Echarts>Echarts</a><ul><li><a href=#%e5%88%9d%e6%ad%a5%e5%ae%9e%e7%8e%b0 aria-label=初步实现>初步实现</a></li><li><a href=#%e5%9b%be%e8%a1%a8%e8%b7%9f%e9%9a%8f%e7%94%bb%e9%9d%a2%e5%8f%98%e5%8c%96 aria-label=图表跟随画面变化>图表跟随画面变化</a></li><li><a href=#%e9%a1%b5%e9%9d%a2%e5%8f%98%e5%8c%96%e7%9b%91%e5%90%ac aria-label=页面变化监听>页面变化监听</a></li></ul></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=创建vite项目并安装vscode插件>创建vite项目并安装vscode插件<a hidden class=anchor aria-hidden=true href=#创建vite项目并安装vscode插件>#</a></h2><h3 id=vite>Vite<a hidden class=anchor aria-hidden=true href=#vite>#</a></h3><p><strong>Vite 是一个 web 开发构建工具，由于其原生 ES 模块导入方式，可以实现闪电般的冷服务器启动.通过在终端中运行以下命令，可以使用 Vite 快速构建 Vue 项目</strong></p><blockquote><p>兼容性注意</p><p>Vite 需要 Node.js 版本 14.18+，16+。然而，有些模板需要依赖更高的 Node 版本才能正常运行，当你的包管理器发出警告时，请注意升级你的 Node 版本。</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-batchfile data-lang=batchfile><span class=line><span class=cl>使用 NPM:
</span></span><span class=line><span class=cl>$ npm create vite@latest
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>使用 Yarn:
</span></span><span class=line><span class=cl>$ yarn create vite
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>使用 PNPM:
</span></span><span class=line><span class=cl>$ pnpm create vite
</span></span></code></pre></div><p>然后按照提示操作即可！</p><p>你还可以通过附加的命令行选项直接指定项目名称和你想要使用的模板。例如，要构建一个 Vite + Vue 项目，运行:</p><pre class=mermaid># npm 6.x
npm create vite@latest my-vue-app --template vue

# npm 7+, extra double-dash is needed:
npm create vite@latest my-vue-app -- --template vue

# yarn
yarn create vite my-vue-app --template vue

# pnpm
pnpm create vite my-vue-app --template vue
</pre><p>查阅更多可以查看
<a href=https://cn.vitejs.dev/guide/ target=_blank>Vite</a> and
<a href=https://cn.vuejs.org/ target=_blank>Vue3</a> 官网</p><p><img alt=image.png loading=lazy src=https://img.waite.wang/images/2023/02/11/image.png></p><h3 id=插件安装>插件安装<a hidden class=anchor aria-hidden=true href=#插件安装>#</a></h3><ol><li>Vue Language Features (Volar): VueLF 是一个专门为 Vue 3 构建的语言支持插件。它基于@vue/reactivity按需计算一切，实现原生 TypeScript 语言服务级别的性能。</li><li>Vue 3 Snippets: Vue 代码提示</li><li>WindiCSS IntelliSense</li><li>Stylelint: 然后禁用项目的 css 和 scss 验证。 (ctrl+shift+p) 并搜索“设置 json”<div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=s2>&#34;scss.validate&#34;</span><span class=err>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;css.validate&#34;</span><span class=err>:</span> <span class=kc>false</span>
</span></span></code></pre></div><pre class=mermaid> 在项目根目录stylelint.config.js中创建 stylelint 插件配置文件, 添加以下内容以忽略规则apply, tailwind,etc:
</pre></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>rules</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;at-rule-no-unknown&#39;</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>ignoreAtRules</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;tailwind&#39;</span><span class=p>,</span> <span class=s1>&#39;apply&#39;</span><span class=p>,</span> <span class=s1>&#39;variants&#39;</span><span class=p>,</span> <span class=s1>&#39;responsive&#39;</span><span class=p>,</span> <span class=s1>&#39;screen&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;declaration-block-trailing-semicolon&#39;</span><span class=o>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;no-descending-specificity&#39;</span><span class=o>:</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=element-plus><a href=https://element-plus.org/zh-CN/ target=_blank>Element-plus</a></h2><p><a href=https://element-plus.org/zh-CN/ target=_blank>https://element-plus.org/zh-CN/</a></p><p>我们建议您使用包管理器（如 NPM、Yarn 或 pnpm）安装 Element Plus，然后您就可以使用打包工具，例如 Vite 或 webpack。</p><pre class=mermaid># 选择一个你喜欢的包管理器

# NPM
$ npm install element-plus --save

# Yarn
$ yarn add element-plus

# pnpm
$ pnpm install element-plus
</pre><h4 id=用法>用法<a hidden class=anchor aria-hidden=true href=#用法>#</a></h4><h5 id=完整引入>完整引入<a hidden class=anchor aria-hidden=true href=#完整引入>#</a></h5><p>如果你对打包后的文件大小不是很在乎，那么使用完整导入会更方便。</p><pre class=mermaid>// main.ts
import { createApp } from &#39;vue&#39;
import ElementPlus from &#39;element-plus&#39;
import &#39;element-plus/dist/index.css&#39;
import App from &#39;./App.vue&#39;

const app = createApp(App)

app.use(ElementPlus)
app.mount(&#39;#app&#39;)
</pre><h2 id=windi-css><a href=https://cn.windicss.org/guide/ target=_blank>Windi CSS</a></h2><p><a href=https://cn.windicss.org/guide/ target=_blank>https://cn.windicss.org/guide/</a></p><ul><li>安装相关包：</li></ul><pre class=mermaid>npm i -D vite-plugin-windicss windicss
</pre><ul><li>然后，在你的 Vite 配置中添加插件：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// vite.config.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>WindiCSS</span> <span class=nx>from</span> <span class=s1>&#39;vite-plugin-windicss&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>plugins</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=nx>WindiCSS</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ul><li>最后，在你的 Vite 入口文件中导入 virtual:windi.css：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=s1>&#39;virtual:windi.css&#39;</span>
</span></span></code></pre></div><ul><li>使用及 @apply 简化代码</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span> <span class=nx>setup</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/script&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>template</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=nx>button</span> <span class=kr>class</span><span class=o>=</span><span class=s1>&#39;btn&#39;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>按钮</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=err>/button&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>style</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>btn</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=err>@</span><span class=nx>apply</span> <span class=nx>bg</span><span class=o>-</span><span class=nx>purple</span><span class=o>-</span><span class=mi>500</span> <span class=nx>text</span><span class=o>-</span><span class=nx>indigo</span><span class=o>-</span><span class=mi>50</span> <span class=nx>px</span><span class=o>-</span><span class=mi>4</span> <span class=nx>py</span><span class=o>-</span><span class=mi>2</span> <span class=nx>rounded</span><span class=o>-</span><span class=nx>full</span> <span class=nx>transition</span><span class=o>-</span><span class=nx>all</span> <span class=nx>duration</span><span class=o>-</span><span class=mi>500</span> <span class=nx>hover</span><span class=o>:</span><span class=p>(</span> <span class=nx>bg</span><span class=o>-</span><span class=nx>purple</span><span class=o>-</span><span class=mi>900</span><span class=p>)</span> <span class=nx>focus</span><span class=o>:</span><span class=p>(</span><span class=nx>ring</span><span class=o>-</span><span class=mi>8</span> <span class=nx>ring</span><span class=o>-</span><span class=nx>purple</span><span class=o>-</span><span class=mi>900</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/style&gt;</span>
</span></span></code></pre></div><h2 id=vue-router><a href=https://router.vuejs.org/zh/index.html target=_blank>Vue-router</a></h2><p><a href=https://router.vuejs.org/zh/index.html target=_blank>https://router.vuejs.org/zh/index.html</a></p><pre class=mermaid>npm install vue-router@4
yarn add vue-router@4
</pre><ul><li>/router/index.js</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>createRouter</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 函数用来创建一个路由实例
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>createWebHashHistory</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 用来创建一个基于哈希路由的历史对象
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue-router&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>routes</span> <span class=o>=</span> <span class=p>[{</span>
</span></span><span class=line><span class=cl>    <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Home&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>component</span><span class=o>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=kr>import</span><span class=p>(</span><span class=s1>&#39;../views/Home.vue&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 这段代码定义了一个路由器，该路由器使用createWebHashHistory()创建的历史记录对象和给定的路由（routes）来定义路由。
</span></span></span><span class=line><span class=cl><span class=c1>// createWebHashHistory()创建的历史记录对象会把URL的片段存储在window.location.hash中，以支持前进和后退按钮和书签。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>router</span> <span class=o>=</span> <span class=nx>createRouter</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>history</span><span class=o>:</span> <span class=nx>createWebHashHistory</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=nx>routes</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>router</span>
</span></span></code></pre></div><ul><li>main.js</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>router</span> <span class=nx>from</span> <span class=s1>&#39;./router&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>createApp</span><span class=p>(</span><span class=nx>App</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>router</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>mount</span><span class=p>(</span><span class=s1>&#39;#app&#39;</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=捕获所有路由或-404-not-found-路由><a href=https://router.vuejs.org/zh/guide/essentials/dynamic-matching.html#%E6%8D%95%E8%8E%B7%E6%89%80%E6%9C%89%E8%B7%AF%E7%94%B1%E6%88%96-404-not-found-%E8%B7%AF%E7%94%B1 target=_blank>捕获所有路由或 404 Not found 路由</a></h3><p>常规参数只匹配 url 片段之间的字符，用 / 分隔。如果我们想匹配任意路径，我们可以使用自定义的 路径参数 正则表达式，在 路径参数 后面的括号中加入 正则表达式 :</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>routes</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 将匹配所有内容并将其放在 `$route.params.pathMatch` 下
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>{</span> <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/:pathMatch(.*)*&#39;</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;NotFound&#39;</span><span class=p>,</span> <span class=nx>component</span><span class=o>:</span> <span class=nx>NotFound</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 将匹配以 `/user-` 开头的所有内容，并将其放在 `$route.params.afterUser` 下
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>{</span> <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/user-:afterUser(.*)&#39;</span><span class=p>,</span> <span class=nx>component</span><span class=o>:</span> <span class=nx>UserGeneric</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><h2 id=登陆页面开发>登陆页面开发<a hidden class=anchor aria-hidden=true href=#登陆页面开发>#</a></h2><ol><li><a href=https://element-plus.gitee.io/zh-CN/component/layout.html target=_blank>ElementPlus_Layout 布局</a>: 通过基础的 24 分栏，迅速简便地创建布局。</li><li><a href=https://cn.windicss.org/utilities/layout/flexbox.html#flex target=_blank>Flexbox</a>: 使用 flex 创建一个块级 flex 容器。</li></ol><h3 id=layout-响应式布局>Layout 响应式布局<a hidden class=anchor aria-hidden=true href=#layout-响应式布局>#</a></h3><p>参照了 Bootstrap 的 响应式设计，预设了五个响应尺寸：xs、sm、md、lg 和 xl。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>el-row</span> <span class=na>:gutter</span><span class=o>=</span><span class=s>&#34;10&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>el-col</span> <span class=na>:xs</span><span class=o>=</span><span class=s>&#34;8&#34;</span> <span class=na>:sm</span><span class=o>=</span><span class=s>&#34;6&#34;</span> <span class=na>:md</span><span class=o>=</span><span class=s>&#34;4&#34;</span> <span class=na>:lg</span><span class=o>=</span><span class=s>&#34;3&#34;</span> <span class=na>:xl</span><span class=o>=</span><span class=s>&#34;1&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>&gt;&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;grid-content ep-bg-purple&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>/&gt;&lt;/</span><span class=nt>el-col</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>el-col</span> <span class=na>:xs</span><span class=o>=</span><span class=s>&#34;4&#34;</span> <span class=na>:sm</span><span class=o>=</span><span class=s>&#34;6&#34;</span> <span class=na>:md</span><span class=o>=</span><span class=s>&#34;8&#34;</span> <span class=na>:lg</span><span class=o>=</span><span class=s>&#34;9&#34;</span> <span class=na>:xl</span><span class=o>=</span><span class=s>&#34;11&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>&gt;&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;grid-content ep-bg-purple-light&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>/&gt;&lt;/</span><span class=nt>el-col</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>el-col</span> <span class=na>:xs</span><span class=o>=</span><span class=s>&#34;4&#34;</span> <span class=na>:sm</span><span class=o>=</span><span class=s>&#34;6&#34;</span> <span class=na>:md</span><span class=o>=</span><span class=s>&#34;8&#34;</span> <span class=na>:lg</span><span class=o>=</span><span class=s>&#34;9&#34;</span> <span class=na>:xl</span><span class=o>=</span><span class=s>&#34;11&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>&gt;&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;grid-content ep-bg-purple&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>/&gt;&lt;/</span><span class=nt>el-col</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>el-col</span> <span class=na>:xs</span><span class=o>=</span><span class=s>&#34;8&#34;</span> <span class=na>:sm</span><span class=o>=</span><span class=s>&#34;6&#34;</span> <span class=na>:md</span><span class=o>=</span><span class=s>&#34;4&#34;</span> <span class=na>:lg</span><span class=o>=</span><span class=s>&#34;3&#34;</span> <span class=na>:xl</span><span class=o>=</span><span class=s>&#34;1&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>&gt;&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;grid-content ep-bg-purple-light&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>/&gt;&lt;/</span><span class=nt>el-col</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>el-row</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>el-col</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>border-radius</span><span class=p>:</span> <span class=mi>4</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>grid-content</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>border-radius</span><span class=p>:</span> <span class=mi>4</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>min-height</span><span class=p>:</span> <span class=mi>36</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span></code></pre></div><table><thead><tr><th>xs</th><th>&lt;768px 响应式栅格数或者栅格属性对象</th><th>number / object</th></tr></thead><tbody><tr><td>sm</td><td>≥768px 响应式栅格数或者栅格属性对象</td><td>number / object</td></tr><tr><td>md</td><td>≥992px 响应式栅格数或者栅格属性对象</td><td>number / object</td></tr><tr><td>lg</td><td>≥1200px 响应式栅格数或者栅格属性对象</td><td>number / object</td></tr><tr><td>xl</td><td>≥1920px 响应式栅格数或者栅格属性对象</td><td>number / object</td></tr></tbody></table><ol start=3><li><a href=https://element-plus.gitee.io/zh-CN/component/icon.html target=_blank>icon 图标引入</a></li></ol><p><a href=https://element-plus.gitee.io/zh-CN/component/icon.html target=_blank>https://element-plus.gitee.io/zh-CN/component/icon.html</a></p><pre class=mermaid># 选择一个你喜欢的包管理器

# NPM
$ npm install @element-plus/icons-vue
# Yarn
$ yarn add @element-plus/icons-vue
# pnpm
$ pnpm install @element-plus/icons-vue
</pre><blockquote><p>注册所有图标</p><p>您需要从 @element-plus/icons-vue 中导入所有图标并进行全局注册。</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// main.ts
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// 如果您正在使用CDN引入，请删除下面一行。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=o>*</span> <span class=kr>as</span> <span class=nx>ElementPlusIconsVue</span> <span class=kr>from</span> <span class=s1>&#39;@element-plus/icons-vue&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>createApp</span><span class=p>(</span><span class=nx>App</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=p>[</span><span class=nx>key</span><span class=p>,</span> <span class=nx>component</span><span class=p>]</span> <span class=k>of</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>entries</span><span class=p>(</span><span class=nx>ElementPlusIconsVue</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>app</span><span class=p>.</span><span class=nx>component</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>component</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><blockquote><p>使用(插槽)</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>input</span> <span class=nx>v</span><span class=o>-</span><span class=nx>model</span><span class=o>=</span><span class=s2>&#34;form.username&#34;</span> <span class=nx>placeholder</span><span class=o>=</span><span class=s2>&#34;请输入用户名&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=nx>template</span> <span class=err>#</span><span class=nx>prefix</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>icon</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;el-input__icon&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>search</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/el-icon&gt;</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/el-input&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Calendar</span><span class=p>,</span> <span class=nx>Search</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@element-plus/icons-vue&#39;</span>
</span></span></code></pre></div><ol start=4><li>外部 icon</li></ol><p><a href=https://www.iconfont.cn/ target=_blank>阿里巴巴矢量图库iconfont</a></p><p>选择图标加入购物车, 直接下载引用</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// mian.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=s1>&#39;./assets/icon/iconfont.css&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>link</span> <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;primary&#34;</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;text-white&#34;</span> <span class=err>@</span><span class=nx>click</span><span class=o>=</span><span class=s2>&#34;JumpToGithub&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=nx>i</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;iconfont icon-icon_github mr-1&#34;</span><span class=o>&gt;&lt;</span><span class=err>/i&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>Github</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/el-link&gt;</span>
</span></span></code></pre></div><h3><a href=https://cn.vuejs.org/api/sfc-script-setup.html#script-setup target=_blank></a></h3><p>setup 是在单文件组件 (SFC) 中使用组合式 API 的编译时语法糖。当同时使用 SFC 与组合式 API 时该语法是默认推荐。相比于普通的 语法，它具有更多优势：</p><ul><li>更少的样板内容，更简洁的代码。</li><li>能够使用纯 TypeScript 声明 props 和自定义事件。</li><li>更好的运行时性能 (其模板会被编译成同一作用域内的渲染函数，避免了渲染上下文代理对象)。</li><li>更好的 IDE 类型推导性能 (减少了语言服务器从代码中抽取类型的工作)。</li></ul><blockquote><ol><li>普通的 只在组件被首次引入的时候执行一次不同， 中的代码会在每次组件实例被创建的时候执行。</li><li>当使用 的时候，任何在 声明的顶层的绑定 (包括变量，函数声明，以及 import 导入的内容) 都能在模板中直接使用</li><li>import 导入的内容也会以同样的方式暴露。这意味着我们可以在模板表达式中直接使用导入的 helper 函数，而不需要通过 methods 选项来暴露它</li></ol></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span> <span class=nx>setup</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>// 变量
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>msg</span> <span class=o>=</span> <span class=s1>&#39;Hello!&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 函数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>log</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>msg</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/script&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>template</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=nx>button</span> <span class=err>@</span><span class=nx>click</span><span class=o>=</span><span class=s2>&#34;log&#34;</span><span class=o>&gt;</span><span class=p>{{</span> <span class=nx>msg</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span> <span class=nx>setup</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>capitalize</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;./helpers&#39;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/script&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>template</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span><span class=p>{{</span> <span class=nx>capitalize</span><span class=p>(</span><span class=s1>&#39;hello&#39;</span><span class=p>)</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span></code></pre></div><blockquote><p>以下为简单示例代码</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>template</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>li</span><span class=o>&gt;</span><span class=p>{{</span> <span class=nx>myref0</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/li&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>li</span><span class=o>&gt;</span><span class=p>{{</span> <span class=nx>myref1</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/li&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>li</span><span class=o>&gt;</span><span class=p>{{</span> <span class=nx>myref2</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/li&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>li</span><span class=o>&gt;</span><span class=p>{{</span> <span class=nx>myref3</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/li&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>li</span><span class=o>&gt;</span><span class=p>{{</span> <span class=nx>myrea0</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/li&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>li</span><span class=o>&gt;</span><span class=p>{{</span> <span class=nx>myrea1</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/li&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>li</span><span class=o>&gt;</span><span class=p>{{</span> <span class=nx>myrea2</span><span class=p>.</span><span class=nx>age</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/li&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>li</span><span class=o>&gt;</span><span class=p>{{</span> <span class=nx>myrea3</span><span class=p>.</span><span class=nx>user</span><span class=p>.</span><span class=nx>name</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/li&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>li</span><span class=o>&gt;</span><span class=p>{{</span> <span class=nx>myrea4</span><span class=p>.</span><span class=nx>one</span><span class=p>.</span><span class=nx>three</span><span class=p>.</span><span class=nx>age</span><span class=p>.</span><span class=nx>four</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/li&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/ul&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>button</span> <span class=err>@</span><span class=nx>click</span><span class=o>=</span><span class=s2>&#34;change&#34;</span><span class=o>&gt;</span><span class=nx>change</span><span class=o>&lt;</span><span class=err>/el-button&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>ref</span><span class=p>,</span> <span class=nx>reactive</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>setup</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>myref0</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>myref1</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>myref2</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>myref3</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=s1>&#39;myref3&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>myrea0</span> <span class=o>=</span> <span class=nx>reactive</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>myrea1</span> <span class=o>=</span> <span class=nx>reactive</span><span class=p>(</span><span class=s1>&#39;myrea1&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>myrea2</span> <span class=o>=</span> <span class=nx>reactive</span><span class=p>({</span> <span class=nx>age</span><span class=o>:</span> <span class=mi>3</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>myrea3</span> <span class=o>=</span> <span class=nx>reactive</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>user</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;zs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>myrea4</span> <span class=o>=</span> <span class=nx>reactive</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>top</span><span class=o>:</span> <span class=s1>&#39;top&#39;</span><span class=p>,</span> <span class=nx>one</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>two</span><span class=o>:</span> <span class=s2>&#34;two&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>three</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;LS&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>age</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=nx>four</span><span class=o>:</span> <span class=s2>&#34;four&#34;</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=kd>function</span> <span class=nx>change</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>myref0</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>myref1</span><span class=p>.</span><span class=nx>value</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>myref2</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>myref3</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=s1>&#39;MyRef333&#39;</span>
</span></span><span class=line><span class=cl>            <span class=nx>myrea0</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>myrea1</span> <span class=o>=</span> <span class=s1>&#39;myrea1111&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>myrea2</span><span class=p>.</span><span class=nx>age</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>myrea3</span><span class=p>.</span><span class=nx>user</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s2>&#34;ww&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>myrea4</span><span class=p>.</span><span class=nx>one</span><span class=p>.</span><span class=nx>three</span><span class=p>.</span><span class=nx>age</span><span class=p>.</span><span class=nx>four</span> <span class=o>=</span> <span class=s2>&#34;five&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>myref0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>myrea0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>myrea1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span> <span class=nx>myref0</span><span class=p>,</span> <span class=nx>myrea0</span><span class=p>,</span> <span class=nx>myref1</span><span class=p>,</span> <span class=nx>myrea1</span><span class=p>,</span> <span class=nx>myref2</span><span class=p>,</span> <span class=nx>myrea2</span><span class=p>,</span> <span class=nx>myref3</span><span class=p>,</span> <span class=nx>myrea3</span><span class=p>,</span> <span class=nx>myrea4</span><span class=p>,</span> <span class=nx>change</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/script&gt;</span>
</span></span></code></pre></div><pre class=mermaid>1                 =&gt;            1
2                 =&gt;            3
false             =&gt;            flase
MyRef3            =&gt;            MyRef333
0                 =&gt;            0
myrea1            =&gt;            myrea1
3                 =&gt;            4
zs                =&gt;            ww
four              =&gt;            five
</pre><ol><li>ref包裹简单类型，可以响应数据变化。</li><li>reactive包裹简单类型，不可以响应数据变化。</li><li>在更改ref包裹的值时，需要加 .value 来触发响应。</li><li>在页面中使用，{{ }}进行文本插值时，即使使用ref包裹也不需要添加 .value 属性，得益于在检测到 __v_isRef:true 时，vue会帮我们添加。</li></ol><h3 id=登录表单校验><a href=https://element-plus.gitee.io/zh-CN/component/form.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%A1%E9%AA%8C%E8%A7%84%E5%88%99 target=_blank>登录表单校验</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>form</span> <span class=nx>ref</span><span class=o>=</span><span class=s2>&#34;formRef&#34;</span> <span class=o>:</span><span class=nx>model</span><span class=o>=</span><span class=s2>&#34;form&#34;</span> <span class=o>:</span><span class=nx>rules</span><span class=o>=</span><span class=s2>&#34;rules&#34;</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;w-2/4&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>form</span><span class=o>-</span><span class=nx>item</span> <span class=nx>prop</span><span class=o>=</span><span class=s2>&#34;username&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>input</span> <span class=nx>v</span><span class=o>-</span><span class=nx>model</span><span class=o>=</span><span class=s2>&#34;form.username&#34;</span> <span class=nx>placeholder</span><span class=o>=</span><span class=s2>&#34;请输入用户名&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>template</span> <span class=err>#</span><span class=nx>prefix</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>icon</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>User</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/el-icon&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/el-input&gt;</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=err>/el-form-item&gt;</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>form</span><span class=o>-</span><span class=nx>item</span> <span class=nx>prop</span><span class=o>=</span><span class=s2>&#34;password&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>input</span> <span class=nx>v</span><span class=o>-</span><span class=nx>model</span><span class=o>=</span><span class=s2>&#34;form.password&#34;</span> <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;password&#34;</span> <span class=nx>placeholder</span><span class=o>=</span><span class=s2>&#34;请输入密码&#34;</span> <span class=nx>show</span><span class=o>-</span><span class=nx>password</span> <span class=err>@</span><span class=nx>keyup</span><span class=p>.</span><span class=nx>enter</span><span class=p>.</span><span class=kr>native</span><span class=o>=</span><span class=s2>&#34;onSubmit&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=nx>template</span> <span class=err>#</span><span class=nx>prefix</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>icon</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=o>&lt;</span><span class=nx>Lock</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/el-icon&gt;</span>
</span></span><span class=line><span class=cl>      <span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/el-input&gt;</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=err>/el-form-item&gt;</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>form</span><span class=o>-</span><span class=nx>item</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>button</span> <span class=nx>round</span> <span class=nx>color</span><span class=o>=</span><span class=s2>&#34;#2563eb &#34;</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;w-full&#34;</span> <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;primary&#34;</span> <span class=err>@</span><span class=nx>click</span><span class=o>=</span><span class=s2>&#34;onSubmit&#34;</span><span class=o>&gt;</span><span class=nx>登</span> <span class=nx>录</span><span class=o>&lt;</span><span class=err>/el-button&gt;</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=err>/el-form-item&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/el-form&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>reactive</span><span class=p>,</span> <span class=nx>ref</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// do not use same name with ref
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>form</span> <span class=o>=</span> <span class=nx>reactive</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>username</span><span class=o>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>password</span><span class=o>:</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>rules</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>username</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>required</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;用户名不能为空&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>trigger</span><span class=o>:</span> <span class=s1>&#39;blur&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>password</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>required</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;密码不能为空&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>trigger</span><span class=o>:</span> <span class=s1>&#39;blur&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>formRef</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>onSubmit</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>formRef</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>validate</span><span class=p>((</span><span class=nx>valid</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>valid</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;验证通过&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=axios><a href=http://axios-js.com/ target=_blank>Axios</a></h4><p><a href=http://axios-js.com/ target=_blank>http://axios-js.com/</a></p><pre class=mermaid>npm install axios
</pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// /src/axios.js
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>axios</span> <span class=nx>from</span> <span class=s1>&#39;axios&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=kr>import</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>VITE_APP_BASE_API</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>instance</span> <span class=o>=</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>baseURL</span><span class=o>:</span><span class=kr>import</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>VITE_APP_BASE_API</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>instance</span><span class=p>;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// vue.config.js
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>defineConfig</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vite&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>vue</span> <span class=nx>from</span> <span class=s1>&#39;@vitejs/plugin-vue&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>WindiCSS</span> <span class=nx>from</span> <span class=s1>&#39;vite-plugin-windicss&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>path</span> <span class=nx>from</span> <span class=s1>&#39;path&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// https://vitejs.dev/config/
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=k>default</span> <span class=nx>defineConfig</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 它将别名“~”映射到当前目录的“src”文件夹，因此在进行路径引用时，可以使用“~”，而不是使用相对路径。
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>resolve</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>alias</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;~&#39;</span><span class=o>:</span> <span class=nx>path</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=nx>__dirname</span><span class=p>,</span> <span class=s1>&#39;src&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>plugins</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=nx>vue</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=nx>WindiCSS</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>server</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>cors</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>proxy</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;/api&#39;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>target</span><span class=o>:</span> <span class=s1>&#39;https://ceshi13.dishait.cn&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>changeOrigin</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>rewrite</span><span class=o>:</span> <span class=p>(</span><span class=nx>path</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>path</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=sr>/^\/api/</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>build</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>sourcemap</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 消除打包大小超过500kb警告
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>chunkSizeWarningLimit</span><span class=o>:</span> <span class=mi>4000</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>axios</span> <span class=nx>from</span> <span class=s1>&#39;~/axios&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 通过 export 导出
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>const</span> <span class=nx>login</span> <span class=o>=</span> <span class=p>(</span><span class=nx>username</span><span class=p>,</span> <span class=nx>password</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/admin/login&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>username</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>password</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><h3 id=vueuse><a href=https://vueuse.org/ target=_blank>Vueuse</a></h3><p><a href=https://vueuse.org/ target=_blank>https://vueuse.org/</a></p><p>把一些原本不支持响应式的 api 等 支持响应式</p><h4 id=usecookies><a href=https://vueuse.org/integrations/useCookies/#usage target=_blank>useCookies</a></h4><pre class=mermaid>npm i @vueuse/integrations
npm i universal-cookie
</pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;container&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;row&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;col-12&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>el-button</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;primary&#34;</span> <span class=err>@</span><span class=na>click</span><span class=o>=</span><span class=s>&#34;set(&#39;test&#39;, &#39;test&#39;)&#34;</span><span class=p>&gt;</span>设置cookie<span class=p>&lt;/</span><span class=nt>el-button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>el-button</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;primary&#34;</span> <span class=err>@</span><span class=na>click</span><span class=o>=</span><span class=s>&#34;remove(&#39;test&#39;)&#34;</span><span class=p>&gt;</span>删除cookie<span class=p>&lt;/</span><span class=nt>el-button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>el-button</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;primary&#34;</span> <span class=err>@</span><span class=na>click</span><span class=o>=</span><span class=s>&#34;get(&#39;test&#39;)&#34;</span><span class=p>&gt;</span>读取cookie<span class=p>&lt;/</span><span class=nt>el-button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kr>import</span> <span class=p>{</span> <span class=nx>useCookies</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;@vueuse/integrations/useCookies&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>TokenKey</span> <span class=o>=</span> <span class=s2>&#34;admin-token&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>cookies</span> <span class=o>=</span> <span class=nx>useCookies</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 获取token
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>export</span> <span class=kd>function</span> <span class=nx>getToken</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>cookies</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>TokenKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 设置token
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>export</span> <span class=kd>function</span> <span class=nx>setToken</span><span class=p>(</span><span class=nx>token</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// token 有效期为 60 分钟
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>expires</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>(</span><span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=o>+</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>cookies</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>TokenKey</span><span class=p>,</span> <span class=nx>token</span><span class=p>,</span> <span class=p>{</span> <span class=nx>expires</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 移除token
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>export</span> <span class=kd>function</span> <span class=nx>removeToken</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>cookies</span><span class=p>.</span><span class=nx>remove</span><span class=p>(</span><span class=nx>TokenKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><h3 id=拦截器><a href=http://axios-js.com/zh-cn/docs/#%E6%8B%A6%E6%88%AA%E5%99%A8 target=_blank>拦截器</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>getToken</span><span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;~/composables/auth&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>toast</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;~/composables/util&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>axios</span> <span class=nx>from</span> <span class=s1>&#39;axios&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 创建axios实例
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>instance</span> <span class=o>=</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>baseURL</span><span class=o>:</span> <span class=kr>import</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>VITE_APP_BASE_API</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 添加请求拦截器
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>instance</span><span class=p>.</span><span class=nx>interceptors</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>config</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 在发送请求之前做些什么
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>getToken</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>token</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>config</span><span class=p>.</span><span class=nx>headers</span><span class=p>[</span><span class=s1>&#39;token&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=nx>token</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>config</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 对请求错误做些什么
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>reject</span><span class=p>(</span><span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 添加响应拦截器
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>instance</span><span class=p>.</span><span class=nx>interceptors</span><span class=p>.</span><span class=nx>response</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>response</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 对响应数据做点什么
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 对响应错误做点什么
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>toast</span><span class=p>(</span><span class=nx>error</span><span class=p>.</span><span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>msg</span><span class=p>,</span> <span class=s1>&#39;error&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>reject</span><span class=p>(</span><span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>instance</span><span class=p>;</span>
</span></span></code></pre></div><h3 id=vuex><a href=https://vuex.vuejs.org/zh/index.html target=_blank>Vuex</a></h3><blockquote><p>Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式 + 库。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。</p></blockquote><pre class=mermaid>npm install vuex@next --save
</pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// /store/index.js
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>createStore</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vuex&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 创建一个新的 store 实例
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>store</span> <span class=o>=</span> <span class=nx>createStore</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>state</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 用户信息
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>user</span><span class=o>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>mutations</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 设置用户信息
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>SET_USER_INFO</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span> <span class=nx>user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>state</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=nx>user</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>store</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useStore</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vuex&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>store</span> <span class=o>=</span> <span class=nx>useStore</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>store</span><span class=p>.</span><span class=nx>commit</span><span class=p>(</span><span class=s1>&#39;SET_USER_INFO&#39;</span><span class=p>,</span> <span class=nx>res2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>template</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;about&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>h1</span><span class=o>&gt;</span> <span class=p>{{</span> <span class=nx>$store</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>user</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/h1&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span></code></pre></div><blockquote><p>具体使用看
<a href=https://vuex.vuejs.org/zh/index.html target=_blank>官方文档</a></p></blockquote><h3 id=全局路由守卫><a href=https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%AB target=_blank>全局路由守卫</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// /src/permission.js
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// 处理权限相关
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>router</span> <span class=nx>from</span> <span class=s1>&#39;~/router&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>getToken</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;~/composables/auth&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>toast</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;~/composables/util&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 全局前置守卫
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=nx>beforeEach</span><span class=p>((</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 如果有token，就放行
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>getToken</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 如果没有token，就跳转到登录页
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>token</span> <span class=o>&amp;&amp;</span> <span class=nx>to</span><span class=p>.</span><span class=nx>path</span> <span class=o>!==</span> <span class=s1>&#39;/login&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>toast</span><span class=p>(</span><span class=s2>&#34;请先登录&#34;</span><span class=p>,</span> <span class=s2>&#34;warning&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>next</span> <span class=p>({</span> <span class=nx>path</span><span class=o>:</span> <span class=s2>&#34;/login&#34;</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 防止重复登录
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=p>(</span><span class=nx>token</span> <span class=o>&amp;&amp;</span> <span class=nx>to</span><span class=p>.</span><span class=nx>path</span> <span class=o>===</span> <span class=s1>&#39;/login&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>toast</span><span class=p>(</span><span class=s2>&#34;请先退出登录&#34;</span><span class=p>,</span> <span class=s2>&#34;warning&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>next</span> <span class=p>({</span> <span class=nx>path</span><span class=o>:</span> <span class=nx>from</span><span class=p>.</span><span class=nx>path</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>next</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// mian.js
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=s2>&#34;./permission&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>store</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=全局-loading><a href=https://www.npmjs.com/package/nprogress target=_blank>全局 loading</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// npm i nprogress
</span></span></span><span class=line><span class=cl><span class=c1>// main.js
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=s2>&#34;nprogress/nprogress.css&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// composable/util.js
</span></span></span><span class=line><span class=cl><span class=c1>// 显示全屏loading
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kd>function</span> <span class=nx>showFullLoading</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>nprogress</span><span class=p>.</span><span class=nx>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 隐藏全屏loading
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kd>function</span> <span class=nx>hideFullLoading</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>nprogress</span><span class=p>.</span><span class=nx>done</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// permission.js
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>toast</span><span class=p>,</span> <span class=nx>showFullLoading</span><span class=p>,</span> <span class=nx>hideFullLoading</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;~/composables/util&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 全局前置守卫
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=nx>beforeEach</span><span class=p>(</span><span class=kr>async</span> <span class=p>(</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 显示 loading
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>showFullLoading</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 全局后置守卫
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=nx>afterEach</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 隐藏 loading
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>hideFullLoading</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><h3 id=样式>样式<a hidden class=anchor aria-hidden=true href=#样式>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>#</span><span class=nn>nprogress</span> <span class=p>.</span><span class=nc>bar</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>background</span><span class=p>:</span> <span class=kc>wheat</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>     <span class=k>height</span><span class=p>:</span> <span class=mi>3</span><span class=kt>px</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=动态页面标题>动态页面标题<a hidden class=anchor aria-hidden=true href=#动态页面标题>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// router/index.js
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/login&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Login&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>component</span><span class=o>:</span> <span class=nx>Login</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>meta</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;登录&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// permission.js
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// 全局前置守卫
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=nx>beforeEach</span><span class=p>(</span><span class=kr>async</span> <span class=p>(</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 设置页面标题
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nb>document</span><span class=p>.</span><span class=nx>title</span> <span class=o>=</span> <span class=nx>to</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>title</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=后台-layout-开发>后台 Layout 开发<a hidden class=anchor aria-hidden=true href=#后台-layout-开发>#</a></h2><h3 id=组件引用>组件引用<a hidden class=anchor aria-hidden=true href=#组件引用>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// /layout/admin.vue
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>template</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>container</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>header</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>f</span><span class=o>-</span><span class=nx>header</span><span class=o>&gt;&lt;</span><span class=err>/f-header&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/el-header&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>container</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>aside</span> <span class=nx>width</span><span class=o>=</span><span class=s2>&#34;200px&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>f</span><span class=o>-</span><span class=nx>menu</span><span class=o>&gt;&lt;</span><span class=err>/f-menu&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/el-aside&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>main</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>f</span><span class=o>-</span><span class=nx>tag</span><span class=o>-</span><span class=nx>list</span><span class=o>&gt;&lt;</span><span class=err>/f-tag-list&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>router</span><span class=o>-</span><span class=nx>view</span><span class=o>&gt;&lt;</span><span class=err>/router-view&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/el-main&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/el-container&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>footer</span><span class=o>&gt;</span><span class=nx>Footer</span><span class=o>&lt;</span><span class=err>/el-footer&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/el-container&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>FHeader</span> <span class=nx>from</span> <span class=s1>&#39;./components/FHeader.vue&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>FMenu</span> <span class=nx>from</span> <span class=s1>&#39;./components/FMenu.vue&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>FTagList</span> <span class=nx>from</span> <span class=s1>&#39;./components/FTagList.vue&#39;</span><span class=p>;</span>
</span></span></code></pre></div><h2 id=头部代码>头部代码<a hidden class=anchor aria-hidden=true href=#头部代码>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>template</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;f-header&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>span</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;logo&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>icon</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;mr-1&#34;</span><span class=o>&gt;&lt;</span><span class=nx>eleme</span><span class=o>-</span><span class=nx>filled</span> <span class=o>/&gt;&lt;</span><span class=err>/el-icon&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nx>帝莎编程</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/span&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>icon</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;icon-btn&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>fold</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/el-icon&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>icon</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;icon-btn&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>refresh</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/el-icon&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>div</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;ml-auto flex items-center&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>icon</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;icon-btn&#34;</span><span class=o>&gt;&lt;</span><span class=nx>full</span><span class=o>-</span><span class=nx>screen</span> <span class=o>/&gt;&lt;</span><span class=err>/el-icon&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>dropdown</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;dropdown&#34;</span> <span class=err>@</span><span class=nx>command</span><span class=o>=</span><span class=s2>&#34;handleCommand&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>span</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;flex items-center text-light-50&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>avatar</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;mr-2&#34;</span> <span class=o>:</span><span class=nx>size</span><span class=o>=</span><span class=s2>&#34;25&#34;</span> <span class=o>:</span><span class=nx>src</span><span class=o>=</span><span class=s2>&#34;$store.state.user.avatar&#34;</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>{{</span> <span class=nx>$store</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>user</span><span class=p>.</span><span class=nx>username</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>icon</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;el-icon--right&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=o>&lt;</span><span class=nx>arrow</span><span class=o>-</span><span class=nx>down</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=err>/el-icon&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=err>/span&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>template</span> <span class=err>#</span><span class=nx>dropdown</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>dropdown</span><span class=o>-</span><span class=nx>menu</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>dropdown</span><span class=o>-</span><span class=nx>item</span> <span class=nx>command</span><span class=o>=</span><span class=s2>&#34;rePwd&#34;</span><span class=o>&gt;</span><span class=nx>修改密码</span><span class=o>&lt;</span><span class=err>/el-dropdown-item&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>dropdown</span><span class=o>-</span><span class=nx>item</span> <span class=nx>command</span><span class=o>=</span><span class=s2>&#34;logout&#34;</span><span class=o>&gt;</span><span class=nx>退出登录</span><span class=o>&lt;</span><span class=err>/el-dropdown-item&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=err>/el-dropdown-menu&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/el-dropdown&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>style</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>f</span><span class=o>-</span><span class=nx>header</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=err>@</span><span class=nx>apply</span> <span class=nx>flex</span> <span class=nx>items</span><span class=o>-</span><span class=nx>center</span> <span class=nx>bg</span><span class=o>-</span><span class=nx>indigo</span><span class=o>-</span><span class=mi>700</span> <span class=nx>text</span><span class=o>-</span><span class=nx>light</span><span class=o>-</span><span class=mi>50</span> <span class=nx>fixed</span> <span class=nx>top</span><span class=o>-</span><span class=mi>0</span> <span class=nx>left</span><span class=o>-</span><span class=mi>0</span> <span class=nx>right</span><span class=o>-</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>height</span><span class=o>:</span> <span class=mi>64</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>logo</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>width</span><span class=o>:</span> <span class=mi>250</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=err>@</span><span class=nx>apply</span> <span class=nx>flex</span> <span class=nx>justify</span><span class=o>-</span><span class=nx>center</span> <span class=nx>items</span><span class=o>-</span><span class=nx>center</span> <span class=nx>text</span><span class=o>-</span><span class=nx>xl</span> <span class=nx>font</span><span class=o>-</span><span class=nx>thin</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>icon</span><span class=o>-</span><span class=nx>btn</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=err>@</span><span class=nx>apply</span> <span class=nx>flex</span> <span class=nx>justify</span><span class=o>-</span><span class=nx>center</span> <span class=nx>items</span><span class=o>-</span><span class=nx>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>width</span><span class=o>:</span> <span class=mi>42</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>height</span><span class=o>:</span> <span class=mi>64</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>cursor</span><span class=o>:</span> <span class=nx>pointer</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>icon</span><span class=o>-</span><span class=nx>btn</span><span class=o>:</span><span class=nx>hover</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=err>@</span><span class=nx>apply</span> <span class=nx>bg</span><span class=o>-</span><span class=nx>indigo</span><span class=o>-</span><span class=mi>600</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>f</span><span class=o>-</span><span class=nx>header</span> <span class=p>.</span><span class=nx>dropdown</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>height</span><span class=o>:</span> <span class=mi>64</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>cursor</span><span class=o>:</span> <span class=nx>pointer</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=err>@</span><span class=nx>apply</span> <span class=nx>flex</span> <span class=nx>justify</span><span class=o>-</span><span class=nx>center</span> <span class=nx>items</span><span class=o>-</span><span class=nx>center</span> <span class=nx>mx</span><span class=o>-</span><span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/style&gt;</span>
</span></span></code></pre></div><h3 id=下拉菜单事件绑定><a href=https://element-plus.gitee.io/zh-CN/component/dropdown.html#dropdown-events target=_blank>下拉菜单事件绑定</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>dropdown</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;dropdown&#34;</span> <span class=err>@</span><span class=nx>command</span><span class=o>=</span><span class=s2>&#34;handleCommand&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>span</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;flex items-center text-light-50&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>avatar</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;mr-2&#34;</span> <span class=o>:</span><span class=nx>size</span><span class=o>=</span><span class=s2>&#34;25&#34;</span> <span class=o>:</span><span class=nx>src</span><span class=o>=</span><span class=s2>&#34;$store.state.user.avatar&#34;</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>{{</span> <span class=nx>$store</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>user</span><span class=p>.</span><span class=nx>username</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>icon</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;el-icon--right&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>arrow</span><span class=o>-</span><span class=nx>down</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/el-icon&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/span&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>template</span> <span class=err>#</span><span class=nx>dropdown</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>dropdown</span><span class=o>-</span><span class=nx>menu</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>dropdown</span><span class=o>-</span><span class=nx>item</span> <span class=nx>command</span><span class=o>=</span><span class=s2>&#34;rePwd&#34;</span><span class=o>&gt;</span><span class=nx>修改密码</span><span class=o>&lt;</span><span class=err>/el-dropdown-item&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>dropdown</span><span class=o>-</span><span class=nx>item</span> <span class=nx>command</span><span class=o>=</span><span class=s2>&#34;logout&#34;</span><span class=o>&gt;</span><span class=nx>退出登录</span><span class=o>&lt;</span><span class=err>/el-dropdown-item&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/el-dropdown-menu&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/el-dropdown&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span> <span class=nx>setup</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>handleCommand</span> <span class=o>=</span> <span class=p>(</span><span class=nx>command</span><span class=p>)=&gt;{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>command</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/script&gt;</span>
</span></span></code></pre></div><h3 id=页面刷新和全屏>页面刷新和全屏<a hidden class=anchor aria-hidden=true href=#页面刷新和全屏>#</a></h3><p><a href=https://vueuse.org/core/useFullscreen/#usefullscreen target=_blank>https://vueuse.org/core/useFullscreen/#usefullscreen</a></p><pre class=mermaid>npm i @vueuse/core
</pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>tooltip</span> <span class=nx>effect</span><span class=o>=</span><span class=s2>&#34;dark&#34;</span> <span class=nx>content</span><span class=o>=</span><span class=s2>&#34;刷新&#34;</span> <span class=nx>placement</span><span class=o>=</span><span class=s2>&#34;bottom&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>icon</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;icon-btn&#34;</span> <span class=err>@</span><span class=nx>click</span><span class=o>=</span><span class=s2>&#34;handleRefresh&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>refresh</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/el-icon&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/el-tooltip&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>tooltip</span> <span class=nx>effect</span><span class=o>=</span><span class=s2>&#34;dark&#34;</span> <span class=nx>content</span><span class=o>=</span><span class=s2>&#34;全屏&#34;</span> <span class=nx>placement</span><span class=o>=</span><span class=s2>&#34;bottom&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>icon</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;icon-btn&#34;</span> <span class=err>@</span><span class=nx>click</span><span class=o>=</span><span class=s2>&#34;toggle&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>full</span><span class=o>-</span><span class=nx>screen</span> <span class=nx>v</span><span class=o>-</span><span class=k>if</span><span class=o>=</span><span class=s2>&#34;!isFullscreen&#34;</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>aim</span> <span class=nx>v</span><span class=o>-</span><span class=k>else</span> <span class=err>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/el-icon&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/el-tooltip&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>// full-screen v-if=&#34;!isFullscreen&#34;和aim v-else是两个自定义的组件，它们
</span></span></span><span class=line><span class=cl><span class=c1>// 分别代表全屏和非全屏状态下的图标。其中，v-if=&#34;!isFullscreen&#34;表示当
</span></span></span><span class=line><span class=cl><span class=c1>// isFullscreen为false时，显示full-screen组件，否则显示aim组件。
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span> <span class=nx>setup</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kr>import</span> <span class=p>{</span> <span class=nx>useFullscreen</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@vueuse/core&#39;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>handleRefresh</span> <span class=o>=</span> <span class=p>()=&gt;{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// router.go(0);
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>location</span><span class=p>.</span><span class=nx>reload</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// const toggle = ()=&gt;{
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     if (document.fullscreenElement) {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//         document.exitFullscreen();
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     } else {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//         document.documentElement.requestFullscreen();
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     }
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// }
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=p>{</span> <span class=nx>isFullscreen</span><span class=p>,</span> <span class=nx>toggle</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>useFullscreen</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1>// isFullscreen 是否全屏
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// toggle 切换全屏
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>&lt;</span><span class=err>/script&gt;</span>
</span></span></code></pre></div><h2 id=通用抽屉组件封装>通用抽屉组件封装<a hidden class=anchor aria-hidden=true href=#通用抽屉组件封装>#</a></h2><h3 id=defineexpose><a href=https://cn.vuejs.org/api/sfc-script-setup.html#defineexpose target=_blank>defineExpose</a></h3><p>使用 的组件是默认关闭的——即通过模板引用或者 $parent 链获取到的组件的公开实例，不会暴露任何在 中声明的绑定。</p><p>可以通过 defineExpose 编译器宏来显式指定在 组件中要暴露出去的属性：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span> <span class=nx>setup</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>ref</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>a</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>b</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>defineExpose</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>a</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>b</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/script&gt;</span>
</span></span></code></pre></div><p>当父组件通过模板引用的方式获取到当前组件的实例，获取到的实例会像这样 { a: number, b: number } (ref 会和在普通实例中一样被自动解包)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>template</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>drawer</span> <span class=nx>v</span><span class=o>-</span><span class=nx>model</span><span class=o>=</span><span class=s2>&#34;showDrawer&#34;</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;修改密码&#34;</span> <span class=nx>size</span><span class=o>=</span><span class=s2>&#34;45%&#34;</span> <span class=o>:</span><span class=nx>close</span><span class=o>-</span><span class=nx>on</span><span class=o>-</span><span class=nx>click</span><span class=o>-</span><span class=nx>modal</span><span class=o>=</span><span class=s2>&#34;false&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>div</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;formDrawer&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>div</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;body&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>slot</span><span class=o>&gt;&lt;</span><span class=err>/slot&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>div</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;actions&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>button</span> <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;primary&#34;</span><span class=o>&gt;</span><span class=nx>提交</span><span class=o>&lt;</span><span class=err>/el-button&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>button</span> <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;default&#34;</span> <span class=err>@</span><span class=nx>click</span><span class=o>=</span><span class=s2>&#34;close&#34;</span><span class=o>&gt;</span><span class=nx>取消</span><span class=o>&lt;</span><span class=err>/el-button&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/el-drawer&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span> <span class=nx>setup</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kr>import</span> <span class=p>{</span> <span class=nx>ref</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;vue&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>showDrawer</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=kc>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 打开
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>open</span> <span class=o>=</span> <span class=p>()=&gt;</span> <span class=nx>showDrawer</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 关闭
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>close</span> <span class=o>=</span> <span class=p>()=&gt;</span><span class=nx>showDrawer</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 向父组件暴露以下方法
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>defineExpose</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>open</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>close</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/script&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>style</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>formDrawer</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>width</span><span class=o>:</span> <span class=mi>100</span><span class=o>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>height</span><span class=o>:</span> <span class=mi>100</span><span class=o>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>position</span><span class=o>:</span> <span class=nx>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=err>@</span><span class=nx>apply</span> <span class=nx>flex</span> <span class=nx>flex</span><span class=o>-</span><span class=nx>col</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>formDrawer</span> <span class=p>.</span><span class=nx>body</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>flex</span><span class=o>:</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>position</span><span class=o>:</span> <span class=nx>absolute</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>top</span><span class=o>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>left</span><span class=o>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>right</span><span class=o>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>bottom</span><span class=o>:</span> <span class=mi>50</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>overflow</span><span class=o>-</span><span class=nx>y</span><span class=o>:</span> <span class=nx>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>formDrawer</span> <span class=p>.</span><span class=nx>actions</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>height</span><span class=o>:</span> <span class=mi>50</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=err>@</span><span class=nx>apply</span> <span class=nx>mt</span><span class=o>-</span><span class=nx>auto</span> <span class=nx>flex</span> <span class=nx>items</span><span class=o>-</span><span class=nx>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/style&gt;</span>
</span></span></code></pre></div><h3 id=defineprops-和-defineemits><a href=https://cn.vuejs.org/api/sfc-script-setup.html#using-custom-directives target=_blank>defineProps() 和 defineEmits()</a></h3><p>为了在声明 props 和 emits 选项时获得完整的类型推导支持，我们可以使用 defineProps 和 defineEmits API，它们将自动地在 中可用：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span> <span class=nx>setup</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>props</span> <span class=o>=</span> <span class=nx>defineProps</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>foo</span><span class=o>:</span> <span class=nb>String</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>emit</span> <span class=o>=</span> <span class=nx>defineEmits</span><span class=p>([</span><span class=s1>&#39;change&#39;</span><span class=p>,</span> <span class=s1>&#39;delete&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=c1>// setup 代码
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>&lt;</span><span class=err>/script&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>template</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>drawer</span> <span class=nx>v</span><span class=o>-</span><span class=nx>model</span><span class=o>=</span><span class=s2>&#34;showDrawer&#34;</span> <span class=o>:</span><span class=nx>title</span><span class=o>=</span><span class=s2>&#34;title&#34;</span> <span class=o>:</span><span class=nx>size</span><span class=o>=</span><span class=s2>&#34;size&#34;</span> <span class=o>:</span><span class=nx>close</span><span class=o>-</span><span class=nx>on</span><span class=o>-</span><span class=nx>click</span><span class=o>-</span><span class=nx>modal</span><span class=o>=</span><span class=s2>&#34;false&#34;</span>
</span></span><span class=line><span class=cl>        <span class=o>:</span><span class=nx>destroy</span><span class=o>-</span><span class=nx>on</span><span class=o>-</span><span class=nx>close</span><span class=o>=</span><span class=s2>&#34;destroyOnClose&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>div</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;formDrawer&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>div</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;body&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>slot</span><span class=o>&gt;&lt;</span><span class=err>/slot&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>div</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;actions&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>button</span> <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;primary&#34;</span> <span class=err>@</span><span class=nx>click</span><span class=o>=</span><span class=s2>&#34;submit&#34;</span> <span class=o>:</span><span class=nx>loading</span><span class=o>=</span><span class=s2>&#34;loading&#34;</span><span class=o>&gt;</span><span class=p>{{</span> <span class=nx>submitText</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/el-button&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>button</span> <span class=nx>type</span><span class=o>=</span><span class=s2>&#34;default&#34;</span> <span class=err>@</span><span class=nx>click</span><span class=o>=</span><span class=s2>&#34;close&#34;</span><span class=o>&gt;</span><span class=nx>取消</span><span class=o>&lt;</span><span class=err>/el-button&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/el-drawer&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span> <span class=nx>setup</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c1>// defineProps() 接收父组件传递的参数
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>props</span> <span class=o>=</span> <span class=nx>defineProps</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>title</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>size</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>type</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=k>default</span><span class=o>:</span> <span class=s1>&#39;45%&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 控制是否在关闭 Drawer 之后将子元素全部销毁
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>destroyOnClose</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>type</span><span class=o>:</span> <span class=nb>Boolean</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=k>default</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 提交按钮的文字
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>submitText</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>type</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=k>default</span><span class=o>:</span> <span class=s1>&#39;提交&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 这段代码使用了 Vue 3 中的 defineEmits 函数来声明了一个名为 submit 的事件。然后在 submit 函数中，调用了 emit 函数并传入了
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// 事件名称 &#39;submit&#39;，从而触发了名为 submit 的事件。这样做的好处是可以在组件的模板中使用 v-on:submit 或 @submit 来监听该事件
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// 从而实现组件与父组件之间的通信。
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>emit</span> <span class=o>=</span> <span class=nx>defineEmits</span><span class=p>([</span><span class=s1>&#39;submit&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>submit</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;submit&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>form</span><span class=o>-</span><span class=nx>drawer</span> <span class=nx>ref</span><span class=o>=</span><span class=s2>&#34;formDrawerRef&#34;</span> <span class=nx>title</span><span class=o>=</span><span class=s2>&#34;修改密码&#34;</span> <span class=nx>size</span><span class=o>=</span><span class=s2>&#34;30%&#34;</span> <span class=nx>destroy</span><span class=o>-</span><span class=nx>on</span><span class=o>-</span><span class=nx>close</span> <span class=err>@</span><span class=nx>submit</span><span class=o>=</span><span class=s2>&#34;onSubmit&#34;</span> <span class=o>/&gt;</span>
</span></span></code></pre></div><h2 id=菜单栏>菜单栏<a hidden class=anchor aria-hidden=true href=#菜单栏>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>template</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>div</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;f-menu&#34;</span> <span class=o>:</span><span class=nx>style</span><span class=o>=</span><span class=s2>&#34;{ width: $store.state.asideWidth }&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>menu</span> <span class=o>:</span><span class=k>default</span><span class=o>-</span><span class=nx>active</span><span class=o>=</span><span class=s2>&#34;defaultActive&#34;</span> <span class=nx>unique</span><span class=o>-</span><span class=nx>opened</span> <span class=k>default</span><span class=o>-</span><span class=nx>active</span><span class=o>=</span><span class=s2>&#34;2&#34;</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;border-0&#34;</span> <span class=err>@</span><span class=nx>select</span><span class=o>=</span><span class=s2>&#34;handleSelect&#34;</span>
</span></span><span class=line><span class=cl>            <span class=o>:</span><span class=nx>collapse</span><span class=o>=</span><span class=s2>&#34;isCollapse&#34;</span> <span class=o>:</span><span class=nx>collapse</span><span class=o>-</span><span class=nx>transition</span><span class=o>=</span><span class=s2>&#34;false&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=nx>template</span> <span class=nx>v</span><span class=o>-</span><span class=k>for</span><span class=o>=</span><span class=s2>&#34;(item, index) in asideMenus&#34;</span> <span class=o>:</span><span class=nx>key</span><span class=o>=</span><span class=s2>&#34;index&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>sub</span><span class=o>-</span><span class=nx>menu</span> <span class=nx>v</span><span class=o>-</span><span class=k>if</span><span class=o>=</span><span class=s2>&#34;item.child &amp;&amp; item.child.length &gt; 0&#34;</span> <span class=o>:</span><span class=nx>index</span><span class=o>=</span><span class=s2>&#34;item.name&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=nx>template</span> <span class=err>#</span><span class=nx>title</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>icon</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                            <span class=o>&lt;</span><span class=nx>component</span> <span class=o>:</span><span class=nx>is</span><span class=o>=</span><span class=s2>&#34;item.icon&#34;</span><span class=o>&gt;&lt;</span><span class=err>/component&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=o>&lt;</span><span class=err>/el-icon&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=o>&lt;</span><span class=nx>span</span><span class=o>&gt;</span><span class=p>{{</span> <span class=nx>item</span><span class=p>.</span><span class=nx>name</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/span&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>menu</span><span class=o>-</span><span class=nx>item</span> <span class=nx>v</span><span class=o>-</span><span class=k>for</span><span class=o>=</span><span class=s2>&#34;(item2, index2) in item.child&#34;</span> <span class=o>:</span><span class=nx>key</span><span class=o>=</span><span class=s2>&#34;index2&#34;</span> <span class=o>:</span><span class=nx>index</span><span class=o>=</span><span class=s2>&#34;item2.frontpath&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>icon</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                            <span class=o>&lt;</span><span class=nx>component</span> <span class=o>:</span><span class=nx>is</span><span class=o>=</span><span class=s2>&#34;item2.icon&#34;</span><span class=o>&gt;&lt;</span><span class=err>/component&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=o>&lt;</span><span class=err>/el-icon&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=o>&lt;</span><span class=nx>span</span><span class=o>&gt;</span><span class=p>{{</span> <span class=nx>item2</span><span class=p>.</span><span class=nx>name</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/span&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=err>/el-menu-item&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=err>/el-sub-menu&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>menu</span><span class=o>-</span><span class=nx>item</span> <span class=nx>v</span><span class=o>-</span><span class=k>else</span> <span class=o>:</span><span class=nx>index</span><span class=o>=</span><span class=s2>&#34;item.frontpath&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=nx>el</span><span class=o>-</span><span class=nx>icon</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=o>&lt;</span><span class=nx>component</span> <span class=o>:</span><span class=nx>is</span><span class=o>=</span><span class=s2>&#34;item.icon&#34;</span><span class=o>&gt;&lt;</span><span class=err>/component&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=err>/el-icon&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=o>&lt;</span><span class=nx>span</span><span class=o>&gt;</span><span class=p>{{</span> <span class=nx>item</span><span class=p>.</span><span class=nx>name</span> <span class=p>}}</span><span class=o>&lt;</span><span class=err>/span&gt;</span>
</span></span><span class=line><span class=cl>                <span class=o>&lt;</span><span class=err>/el-menu-item&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=err>/el-menu&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=err>/div&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/template&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span> <span class=nx>setup</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useRouter</span><span class=p>,</span> <span class=nx>useRoute</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue-router&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>computed</span><span class=p>,</span> <span class=nx>ref</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useStore</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vuex&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>store</span> <span class=o>=</span> <span class=nx>useStore</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>isCollapse</span> <span class=o>=</span> <span class=nx>computed</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nx>store</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>asideWidth</span> <span class=o>!=</span> <span class=s2>&#34;250px&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 默认选中当前路由路径
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>route</span> <span class=o>=</span> <span class=nx>useRoute</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>defaultActive</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=nx>route</span><span class=p>.</span><span class=nx>path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>router</span> <span class=o>=</span> <span class=nx>useRouter</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>asideMenus</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=s2>&#34;后台面板&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;icon&#34;</span><span class=o>:</span> <span class=s2>&#34;help&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;child&#34;</span><span class=o>:</span> <span class=p>[{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=s2>&#34;主控台&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;icon&#34;</span><span class=o>:</span> <span class=s2>&#34;home-filled&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;frontpath&#34;</span><span class=o>:</span> <span class=s2>&#34;/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>}]</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=s2>&#34;商城管理&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;icon&#34;</span><span class=o>:</span> <span class=s2>&#34;shopping-bag&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;child&#34;</span><span class=o>:</span> <span class=p>[{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=s2>&#34;商品管理&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;icon&#34;</span><span class=o>:</span> <span class=s2>&#34;shopping-cart-full&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;frontpath&#34;</span><span class=o>:</span> <span class=s2>&#34;/goods/list&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>}],</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=s2>&#34;用户管理&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;icon&#34;</span><span class=o>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;frontpath&#34;</span><span class=o>:</span> <span class=s2>&#34;/user/list&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>handleSelect</span> <span class=o>=</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>router</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/script&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>style</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>f</span><span class=o>-</span><span class=nx>menu</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>transition</span><span class=o>:</span> <span class=nx>all</span> <span class=mf>0.2</span><span class=nx>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>top</span><span class=o>:</span> <span class=mi>64</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>bottom</span><span class=o>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>left</span><span class=o>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>overflow</span><span class=o>-</span><span class=nx>y</span><span class=o>:</span> <span class=nx>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>overflow</span><span class=o>-</span><span class=nx>x</span><span class=o>:</span> <span class=nx>hidden</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=err>@</span><span class=nx>apply</span> <span class=nx>shadow</span><span class=o>-</span><span class=nx>md</span> <span class=nx>fixed</span> <span class=nx>bg</span><span class=o>-</span><span class=nx>light</span><span class=o>-</span><span class=mi>50</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>f</span><span class=o>-</span><span class=nx>menu</span><span class=o>::-</span><span class=nx>webkit</span><span class=o>-</span><span class=nx>scrollbar</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>width</span><span class=o>:</span> <span class=mi>0</span><span class=nx>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/style&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>store</span> <span class=o>=</span> <span class=nx>createStore</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>state</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=c1>// 用户信息
</span></span></span><span class=line><span class=cl><span class=c1></span>          <span class=nx>user</span><span class=o>:</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          <span class=c1>// 侧边栏宽度
</span></span></span><span class=line><span class=cl><span class=c1></span>          <span class=nx>asideWidth</span><span class=o>:</span> <span class=s2>&#34;250px&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>mutations</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 设置用户信息
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>SET_USER_INFO</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span> <span class=nx>user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>state</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=nx>user</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 侧边栏展开
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>ASIDE_OPEN</span><span class=p>(</span><span class=nx>state</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>state</span><span class=p>.</span><span class=nx>asideWidth</span> <span class=o>=</span> <span class=nx>state</span><span class=p>.</span><span class=nx>asideWidth</span> <span class=o>==</span> <span class=s2>&#34;250px&#34;</span> <span class=o>?</span> <span class=s2>&#34;64px&#34;</span> <span class=o>:</span> <span class=s2>&#34;250px&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><h3 id=menu><a href=https://element-plus.gitee.io/zh-CN/component/menu.html target=_blank>Menu</a></h3><table><thead><tr><th>属性名</th><th>说明</th></tr></thead><tbody><tr><td>unique-opened</td><td>是否只保持一个子菜单的展开</td></tr><tr><td>default-active</td><td>页面加载时默认激活菜单的 index</td></tr></tbody></table><h3 id=根据菜单添加路由>根据菜单添加路由<a hidden class=anchor aria-hidden=true href=#根据菜单添加路由>#</a></h3><h4 id=check-路由>check 路由<a hidden class=anchor aria-hidden=true href=#check-路由>#</a></h4><p><a href=https://router.vuejs.org/zh/guide/advanced/dynamic-routing.html#%E6%9F%A5%E7%9C%8B%E7%8E%B0%E6%9C%89%E8%B7%AF%E7%94%B1 target=_blank>https://router.vuejs.org/zh/guide/advanced/dynamic-routing.html#%E6%9F%A5%E7%9C%8B%E7%8E%B0%E6%9C%89%E8%B7%AF%E7%94%B1</a></p><p>Vue Router 提供了两个功能来查看现有的路由：</p><ul><li>router.hasRoute()：检查路由是否存在。</li><li>router.getRoutes()：获取一个包含所有路由记录的数组。</li><li>hasRoute(name): boolean</li><li>Checks if a route with a given name exists</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>createRouter</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 函数用来创建一个路由实例
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>createWebHashHistory</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 用来创建一个基于哈希路由的历史对象
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue-router&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>Index</span> <span class=nx>from</span> <span class=s1>&#39;~/pages/index.vue&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>NotFound</span> <span class=nx>from</span> <span class=s1>&#39;~/pages/404.vue&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>Admin</span> <span class=nx>from</span> <span class=s1>&#39;~/layouts/admin.vue&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>GoodList</span> <span class=nx>from</span> <span class=s1>&#39;~/pages/goods/list.vue&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>CategoryList</span> <span class=nx>from</span> <span class=s1>&#39;~/pages/category/list.vue&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>Login</span> <span class=nx>from</span> <span class=s1>&#39;~/pages/login/login.vue&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 默认路由, 所有用户都可以访问
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>routes</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Admin&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>component</span><span class=o>:</span> <span class=nx>Admin</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>meta</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;后台首页&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/:pathMatch(.*)*&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;NotFound&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>component</span><span class=o>:</span> <span class=nx>NotFound</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>meta</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;404&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/login&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Login&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>component</span><span class=o>:</span> <span class=nx>Login</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>meta</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;登录&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 动态路由, 用于匹配用户权限添加的路由
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>asyncRoutes</span> <span class=o>=</span> <span class=p>[{</span>
</span></span><span class=line><span class=cl>    <span class=nx>path</span><span class=o>:</span> <span class=s2>&#34;/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>component</span><span class=o>:</span> <span class=nx>Index</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>meta</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;后台首页&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>path</span><span class=o>:</span> <span class=s2>&#34;/goods/list&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;/goods/list&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>component</span><span class=o>:</span> <span class=nx>GoodList</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>meta</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;商品管理&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>path</span><span class=o>:</span> <span class=s2>&#34;/category/list&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;/category/list&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>component</span><span class=o>:</span> <span class=nx>CategoryList</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>meta</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;分类列表&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 这段代码定义了一个路由器，该路由器使用createWebHashHistory()创建的历史记录对象和给定的路由（routes）来定义路由。
</span></span></span><span class=line><span class=cl><span class=c1>// createWebHashHistory()创建的历史记录对象会把URL的片段存储在window.location.hash中，以支持前进和后退按钮和书签。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>const</span> <span class=nx>router</span> <span class=o>=</span> <span class=nx>createRouter</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>history</span><span class=o>:</span> <span class=nx>createWebHashHistory</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=nx>routes</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 用于添加动态路由
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kd>function</span> <span class=nx>addRoutes</span><span class=p>(</span><span class=nx>menus</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 是否有新的路由
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>let</span> <span class=nx>hasNewRoutes</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>findAndAddRoutesByMenu</span> <span class=o>=</span> <span class=p>(</span><span class=nx>menuList</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>menuList</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>menu</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kd>let</span> <span class=nx>item</span> <span class=o>=</span> <span class=nx>asyncRoutes</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span><span class=nx>item</span> <span class=p>=&gt;</span> <span class=nx>item</span><span class=p>.</span><span class=nx>path</span> <span class=o>==</span> <span class=nx>menu</span><span class=p>.</span><span class=nx>frontpath</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 判断是否已经添加过路由
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=p>(</span><span class=nx>item</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=nx>router</span><span class=p>.</span><span class=nx>hasRoute</span><span class=p>(</span><span class=nx>item</span><span class=p>.</span><span class=nx>path</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>router</span><span class=p>.</span><span class=nx>addRoute</span><span class=p>(</span><span class=s1>&#39;Admin&#39;</span><span class=p>,</span> <span class=nx>item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nx>hasNewRoutes</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>menu</span><span class=p>.</span><span class=nx>child</span> <span class=o>&amp;&amp;</span> <span class=nx>menu</span><span class=p>.</span><span class=nx>child</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>findAndAddRoutesByMenu</span><span class=p>(</span><span class=nx>menu</span><span class=p>.</span><span class=nx>child</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>findAndAddRoutesByMenu</span><span class=p>(</span><span class=nx>menus</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>hasNewRoutes</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><blockquote><p>动态路由主要通过两个函数实现。router.addRoute() 和 router.removeRoute()。它们只注册一个新的路由，也就是说，如果新增加的路由与当前位置相匹配，就需要你用 router.push() 或 router.replace() 来手动导航</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 全局前置守卫
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=nx>beforeEach</span><span class=p>(</span><span class=kr>async</span> <span class=p>(</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 如果用户登录了，自动获取用户信息，并存储在vuex当中
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>let</span> <span class=nx>hasNewRoutes</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>token</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=p>{</span> <span class=nx>menus</span> <span class=p>}</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>store</span><span class=p>.</span><span class=nx>dispatch</span><span class=p>(</span><span class=s2>&#34;getinfo&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 动态添加路由
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>hasNewRoutes</span> <span class=o>=</span> <span class=nx>addRoutes</span><span class=p>(</span><span class=nx>menus</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 设置页面标题
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nb>document</span><span class=p>.</span><span class=nx>title</span> <span class=o>=</span> <span class=nx>to</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>title</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>hasNewRoutes</span> <span class=o>?</span> <span class=nx>next</span><span class=p>(</span><span class=nx>to</span><span class=p>.</span><span class=nx>fullPath</span><span class=p>)</span> <span class=o>:</span> <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><h4 id=标签导航方法>标签导航方法<a hidden class=anchor aria-hidden=true href=#标签导航方法>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>tabList</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>([</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;后台首页&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>path</span><span class=o>:</span> <span class=s2>&#34;/&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 添加标签导航
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>addTab</span> <span class=o>=</span> <span class=p>(</span><span class=nx>tab</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 判断是否存在
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>let</span> <span class=nx>notab</span> <span class=o>=</span> <span class=nx>tabList</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>findIndex</span><span class=p>(</span><span class=nx>item</span> <span class=p>=&gt;</span> <span class=nx>item</span><span class=p>.</span><span class=nx>path</span> <span class=o>==</span> <span class=nx>tab</span><span class=p>.</span><span class=nx>path</span><span class=p>)</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>notab</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>tabList</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>tab</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>cookies</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=s2>&#34;tabList&#34;</span><span class=p>,</span> <span class=nx>tabList</span><span class=p>.</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 初始化标签导航列表
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>initTabList</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>tbs</span> <span class=o>=</span> <span class=nx>cookies</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&#34;tabList&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>tbs</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>tabList</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>tbs</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>initTabList</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// onBeforeRouteUpdate 监听路由变化
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>onBeforeRouteUpdate</span><span class=p>((</span><span class=nx>to</span><span class=p>,</span> <span class=nx>from</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>activeTab</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>to</span><span class=p>.</span><span class=nx>path</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>addTab</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>title</span><span class=o>:</span> <span class=nx>to</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>title</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>path</span><span class=o>:</span> <span class=nx>to</span><span class=p>.</span><span class=nx>path</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 页面切换 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>changeTab</span> <span class=o>=</span> <span class=p>(</span><span class=nx>t</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>activeTab</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>t</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>router</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>t</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 移除标签导航
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>removeTab</span> <span class=o>=</span> <span class=p>(</span><span class=nx>t</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>tabs</span> <span class=o>=</span> <span class=nx>tabList</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>activeTab</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>a</span> <span class=o>==</span> <span class=nx>t</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>tabs</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>tab</span><span class=p>,</span> <span class=nx>index</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>tab</span><span class=p>.</span><span class=nx>path</span> <span class=o>==</span> <span class=nx>t</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>nextTab</span> <span class=o>=</span> <span class=nx>tabs</span><span class=p>[</span><span class=nx>index</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span> <span class=o>||</span> <span class=nx>tabs</span><span class=p>[</span><span class=nx>index</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=nx>nextTab</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>a</span> <span class=o>=</span> <span class=nx>nextTab</span><span class=p>.</span><span class=nx>path</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>activeTab</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>tabList</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>tabList</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>tab</span> <span class=p>=&gt;</span> <span class=nx>tab</span><span class=p>.</span><span class=nx>path</span> <span class=o>!=</span> <span class=nx>t</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>cookies</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=s2>&#34;tabList&#34;</span><span class=p>,</span> <span class=nx>tabList</span><span class=p>.</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=keep-alive-页面缓存>Keep-alive 页面缓存<a hidden class=anchor aria-hidden=true href=#keep-alive-页面缓存>#</a></h3><p><a href=https://cn.vuejs.org/guide/built-ins/keep-alive.html#keepalive target=_blank>https://cn.vuejs.org/guide/built-ins/keep-alive.html#keepalive</a></p><blockquote><p>默认情况下，一个组件实例在被替换掉后会被销毁。这会导致它丢失其中所有已变化的状态——当这个组件再一次被显示时，会创建一个只带有初始状态的新实例。</p><p>在切换时创建新的组件实例通常是有意义的，但在这个例子中，我们的确想要组件能在被“切走”的时候保留它们的状态。要解决这个问题，我们可以用 内置组件将这些动态组件包装起来：</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c>&lt;!--</span> <span class=nx>非活跃的组件将会被缓存</span><span class=err>！</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>KeepAlive</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=o>&lt;</span><span class=nx>component</span> <span class=o>:</span><span class=nx>is</span><span class=o>=</span><span class=s2>&#34;activeComponent&#34;</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/KeepAlive&gt;</span>
</span></span></code></pre></div><h3 id=transition全局过渡动画>transition全局过渡动画<a hidden class=anchor aria-hidden=true href=#transition全局过渡动画>#</a></h3><p><a href=https://cn.vuejs.org/guide/built-ins/transition.html target=_blank>https://cn.vuejs.org/guide/built-ins/transition.html</a></p><blockquote><p>每个子页面只能有一个 根结点</p></blockquote><p><a href=https://animate.style/ target=_blank>https://animate.style/</a> 动画效果！</p><p><a href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.css target=_blank>https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.css</a></p><h2 id=权限控制-v-permission>权限控制 V-permission<a hidden class=anchor aria-hidden=true href=#权限控制-v-permission>#</a></h2><h3 id=自定义指令><a href=https://cn.vuejs.org/guide/reusability/custom-directives.html#custom-directives target=_blank>自定义指令</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// directives\permission.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>store</span> <span class=nx>from</span> <span class=s2>&#34;~/store&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>hasPermission</span><span class=p>(</span><span class=nx>value</span><span class=p>,</span> <span class=nx>el</span> <span class=o>=</span> <span class=kc>false</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nb>Array</span><span class=p>.</span><span class=nx>isArray</span><span class=p>(</span><span class=nx>value</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=sb>`需要配置权限，例如 v-permission=&#34;[&#39;getStatistics3,GET&#39;]&#34;`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>hasAuth</span> <span class=o>=</span> <span class=nx>value</span><span class=p>.</span><span class=nx>findIndex</span><span class=p>(</span><span class=nx>v</span> <span class=p>=&gt;</span> <span class=nx>store</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>ruleNames</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=nx>v</span><span class=p>))</span> <span class=o>!=</span> <span class=o>-</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>el</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=nx>hasAuth</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 拿到当前元素的父元素，然后删除当前元素
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>el</span><span class=p>.</span><span class=nx>parentNode</span> <span class=o>&amp;&amp;</span> <span class=nx>el</span><span class=p>.</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>removeChild</span><span class=p>(</span><span class=nx>el</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>hasAuth</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>install</span><span class=p>(</span><span class=nx>app</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>app</span><span class=p>.</span><span class=nx>directive</span><span class=p>(</span><span class=s2>&#34;permission&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// el: 指令所绑定的元素，可以用来直接操作 DOM 。
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>// binding: 传递给指令的值，例如：v-my-directive=&#34;1 + 1&#34; 中，参数为 2。
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>mounted</span><span class=p>(</span><span class=nx>el</span><span class=p>,</span> <span class=nx>binding</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>hasPermission</span><span class=p>(</span><span class=nx>binding</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span> <span class=nx>el</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// main.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>permission</span> <span class=nx>from</span> <span class=s1>&#39;~/directives/permission&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>createApp</span><span class=p>(</span><span class=nx>App</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>permission</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>mount</span><span class=p>(</span><span class=s1>&#39;#app&#39;</span><span class=p>)</span>
</span></span></code></pre></div><p><strong>运用</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=c1>// 直接调用 directives\permission.js 中方法判断 不存在删除元素
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>el-col</span> <span class=nt>v-permission</span><span class=s>=&#34;[&#39;getStatistics3,GET&#39;]&#34; :span=&#34;12&#34; </span><span class=nt>:offset</span><span class=s>=&#34;0&#34;</span><span class=p>&gt;</span>               
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>IndexChart</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>el-col</span><span class=p>&gt;</span>
</span></span></code></pre></div><h2 id=统计面板>统计面板<a hidden class=anchor aria-hidden=true href=#统计面板>#</a></h2><ul><li><p>Element Plus 提示插件： Element Plus Snippets</p></li><li><p><a href=https://element-plus.org/zh-CN/component/layout.html#%E5%88%86%E6%A0%8F%E9%97%B4%E9%9A%94 target=_blank>Layout 布局</a></p></li><li><p><a href=https://element-plus.org/zh-CN/component/card.html#%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95 target=_blank>卡片</a></p></li><li><p><a href=https://element-plus.org/zh-CN/component/tag.html target=_blank>tag 标签</a></p></li></ul><h3 id=骨架屏组件><a href=https://element-plus.org/zh-CN/component/skeleton.html target=_blank>骨架屏组件</a></h3><blockquote><p>在需要等待加载内容的位置设置一个骨架屏，某些场景下比 Loading 的视觉效果更好。</p></blockquote><h3 id=数字滚动动画>数字滚动动画<a hidden class=anchor aria-hidden=true href=#数字滚动动画>#</a></h3><blockquote><p><a href=https://www.npmjs.com/package/gsap target=_blank>gsap</a></p></blockquote><ol><li>封装组件 /components/CountTo.vue</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--</span> <span class=nx>toFix</span> <span class=nx>保留两位</span> <span class=nx>限制加载小数点过多</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>{{</span> <span class=nx>d</span><span class=p>.</span><span class=nx>num</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>reactive</span><span class=p>,</span> <span class=nx>watch</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>gsap</span> <span class=nx>from</span> <span class=s1>&#39;gsap&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>props</span> <span class=o>=</span> <span class=nx>defineProps</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>value</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=nb>Number</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=k>default</span><span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>d</span> <span class=o>=</span> <span class=nx>reactive</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>num</span><span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>AnimateToValue</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>gsap</span><span class=p>.</span><span class=nx>to</span><span class=p>(</span><span class=nx>d</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>duration</span><span class=o>:</span> <span class=mf>0.5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>num</span><span class=o>:</span> <span class=nx>props</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>AnimateToValue</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// watch 是 Vue.js 3 中的一个 API，用于监听变量或者对象的变化，并在变化时执行回调函数。
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>watch</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nx>props</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>AnimateToValue</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><ol start=2><li>应用以及使用</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>CountTo</span> <span class=nx>from</span> <span class=s2>&#34;~/components/CountTo.vue&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>span</span> <span class=kr>class</span><span class=o>=</span><span class=s2>&#34;text-3xl font-bold text-gray-500&#34;</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=nx>CountTo</span> <span class=o>:</span><span class=nx>value</span><span class=o>=</span><span class=s2>&#34;item.value&#34;</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/span&gt;</span>
</span></span></code></pre></div><h3 id=echarts>Echarts<a hidden class=anchor aria-hidden=true href=#echarts>#</a></h3><h4 id=初步实现>初步实现<a hidden class=anchor aria-hidden=true href=#初步实现>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>el-card</span> <span class=na>shadow</span><span class=o>=</span><span class=s>&#34;never&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mt-5&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>template</span> <span class=err>#</span><span class=na>header</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex justify-between&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-sm&#34;</span><span class=p>&gt;</span><span class=nx>订单统计</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>el-check-tag</span> <span class=nt>v-for</span><span class=o>=</span><span class=s>&#34;(item, index) in options&#34; :key=&#34;index&#34; :checked=&#34;current == item.value&#34;</span><span class=p>
</span></span></span><span class=line><span class=cl><span class=p></span>                        <span class=na>style</span><span class=o>=</span><span class=s>&#34;margin-right: 8px&#34;</span> <span class=nt>@click</span><span class=s>=&#34;handleChoose(item.value)&#34;</span><span class=p>&gt;{{</span> <span class=na>item.text</span> <span class=p>}}</span><span class=err>&lt;/</span><span class=na>el</span><span class=nt>-check-tag</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;chart&#34;</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;width: 100%;height: 300px;&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>el-card</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>ref</span><span class=p>,</span> <span class=nx>onMounted</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=o>*</span> <span class=nx>as</span> <span class=nx>echarts</span> <span class=nx>from</span> <span class=s1>&#39;echarts&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>getStatistics3</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;~/api/index.js&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>current</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=s2>&#34;week&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>options</span> <span class=o>=</span> <span class=p>[{</span>
</span></span><span class=line><span class=cl>    <span class=nx>text</span><span class=o>:</span> <span class=s2>&#34;近1个月&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>value</span><span class=o>:</span> <span class=s2>&#34;month&#34;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>text</span><span class=o>:</span> <span class=s2>&#34;近1周&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>value</span><span class=o>:</span> <span class=s2>&#34;week&#34;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>text</span><span class=o>:</span> <span class=s2>&#34;近24小时&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>value</span><span class=o>:</span> <span class=s2>&#34;hour&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>handleChoose</span> <span class=o>=</span> <span class=p>(</span><span class=nx>type</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>current</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>type</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>getData</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>myChart</span> <span class=o>=</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl><span class=nx>onMounted</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>chartDom</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;chart&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>myChart</span> <span class=o>=</span> <span class=nx>echarts</span><span class=p>.</span><span class=nx>init</span><span class=p>(</span><span class=nx>chartDom</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>getData</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>getData</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>option</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>option</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>xAxis</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;category&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>data</span><span class=o>:</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=nx>yAxis</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;value&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=nx>series</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>data</span><span class=o>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>                <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;bar&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>showBackground</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>backgroundStyle</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>color</span><span class=o>:</span> <span class=s1>&#39;rgba(180, 180, 180, 0.2)&#39;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// option &amp;&amp; myChart.setOption(option);
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>myChart</span><span class=p>.</span><span class=nx>showLoading</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>getStatistics3</span><span class=p>(</span><span class=nx>current</span><span class=p>.</span><span class=nx>value</span><span class=p>).</span><span class=nx>then</span><span class=p>(</span><span class=nx>res</span><span class=p>=&gt;{</span>
</span></span><span class=line><span class=cl>        <span class=nx>option</span><span class=p>.</span><span class=nx>xAxis</span><span class=p>.</span><span class=nx>data</span> <span class=o>=</span> <span class=nx>res</span><span class=p>.</span><span class=nx>x</span>
</span></span><span class=line><span class=cl>        <span class=nx>option</span><span class=p>.</span><span class=nx>series</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>data</span> <span class=o>=</span> <span class=nx>res</span><span class=p>.</span><span class=nx>y</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>myChart</span><span class=p>.</span><span class=nx>setOption</span><span class=p>(</span><span class=nx>option</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}).</span><span class=k>finally</span><span class=p>(()=&gt;{</span>
</span></span><span class=line><span class=cl>        <span class=nx>myChart</span><span class=p>.</span><span class=nx>hideLoading</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><blockquote><p><a href=https://echarts.apache.org/handbook/zh/how-to/data/dynamic-data/#loading-%E5%8A%A8%E7%94%BB target=_blank>loading 动画</a></p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=nx>myChart</span><span class=p>.</span><span class=nx>showLoading</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>myChart</span><span class=p>.</span><span class=nx>hideLoading</span><span class=p>()</span>
</span></span></code></pre></div><blockquote><p>在页面销毁之前释放图表 不然可能出现白屏现象</p><p><a href=https://echarts.apache.org/handbook/zh/concepts/chart-size/#%E5%AE%B9%E5%99%A8%E8%8A%82%E7%82%B9%E8%A2%AB%E9%94%80%E6%AF%81%E4%BB%A5%E5%8F%8A%E8%A2%AB%E9%87%8D%E5%BB%BA%E6%97%B6 target=_blank>https://echarts.apache.org/handbook/zh/concepts/chart-size/#%E5%AE%B9%E5%99%A8%E8%8A%82%E7%82%B9%E8%A2%AB%E9%94%80%E6%AF%81%E4%BB%A5%E5%8F%8A%E8%A2%AB%E9%87%8D%E5%BB%BA%E6%97%B6</a></p></blockquote><ul><li>假设页面中存在多个标签页，每个标签页都包含一些图表。当选中一个标签页的时候，其他标签页的内容在 DOM 中被移除了。这样，当用户再选中这些标签页的时候，就会发现图表“不见”了。</li><li>本质上，这是由于图表的容器节点被移除导致的。即使之后该节点被重新添加，图表所在的节点也已经不存在了。</li><li>正确的做法是，在图表容器被销毁之后，调用
<a href=https://echarts.apache.org/api.html#echartsInstance.dispose target=_blank><code>echartsInstance.dispose</code></a> 销毁实例，在图表容器重新被添加后再次调用
<a href=https://echarts.apache.org//api.html#echarts.init target=_blank>echarts.init</a> 初始化。</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>ref</span><span class=p>,</span> <span class=nx>onMounted</span><span class=p>,</span> <span class=nx>onBeforeUnmount</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>onBeforeUnmount</span><span class=p>(()=&gt;{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=nx>myChart</span><span class=p>)</span> <span class=nx>echarts</span><span class=p>.</span><span class=nx>dispose</span><span class=p>(</span><span class=nx>myChart</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><h4 id=图表跟随画面变化>图表跟随画面变化<a hidden class=anchor aria-hidden=true href=#图表跟随画面变化>#</a></h4><ul><li><a href=https://vueuse.org/core/useResizeObserver/#useresizeobserver target=_blank>https://vueuse.org/core/useResizeObserver/#useresizeobserver</a></li><li><a href=https://echarts.apache.org/handbook/zh/concepts/chart-size/#%E4%B8%BA%E5%9B%BE%E8%A1%A8%E8%AE%BE%E7%BD%AE%E7%89%B9%E5%AE%9A%E7%9A%84%E5%A4%A7%E5%B0%8F target=_blank>https://echarts.apache.org/handbook/zh/concepts/chart-size/#%E4%B8%BA%E5%9B%BE%E8%A1%A8%E8%AE%BE%E7%BD%AE%E7%89%B9%E5%AE%9A%E7%9A%84%E5%A4%A7%E5%B0%8F</a></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>ref</span><span class=o>=</span><span class=s>&#34;el&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;chart&#34;</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;width: 100%;height: 300px;&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useResizeObserver</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@vueuse/core&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>el</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>useResizeObserver</span><span class=p>(</span><span class=nx>el</span><span class=p>,</span> <span class=p>(</span><span class=nx>entries</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>entry</span> <span class=o>=</span> <span class=nx>entries</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>{</span> <span class=nx>width</span><span class=p>,</span> <span class=nx>height</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>entry</span><span class=p>.</span><span class=nx>contentRect</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>myChart</span><span class=p>.</span><span class=nx>resize</span><span class=p>({</span> <span class=nx>width</span><span class=p>,</span> <span class=nx>height</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div><h4 id=页面变化监听>页面变化监听<a hidden class=anchor aria-hidden=true href=#页面变化监听>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>//使用防抖 (setTimeout定时器)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>getWindowInfo</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kr>const</span> <span class=nx>windowInfo</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>width</span><span class=o>:</span> <span class=nb>window</span><span class=p>.</span><span class=nx>innerWidth</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nx>hight</span><span class=o>:</span> <span class=nb>window</span><span class=p>.</span><span class=nx>innerHeight</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>debounce</span> <span class=o>=</span> <span class=p>(</span><span class=nx>fn</span><span class=p>,</span> <span class=nx>delay</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>let</span> <span class=nx>timer</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=p>(</span><span class=nx>timer</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>clearTimeout</span><span class=p>(</span><span class=nx>timer</span><span class=p>);</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=nx>timer</span> <span class=o>=</span> <span class=nx>setTimeout</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>fn</span><span class=p>();</span>
</span></span><span class=line><span class=cl>		<span class=p>},</span> <span class=nx>delay</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=c1>//触发事件    触发时间（指定时间内执行事件）
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>cancalDebounce</span> <span class=o>=</span> <span class=nx>debounce</span><span class=p>(</span><span class=nx>getWindowInfo</span><span class=p>,</span> <span class=mi>500</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;resize&#39;</span><span class=p>,</span> <span class=nx>cancalDebounce</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// vue3 使用生命周期销毁钩子
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>onUnmounted</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;onUnmounted&#39;</span><span class=p>,</span><span class=s1>&#39;打印是否生效&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>//移除监听事件
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nb>window</span><span class=p>.</span><span class=nx>removeEventListener</span><span class=p>(</span><span class=s1>&#39;resize&#39;</span><span class=p>,</span> <span class=nx>cancalDebounce</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><blockquote><p>样例</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>ref</span><span class=o>=</span><span class=s>&#34;el&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>el-container</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;bg-white rounded&#34;</span> <span class=o>:</span><span class=na>style</span><span class=o>=</span><span class=s>&#34;{ height: h + &#39;px&#39; }&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>el-header</span><span class=p>&gt;</span><span class=nx>Header</span><span class=p>&lt;/</span><span class=nt>el-header</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>el-container</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>el-aside</span> <span class=na>width</span><span class=o>=</span><span class=s>&#34;200px&#34;</span><span class=p>&gt;</span><span class=nx>Aside</span><span class=p>&lt;/</span><span class=nt>el-aside</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>el-main</span><span class=p>&gt;</span><span class=nx>Main</span><span class=p>&lt;/</span><span class=nt>el-main</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=nt>el-container</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>el-container</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>watch</span><span class=p>,</span> <span class=nx>ref</span><span class=p>,</span> <span class=nx>onUnmounted</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useResizeObserver</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@vueuse/core&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 获取屏幕高度
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>windowHeight</span> <span class=o>=</span> <span class=nb>window</span><span class=p>.</span><span class=nx>innerHeight</span> <span class=o>||</span> <span class=nb>document</span><span class=p>.</span><span class=nx>documentElement</span><span class=p>.</span><span class=nx>clientHeight</span>
</span></span><span class=line><span class=cl><span class=c1>// 计算表格高度: 屏幕高度 - 头部高度 - 页签高度 - padding
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>h</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=nx>windowHeight</span> <span class=o>-</span> <span class=mi>60</span> <span class=o>-</span> <span class=mi>44</span> <span class=o>-</span> <span class=mi>40</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//使用防抖 (setTimeout定时器)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>getWindowInfo</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>windowInfo</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>width</span><span class=o>:</span> <span class=nb>window</span><span class=p>.</span><span class=nx>innerWidth</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>hight</span><span class=o>:</span> <span class=nb>window</span><span class=p>.</span><span class=nx>innerHeight</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 改变 h 的值
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>h</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>windowInfo</span><span class=p>.</span><span class=nx>hight</span> <span class=o>-</span> <span class=mi>60</span> <span class=o>-</span> <span class=mi>44</span> <span class=o>-</span> <span class=mi>40</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>debounce</span> <span class=o>=</span> <span class=p>(</span><span class=nx>fn</span><span class=p>,</span> <span class=nx>delay</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>timer</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>timer</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>clearTimeout</span><span class=p>(</span><span class=nx>timer</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>timer</span> <span class=o>=</span> <span class=nx>setTimeout</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>fn</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span> <span class=nx>delay</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=c1>// 触发事件    触发时间（指定时间内执行事件）
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>cancalDebounce</span> <span class=o>=</span> <span class=nx>debounce</span><span class=p>(</span><span class=nx>getWindowInfo</span><span class=p>,</span> <span class=mi>500</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;resize&#39;</span><span class=p>,</span> <span class=nx>cancalDebounce</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 销毁监听
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>onUnmounted</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//移除监听事件
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nb>window</span><span class=p>.</span><span class=nx>removeEventListener</span><span class=p>(</span><span class=s1>&#39;resize&#39;</span><span class=p>,</span> <span class=nx>cancalDebounce</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://waite.wang/tags/project/>Project</a></li></ul><nav class=paginav><a class=prev href=https://waite.wang/posts/tools/alist-beautiful-guide/><span class=title>« 上一页</span><br><span>Alist 美化指南</span>
</a><a class=next href=https://waite.wang/posts/project/shop-mall-api-docs/><span class=title>下一页 »</span><br><span>电商后台管理系统后端api接口文档</span></a></nav></footer><script src=https://utteranc.es/client.js repo=Waite0603/HugoBlog issue-term=pathname theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span><a href=https://beian.miit.gov.cn/ target=_blank rel="noopener noreferrer">粤ICP备2022028437号-1</a></span><br><span>Copyright &copy; 2018 - 2025 By <a href=https://waite.wang/>Waite</a>, All Rights
Reserved.</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script src=/js/jquery-3.5.1.min.js></script><link rel=stylesheet href=/css/jquery.fancybox.min.css><script src=/js/jquery.fancybox.min.js></script></body></html>